(this["webpackJsonptelar-social-engine"]=this["webpackJsonptelar-social-engine"]||[]).push([[18,7,35],{1190:function(e,t,s){"use strict";s.r(t),s.d(t,"SearchPostComponent",(function(){return I}));var a=s(176),o=s(295),n=s.n(o),i=s(150),r=s.n(i),l=s(642),c=s.n(l),h=s(0),d=s.n(h),p=s(97),m=s(126),u=s(592),g=s(618),b=s(59),f=s(71),v=s(18),y=s(5),E=s(37),C=s(43),x=s(32),w=s(519),S=s(17),P=s(138);const k=e=>({search:(t,s,a)=>e(E.l(t,s,a)),setHomeTitle:t=>e(y.q(t||"")),showTopLoading:()=>e(y.w()),hideTopLoading:()=>e(y.j())}),O=()=>{const e=v.a.selectCurrentUser(),t=f.a.selectHasMorePostSeach(),s=w.a.selectRequest(),a=f.a.selectSearchPosts();return o=>{const n=e(o).toJS(),i=Object(P.b)(n.userId,"currentUser.userId"),r=C.a.createServerRequestId(x.a.SearchPosts,i),l=s(o,{requestId:r}),c=t(o),h=a(o);return{hasMorePosts:c,currentUser:n,searchRequestStatus:l?l.status:S.a.NoAction,posts:h,requestId:r}}};class I extends h.Component{constructor(e){super(e),this.unlisten=void 0,this.currentPage=0,this.searchParam=()=>c.a.parse(window.location.search).q,this.state={},this.searchQuery=this.searchQuery.bind(this),this.executeSearch=this.executeSearch.bind(this),this.searchParam=this.searchParam.bind(this)}searchQuery(){const e=this.props.location;this.executeSearch(e)}executeSearch(e){(0,this.props.search)(c.a.parse(e.search).q,this.currentPage,10),this.currentPage++}componentDidMount(){const e=this.props.history,t=this;this.unlisten=e.listen((e=>{t.currentPage=0,this.executeSearch(e)}))}componentWillUnmount(){this.unlisten()}render(){const e=this.props,t=e.t,s=e.classes,o=e.posts,n=e.hasMorePosts,i=e.requestId;if(t)return d.a.createElement(g.default,{tab:"posts"},d.a.createElement("div",{id:"stream-parent",className:r()({[s.noDisplay]:o.isEmpty()})},d.a.createElement(u.a,{posts:o,requestId:i,loadStream:this.searchQuery,hasMorePosts:n,displayWriting:!1})),d.a.createElement("div",{className:r()({[s.noDisplay]:!o.isEmpty()})},d.a.createElement(a.a,{className:s.notFound},t("search.notFoundPost",{query:this.searchParam()}))))}}const T=Object(p.c)("translations")(I);var N;t.default=Object(m.withRouter)((N=n()((e=>({banner:{backgroundAttachment:"scroll",borderRadius:"2px",backgroundRepeat:"unset !important",backgroundPosition:"center center !important",[e.breakpoints.down("xs")]:{backgroundAttachment:"scroll",height:"220px !important"}},bannerContainer:{height:384,[e.breakpoints.down("xs")]:{height:"260px !important"}},media:{height:0,paddingTop:"56.25%"},noDisplay:{display:"none"},notFound:{textAlign:"center",fontSize:18,fontWeight:300,color:"rgba(152, 150, 150, 0.87)"}})))(T),Object(b.connect)(O,k)(N)))},531:function(e,t,s){"use strict";var a=s(616),o=s(501),n=s(0),i=s.n(n);class r extends n.Component{render(){const e=this.props.theme;return i.a.createElement("div",{key:"load-more-progress",className:"g-load-more"},i.a.createElement(o.a,{size:30,thickness:5,style:{color:e.palette.primary.light}}))}}t.a=Object(a.a)(r)},536:function(e,t,s){"use strict";var a=s(0),o=s.n(a),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)};var i=function(){return(i=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var r="Pixel",l="Percent",c={unit:l,value:.8};var h=function(e){function t(t){var s=e.call(this,t)||this;return s.lastScrollTop=0,s.actionTriggered=!1,s.startY=0,s.currentY=0,s.dragging=!1,s.maxPullDownDistance=0,s.getScrollableTarget=function(){return s.props.scrollableTarget instanceof HTMLElement?s.props.scrollableTarget:"string"===typeof s.props.scrollableTarget?document.getElementById(s.props.scrollableTarget):(null===s.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},s.onStart=function(e){s.lastScrollTop||(s.dragging=!0,e instanceof MouseEvent?s.startY=e.pageY:e instanceof TouchEvent&&(s.startY=e.touches[0].pageY),s.currentY=s.startY,s._infScroll&&(s._infScroll.style.willChange="transform",s._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},s.onMove=function(e){s.dragging&&(e instanceof MouseEvent?s.currentY=e.pageY:e instanceof TouchEvent&&(s.currentY=e.touches[0].pageY),s.currentY<s.startY||(s.currentY-s.startY>=Number(s.props.pullDownToRefreshThreshold)&&s.setState({pullToRefreshThresholdBreached:!0}),s.currentY-s.startY>1.5*s.maxPullDownDistance||s._infScroll&&(s._infScroll.style.overflow="visible",s._infScroll.style.transform="translate3d(0px, "+(s.currentY-s.startY)+"px, 0px)")))},s.onEnd=function(){s.startY=0,s.currentY=0,s.dragging=!1,s.state.pullToRefreshThresholdBreached&&s.props.refreshFunction&&s.props.refreshFunction(),requestAnimationFrame((function(){s._infScroll&&(s._infScroll.style.overflow="auto",s._infScroll.style.transform="none",s._infScroll.style.willChange="none")}))},s.onScrollListener=function(e){"function"===typeof s.props.onScroll&&setTimeout((function(){return s.props.onScroll&&s.props.onScroll(e)}),0);var t=s.props.height||s._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;s.actionTriggered||(s.isElementAtBottom(t,s.props.scrollThreshold)&&s.props.hasMore&&(s.actionTriggered=!0,s.setState({showLoader:!0}),s.props.next&&s.props.next()),s.lastScrollTop=t.scrollTop)},s.state={showLoader:!1,pullToRefreshThresholdBreached:!1},s.throttledOnScrollListener=function(e,t,s,a){var o,n=!1,i=0;function r(){o&&clearTimeout(o)}function l(){var l=this,c=Date.now()-i,h=arguments;function d(){i=Date.now(),s.apply(l,h)}function p(){o=void 0}n||(a&&!o&&d(),r(),void 0===a&&c>e?d():!0!==t&&(o=setTimeout(a?p:d,void 0===a?e-c:e)))}return"boolean"!==typeof t&&(a=s,s=t,t=void 0),l.cancel=function(){r(),n=!0},l}(150,s.onScrollListener).bind(s),s.onStart=s.onStart.bind(s),s.onMove=s.onMove.bind(s),s.onEnd=s.onEnd.bind(s),s}return function(e,t){function s(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,e),t.prototype.componentDidMount=function(){var e=this;if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",(function(t){return e.throttledOnScrollListener(t)})),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){var e=this;this.el&&(this.el.removeEventListener("scroll",(function(t){return e.throttledOnScrollListener(t)})),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.key===e.key&&this.props.dataLength===e.dataLength||(this.actionTriggered=!1,this.setState({showLoader:!1,pullToRefreshThresholdBreached:!1}))},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var s=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,a=function(e){return"number"===typeof e?{unit:l,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:r,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:l,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),c):(console.warn("scrollThreshold should be string or number"),c)}(t);return a.unit===r?e.scrollTop+s>=e.scrollHeight-a.value:e.scrollTop+s>=a.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=i({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),s=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),a=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return o.a.createElement("div",{style:a,className:"infinite-scroll-component__outerdiv"},o.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&o.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},o.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!s&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(a.Component);t.a=h},553:function(e,t,s){"use strict";var a=s(8),o=s(828),n=s(1153),i=s(1160),r=s(1154),l=s(175),c=s(1138),h=s(1141),d=s(1140),p=s(1139),m=s(687),u=s(786),g=s(504),b=s(283),f=s(1136),v=s(15),y=s(502),E=s(514),C=s(176),x=s(534),w=s.n(x),S=s(527),P=s.n(S),k=s(557),O=s.n(k),I=s(575),T=s.n(I),N=s(656),L=s.n(N),R=s(657),D=s.n(R),W=s(658),M=s.n(W),A=s(535),j=s(47),z=s(43),U=s(150),B=s.n(U),V=s(0),F=s.n(V),q=s(59),G=s(25),Y=s(97);class H extends V.Component{constructor(e){super(e),this.handleAddLink=()=>{const e=this.props,t=e.onAddLink,s=e.onClose,a=this.state.link;if(a&&""!==a.trim()){t(a,z.a.validateYoutubeUrl(a)?z.a.getYoutubetThumbnails(a):G.a.settings.defaultVideoThumbnails)}s()},this.handleInputChange=e=>{const t=e.target,s="checkbox"===t.type?t.checked:t.value,a=t.name;"link"===a&&this.validateInputLink(s),this.setState({[a]:s})},this.validateInputLink=e=>{const t=this.props.t;t&&(e&&""!==e.trim()?z.a.validateUrl(e.trim())?this.setState({linkInputError:"",disabledOk:!1}):this.setState({linkInputError:t("post.videoInputLinkInvalidError"),disabledOk:!0}):this.setState({linkInputError:t("post.videoInputLinkRequiredError"),disabledOk:!0}))},this.state={link:"",linkInputError:"",disabledOk:!0}}render(){const e=this.props,t=e.classes,s=e.t,a=e.open,n=e.onClose,i=this.state,r=i.disabledOk,m=i.linkInputError;return s?F.a.createElement(c.a,{PaperProps:{className:t.fullPageXs},open:a,onClose:n,maxWidth:"md"},F.a.createElement(p.a,null,s("post.addVideoTitle")),F.a.createElement(d.a,null,F.a.createElement(y.a,{autoFocus:!0,margin:"dense",type:"link",name:"link",onChange:this.handleInputChange,helperText:m,error:""!==m,fullWidth:!0})),F.a.createElement(h.a,null,F.a.createElement(o.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:n,style:{color:l.a[800]}},s("post.cancelButton")),F.a.createElement(o.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.handleAddLink,disabled:r},s("post.addVideoButton")))):F.a.createElement("div",null)}}const _=Object(Y.c)("translations")(H);var X=Object(q.connect)((()=>({})),(()=>({})))(Object(v.a)((e=>({fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},dialogTitle:{padding:0}})))(_)),J=s(593),Q=s(524),$=s(1144),Z=s(1142),K=s(1143),ee=s(512),te=s(540),se=s.n(te),ae=s(32),oe=s(124),ne=s(1177),ie=s(5),re=s(44),le=s(17),ce=s(18),he=s(519),de=s(528),pe=s.n(de);var me=s(138);class ue extends V.Component{static getDerivedStateFromProps(e,t){return ne.a(e.photos,t.prevPhotos)?null:{selectedPhotos:[...e.photos],prevPhotos:e.photos}}constructor(e){super(e),this.saveAlbum=()=>{const e=this.props,t=e.progress,s=e.currentUser,a=this.state,o=a.accessUserList,n=a.permission,i=[...this.state.selectedPhotos],r=[];i.slice(0,4).map((e=>{const a=t.getIn([e.fileName,"meta"],{url:""}),i=e.fileName.split(".")[0],l=new oe.a(i,0,0,a.url||URL.createObjectURL(e.src),a.url||URL.createObjectURL(e.src),e.fileName,"","",e.fileName,Object(me.b)(s,"currentUser").userId,0,"",0,0,"",!1,o,n);return r.push(l),{url:a.url,fileName:e.fileName,fileId:i}}))},this.deleteSelectedPhoto=e=>{const t=this.props.onDelete;let s=[...this.state.selectedPhotos];s=s.filter((t=>t.fileName!==e)),this.setState({selectedPhotos:s}),t(e)},this.imageList=()=>{const e=this.props,t=e.classes,s=e.progress;return this.state.selectedPhotos.map((e=>{const a=s.getIn([e.fileName,"percent"],0),o=s.getIn([e.fileName,"visible"],!1);return F.a.createElement(Z.a,{key:"album-dialog-tile-".concat(e.fileName)},F.a.createElement("img",{src:e.src,alt:"something"}),F.a.createElement(K.a,{title:o?F.a.createElement(ee.a,{variant:"determinate",value:a,color:"secondary"}):"",actionIcon:o?"":F.a.createElement(g.a,{className:t.icon,onClick:()=>this.deleteSelectedPhoto(e.fileName)},F.a.createElement(se.a,null))}))}))},this.gridTile=()=>{const e=this.props.classes;return F.a.createElement($.a,{cellHeight:100,className:e.gridList,cols:3},this.imageList())},this.state={selectedPhotos:[],prevPhotos:[]},this.imageList=this.imageList.bind(this),this.deleteSelectedPhoto=this.deleteSelectedPhoto.bind(this),this.saveAlbum=this.saveAlbum.bind(this)}render(){const e=this.props.classes;return F.a.createElement("div",{className:e.root},this.gridTile())}}const ge=Object(Y.c)("translations")(ue),be=Object(v.a)((e=>({fullPageXs:{},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginTop:30},gridList:{flexWrap:"nowrap",width:"100%",transform:"translateZ(0)"},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),marginBottom:20,backgroundColor:e.palette.background.default},paper:{minHeight:"500px",[e.breakpoints.down("xs")]:{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",borderRadius:0,margin:0}},information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:pe.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"}})),{withTheme:!0})(ge);var fe=Object(q.connect)((()=>{const e=ce.a.selectCurrentUser(),t=he.a.selectRequest();return s=>{const a=e(s).toJS(),o=z.a.createServerRequestId(ae.a.GalleryCreateAlbum,a.userId||"0"),n=t(s,{requestId:o});return{currentUser:a,createAlbumRequestStatus:n?n.status:le.a.NoAction}}}),(e=>({deleteImage:(t,s)=>e(re.j(t,G.a.data.imageFolderPath,s)),progressChange:(t,s)=>e(ie.o(t,s))})))(be),ve=s(204),ye=s(578),Ee=s(1159),Ce=s(655),xe=s.n(Ce),we=s(4),Se=s(46),Pe=s(114),ke=s.n(Pe);class Oe extends V.Component{constructor(e){super(e),this.styles={root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},uploadButton:{verticalAlign:"middle",fontWeight:400},uploadInput:{cursor:"pointer",position:"absolute",top:0,bottom:0,right:0,left:0,width:"100%",opacity:0},deleteVideo:{marginLeft:"5px",cursor:"pointer",color:"white"},addImage:{marginRight:"5px",cursor:"pointer",color:"white"}},this.fileInputRef=void 0,this.videoRef=void 0,this.blobFile=void 0,this.file=void 0,this.handleSetVideo=(e,t,s)=>{this.props.set(t,s),this.close()},this.togglePreview=()=>{this.setState((e=>(e.isPreview&&this.fileInputRef.current&&(this.fileInputRef.current.value=""),{isPreview:!e.isPreview})))},this.handleDeleteVideo=(e,t)=>{const s=this.props.deleteVideo;s&&s(t)},this.onFileChange=e=>{const t=this.props,s=t.showError,a=t.t,o=A.a.getExtension(e.target.files[0].name);let n=!1;A.a.checkMaxFileSize(e.target.files[0].size,G.a.settings.maxVideoFileSize)&&s&&(n=!0,s(a("videGallery.maxExceedMessage")));const i="".concat(ke()(),".").concat(o);this.setState({isPreview:!0,fileName:i,isSaveDisabled:n}),this.file=e.currentTarget.files[0];const r=this.file.type,l=Object(me.b)(this.videoRef.current,"this.videoRef.current");let c=l.canPlayType(r);""===c&&(c="no");const h=URL.createObjectURL(this.file);l.src=h},this.close=()=>{const e=this.props.close;e&&e()},this.videoList=()=>{const e=this.props.videos;return Object(me.b)(e,"videos").map((e=>F.a.createElement(Z.a,{key:Object(me.b)(e.id,"video.id")},F.a.createElement("div",null,F.a.createElement("div",{style:{overflowY:"hidden",overflowX:"auto"}},F.a.createElement("ul",{style:{whiteSpace:"nowrap",padding:"0 6px",margin:"8px 0 0 0",verticalAlign:"bottom",flexShrink:0,listStyleType:"none"}},F.a.createElement("div",{style:{display:"block"}},F.a.createElement("div",{style:{display:"block",marginRight:"8px",transition:"transform .25s"}},F.a.createElement("li",{style:{width:"100%",margin:0,verticalAlign:"bottom",position:"static",display:"inline-block"}},F.a.createElement(Q.a,{fileName:e.thumbnail,style:{width:"100%",height:"auto"}}))))))),F.a.createElement(K.a,{title:F.a.createElement(se.a,{style:this.styles.deleteVideo,onClick:t=>this.handleDeleteVideo(t,e.id||"0")}),titlePosition:"top",actionIcon:F.a.createElement(xe.a,{style:this.styles.addImage,onClick:t=>this.handleSetVideo(t,e.URL,e.thumbnail||"")}),actionPosition:"left"}))))},this.handleUploadVideo=()=>{const e=this.props.uploadVideo,t=this.state.fileName;if(!this.videoRef.current||!e)return;A.a.captureVideo(this.videoRef.current,null).toBlob((s=>{s&&(e(this.file,t,s),this.togglePreview())}),"image/jpeg",.95)},this.state={fileName:"",isPreview:!1,isSaveDisabled:!1},this.fileInputRef=F.a.createRef(),this.videoRef=F.a.createRef(),this.close=this.close.bind(this),this.onFileChange=this.onFileChange.bind(this),this.handleSetVideo=this.handleSetVideo.bind(this),this.handleDeleteVideo=this.handleDeleteVideo.bind(this),this.videoList=this.videoList.bind(this),this.handleUploadVideo=this.handleUploadVideo.bind(this)}componentDidMount(){const e=this.props.getVideoGallery;e&&e()}render(){const e=this.props,t=e.t,s=e.videos,a=e.classes,n=this.state,i=n.isPreview,r=n.isSaveDisabled,l=F.a.createElement($.a,{cellHeight:180,className:B()(a.gridList,{[a.noDisplay]:i})},F.a.createElement(Z.a,{key:"upload-image-gallery"},F.a.createElement("div",{style:{display:"flex",backgroundColor:"rgba(222, 222, 222, 0.52)",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},F.a.createElement("input",{accept:"video/mp4,video/x-m4v,video/*",style:this.styles.uploadInput,id:"raised-button-file",onChange:this.onFileChange,ref:this.fileInputRef,type:"file"}),F.a.createElement("label",{htmlFor:"raised-button-file"},F.a.createElement(o.a,{variant:"contained",component:"span",style:this.styles.uploadButton},t("imageGallery.uploadButton"))))),s&&s.count()>0?this.videoList():""),c=F.a.createElement("div",{className:B()(a.videoRoot,{[a.noDisplay]:!i})},F.a.createElement("video",{className:B()(a.video),controls:!0,autoPlay:!1,ref:this.videoRef}));return F.a.createElement("div",{style:this.styles.root},F.a.createElement(Ee.a,{in:!i},l),F.a.createElement(Ee.a,{in:i},c),F.a.createElement("div",{className:B()(a.previewActions,{[a.noDisplay]:!i})},F.a.createElement(o.a,{disabled:r,color:"primary",onClick:this.handleUploadVideo}," ",t("videGallery.saveButton")," "),F.a.createElement(o.a,{onClick:this.togglePreview}," ",t("videGallery.backButton")," ")))}}const Ie=Object(Y.c)("translations")(Oe);var Te=Object(q.connect)((e=>{const t=e.getIn(["authorize","uid"]),s=Se.a.getUserProfileById(e,{userId:t}).toJS();return{videos:e.getIn(["imageGallery","videos"],Object(we.Map)({})),avatar:s?s.avatar:""}}),(e=>({uploadVideo:(t,s,a)=>e(re.u(t,s,a)),deleteVideo:t=>e(re.k(t)),getVideoGallery:()=>e(re.p()),showError:t=>e(ie.s(t))})))(Object(v.a)((e=>({fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},gridList:{width:500,height:450,overflowY:"auto"},noDisplay:{display:"none !important"},video:{width:"100%",height:"100%",position:"absolute",top:0,left:0},videoRoot:{position:"relative",padding:"39.25%",width:"100%",height:"100%"},previewActions:{justifyContent:"space-between",display:"flex",marginTop:10,width:"100%",height:"100%"}})))(Ie)),Ne=s(75),Le=s(574),Re=s(206),De=s(37),We=s(179),Me=s(121);const Ae=e=>({openAlbum:()=>e(ie.n(We.a.Album)),closeAlbum:()=>e(ie.c(We.a.Album)),post:(t,s)=>e(De.g(t,s)),update:(t,s)=>e(De.m(t,s)),uploadImage:(t,s)=>e(re.t(t,s))}),je=()=>{const e=ce.a.selectCurrentUser(),t=Me.a.selectDialogState(),s=Me.a.selectProgress();return a=>{const o=e(a).toJS(),n=t(a,{type:We.a.Album}),i=s(a);return{postImageState:a.getIn(["imageGallery","status"]),ownerAvatar:o.avatar||"",ownerDisplayName:o.fullName||"",albumDialogOpen:n,progress:i}}};var ze=s(507);class Ue extends V.Component{constructor(e){super(e),this.selectedPhotos=[],this.handleToggleComments=()=>{this.setState((e=>({disableSharing:!e.disableComments,disabledPost:!this.isPostChangeValid(e)})))},this.handleToggleSharing=()=>{this.setState((e=>({disableSharing:!e.disableSharing,disabledPost:!this.isPostChangeValid(e)})))},this.handleTogglePermission=()=>{this.setState((e=>({permissionOpen:!e.permissionOpen,disabledPost:!this.isPostChangeValid(e)})))},this.handleRemoveImage=()=>{this.setState((e=>({image:"",video:"",imageFullPath:"",postType:Re.a.Text,disabledPost:!this.isPostChangeValid(e)})))},this.closeAlbumDialog=()=>{const e=this.props.closeAlbum;e&&e()},this.openAlbumDialog=()=>{const e=this.props.openAlbum;e&&e()},this.handlePost=()=>{this.setState({disabledPost:!1});const e=this.state,t=e.image,s=e.imageFullPath,o=e.disableComments,n=e.disableSharing,i=e.postText,r=e.video,l=e.thumbnail,c=e.postType,h=e.accessUserList,d=e.permission,p=e.galleryOpen,m=e.selectedPhotos,u=this.props,g=u.ownerAvatar,b=u.ownerDisplayName,f=u.edit,v=u.onRequestClose,y=u.post,E=u.update,C=u.postModel,x=u.progress;if(!this.isPostChangeValid(this.state))return void this.setState({disabledPost:!0});const w=j.b(i),S=new Le.a;p&&x&&m.forEach((e=>{const t=x.getIn([e.fileName,"meta"]);let s="";s=t?t.url:e.src,S.photos.push(s)}));const P={body:i,tags:w,image:t,video:r,thumbnail:l,imageFullPath:s,ownerAvatar:g,ownerDisplayName:b,disableComments:o,disableSharing:n,postTypeId:c,score:0,album:Object(a.a)({},S),viewCount:0,accessUserList:h,permission:d};if(f){if(C&&E){E(C.set("body",i).set("tags",Object(we.List)(w)).set("image",t).set("imageFullPath",s).set("video",r).set("album",Object(we.fromJS)(Object(a.a)({},S))).set("thumbnail",l).set("disableComments",o).set("disableSharing",n).set("postTypeId",c).set("accessUserList",Object(we.List)(h)).set("permission",d),v)}}else y&&y(P,v)},this.onRequestSetImage=e=>{this.setState({image:e,video:"",postType:Re.a.Photo,disabledPost:!1})},this.onSetVideo=(e,t)=>{this.setState({image:"",thumbnail:t,video:e,postType:Re.a.Video,disabledPost:!1})},this.handleOnChange=e=>{const t=e.target.value;this.setState({postText:t}),0===t.length||""===t.trim()||this.props.edit&&t.trim()===this.props.text?this.setState({postText:t,disabledPost:!0}):this.setState({postText:t,disabledPost:!1})},this.handleCloseGallery=()=>{this.setState({galleryOpen:!1})},this.handleOpenGallery=()=>{this.setState({galleryOpen:!0})},this.handleOpenVideoLink=()=>{this.setState({videoLinkOpen:!0})},this.handleCloseVideoLink=()=>{this.setState({videoLinkOpen:!1})},this.handleOpenVideoGallery=()=>{this.setState({videoGalleryOpen:!0})},this.handleCloseVideoGallery=()=>{this.setState({videoGalleryOpen:!1})},this.handleOpenMenu=e=>{this.setState({menuOpen:!0,menuAnchorEl:e.currentTarget})},this.handleCloseMenu=()=>{this.setState({menuOpen:!1,menuAnchorEl:null})},this.handleAccessList=(e,t)=>{this.setState({accessUserList:e,permission:t,permissionOpen:!1})},this.handleDeletePhoto=e=>{const t=this.state,s=t.selectedPhotos,a=t.postText,o=[];s.forEach((t=>{e!==t.fileName&&o.push(t)}));let n=!0;const i=0===a.length||""===a.trim()||this.props.edit&&a.trim()===this.props.text;(o&&o.length>0||!i)&&(n=!1),this.setState({selectedPhotos:[...o],disabledPost:n})},this.onUploadAlbumChange=e=>{const t=this.props.uploadImage,s=this.state,a=s.galleryOpen,o=s.selectedPhotos;if(t){const s=e.currentTarget.files,n=[];for(let e=0;e<s.length;e++){const a=s[e],o=A.a.getExtension(a.name),i="".concat(ke()(),".").concat(o);n.push({src:URL.createObjectURL(a),fileName:i}),t(a,i)}const i=[...o,...n];s.length>3&&!a?(this.selectedPhotos=i.map((e=>({file:e.src,fileName:e.fileName}))),this.openAlbumDialog()):this.setState({selectedPhotos:[...i],galleryOpen:!0,disabledPost:!1,postType:Re.a.PhotoGallery}),e.currentTarget.value=null}},this.isPostChangeValid=e=>{const t=e.image,s=e.video,a=e.postText,o=e.selectedPhotos;return!z.a.isEmpty(t)||!z.a.isEmpty(s)||!z.a.isEmpty(a)||o&&o.length>0},this.getPermissionLabel=()=>{const e=this.props.t,t=this.state.permission;let s="";return t===Ne.a.Public?s=e("permission.public"):t===Ne.a.Circles?s=e("permission.circles"):t===Ne.a.OnlyMe&&(s=e("permission.onlyMe")),s};const t=e.postModel,s=t&&t.getIn(["album","photos"],Object(we.List)([])),o=e.edit&&t&&t.get("postTypeId",0)===Re.a.PhotoGallery?s.map((e=>Object(we.Map)({src:e,fileName:e,loaded:!0}))).toJS():[],n=!!(this.props.edit&&o&&o.length>0);this.state={postText:this.props.edit&&t?t.get("body",""):"",image:this.props.edit&&t?t.get("image",""):"",imageFullPath:this.props.edit&&t?t.get("imageFullPath",""):"",galleryOpen:n,menuOpen:!1,disabledPost:!0,disableComments:!(!this.props.edit||!t)&&t.get("disableComments",!1),disableSharing:!(!this.props.edit||!t)&&t.get("disableSharing",!1),videoLinkOpen:!1,videoGalleryOpen:!1,permissionOpen:!1,video:this.props.edit&&t?t.get("video",""):"",thumbnail:this.props.edit&&t?t.get("thumbnail",""):"",postType:this.props.edit&&t?t.get("postTypeId",Re.a.Text):Re.a.Text,accessUserList:this.props.edit&&t?t.get("accessUserList",[]):[],permission:this.props.edit&&t?t.get("permission",Ne.a.Public):Ne.a.Public,selectedPhotos:o,album:this.props.edit&&t?t.get("album",Object(we.Map)({photos:Object(we.List)([])})):Object(we.Map)({photos:Object(we.List)([])})},this.handleOnChange=this.handleOnChange.bind(this),this.handleCloseGallery=this.handleCloseGallery.bind(this),this.handleOpenGallery=this.handleOpenGallery.bind(this),this.onRequestSetImage=this.onRequestSetImage.bind(this),this.handlePost=this.handlePost.bind(this),this.handleRemoveImage=this.handleRemoveImage.bind(this),this.handleToggleComments=this.handleToggleComments.bind(this),this.handleToggleSharing=this.handleToggleSharing.bind(this),this.handleTogglePermission=this.handleTogglePermission.bind(this),this.isPostChangeValid=this.isPostChangeValid.bind(this),this.getPermissionLabel=this.getPermissionLabel.bind(this),this.onUploadAlbumChange=this.onUploadAlbumChange.bind(this),this.handleDeletePhoto=this.handleDeletePhoto.bind(this)}render(){const e=this.props,t=e.classes,s=e.t,a=e.progress,v=e.albumDialogOpen,x=this.state,S=x.menuOpen,k=x.videoLinkOpen,I=x.image,N=x.postType,R=x.galleryOpen,W=x.selectedPhotos,A=x.thumbnail,j=x.permissionOpen,z=x.permission,U=x.menuAnchorEl,V=void 0!==v&&v,q=F.a.createElement("div",null,F.a.createElement(E.a,{id:"tooltip-icon",title:s("post.moreTooltip"),placement:"bottom-start"},F.a.createElement(g.a,{onClick:this.handleOpenMenu},F.a.createElement(P.a,null))),F.a.createElement(b.a,{open:S,anchorEl:U,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleCloseMenu},F.a.createElement(f.a,{onClick:this.handleToggleComments,style:{fontSize:"14px"}},this.state.disableComments?s("post.enableComments"):s("post.disableComments")," "),F.a.createElement(f.a,{onClick:this.handleToggleSharing,style:{fontSize:"14px"}},(this.state.disableSharing,s("post.disableSharing"))))),G=F.a.createElement(ve.a,{fullName:this.props.ownerDisplayName||"",fileName:this.props.ownerAvatar||"",size:36}),Y=F.a.createElement("div",{className:t.author},F.a.createElement("span",{style:{fontSize:"14px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"25px"}},"".concat(this.props.ownerDisplayName," |")),F.a.createElement("span",{onClick:this.handleTogglePermission,className:B()(t.permission,t.disableComponent)},"".concat(this.getPermissionLabel()))),H=I&&""!==I&&N===Re.a.Photo||A&&""!==A&&N===Re.a.Video?F.a.createElement("div",null,F.a.createElement("div",{style:{position:"relative",overflowY:"hidden",overflowX:"auto"}},F.a.createElement("ul",{style:{position:"relative",whiteSpace:"nowrap",padding:"0 0 0 16px",margin:"8px 0 0 0",paddingRight:"16px",verticalAlign:"bottom",flexShrink:0,listStyleType:"none"}},F.a.createElement("div",{style:{display:"flex",position:"relative"}},F.a.createElement("span",{onClick:this.handleRemoveImage,style:{position:"absolute",width:"28px",backgroundColor:"rgba(6, 6, 6, 0.82)",height:"28px",right:12,top:4,cursor:"pointer",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"}},F.a.createElement(L.a,{style:{color:"rgba(239, 235, 235, 0.83)"}})),F.a.createElement("span",{className:B()(t.playVideo,{[t.noDisplay]:N!==Re.a.Video}),style:{}},F.a.createElement(T.a,{className:t.playIcon})),F.a.createElement("div",{style:{display:"inline-block",width:"100%",marginRight:"8px",transition:"transform .25s"}},F.a.createElement("li",{style:{width:"100%",margin:0,verticalAlign:"bottom",position:"static"}},F.a.createElement(Q.a,{fileName:N===Re.a.Photo?I:A,style:{width:"100%",height:"auto"}}))))))):"";return F.a.createElement("div",{style:this.props.style},this.props.children,F.a.createElement(c.a,{BackdropProps:{className:t.backdrop},PaperProps:{className:t.fullPageXs},key:this.props.id||0,open:this.props.open,onClose:this.props.onRequestClose},F.a.createElement(p.a,{className:t.dialogTitle},F.a.createElement(r.a,{title:Y,avatar:G,action:q})),F.a.createElement(d.a,{className:t.content,style:{paddingTop:0}},F.a.createElement(n.a,{elevation:0},F.a.createElement(i.a,null,F.a.createElement(u.a,{item:!0,xs:12},F.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},F.a.createElement("div",{style:{position:"relative",flexDirection:"column",display:"flex",flexGrow:1,overflowY:"auto",maxHeight:"300px"}},F.a.createElement(y.a,{autoFocus:!0,value:this.state.postText,onChange:this.handleOnChange,placeholder:s("post.textareaPlaceholder"),multiline:!0,rows:2,rowsMax:4,style:{fontWeight:400,fontSize:"14px",margin:"0 16px",flexShrink:0,width:"initial",flexGrow:1}}),H,R&&F.a.createElement(fe,{photos:W,progress:a,onDelete:this.handleDeletePhoto}))))))),F.a.createElement(h.a,{className:t.iconButtonsRoot},F.a.createElement("div",{style:{flexShrink:0,boxFlex:0,flexGrow:0,maxHeight:"48px",width:"100%"}},F.a.createElement("div",{style:{flexDirection:"row",display:"flex"}},F.a.createElement("input",{accept:"image/*",className:t.input,id:"album-button-file",multiple:!0,onChange:this.onUploadAlbumChange,type:"file"}),F.a.createElement("div",{style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},F.a.createElement("span",{style:{top:"15px",display:"block",position:"relative",cursor:"pointer"}},F.a.createElement("label",{htmlFor:"album-button-file"},F.a.createElement(O.a,{style:{color:"grey"}})))),F.a.createElement("div",{onClick:this.handleOpenVideoLink,style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},F.a.createElement("span",{style:{top:"12px",display:"block",position:"relative",cursor:"pointer"}},F.a.createElement(D.a,{style:{color:"grey",width:30,height:30}}))),F.a.createElement("div",{className:t.disableComponent,onClick:this.handleOpenVideoGallery,style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},F.a.createElement("span",{style:{top:"14px",display:"block",position:"relative",cursor:"pointer"}},F.a.createElement(M.a,{style:{color:"grey",width:24,height:24}})))))),F.a.createElement(h.a,null,F.a.createElement(o.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.props.onRequestClose,style:{color:l.a[800]}},s("post.cancelButton")),F.a.createElement(o.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.handlePost,disabled:this.state.disabledPost},this.props.edit?s("post.updateButton"):s("post.postButton")))),V&&a?F.a.createElement(J.a,{open:V,progress:a,photos:this.selectedPhotos,onClose:this.closeAlbumDialog}):"",F.a.createElement(c.a,{PaperProps:{className:B()(t.fullPageXs,t.videoGallery)},open:this.state.videoGalleryOpen,onClose:this.handleCloseVideoGallery},F.a.createElement(h.a,{className:t.galleryActions},F.a.createElement(C.a,{variant:"h6",component:"div",className:t.galleryDialogTitle},F.a.createElement(M.a,{style:{color:"rgb(230, 35, 35)",margin:"0 10px",width:24,height:24}}),s("post.videoGalleryLabel")),F.a.createElement(g.a,{onClick:this.handleCloseVideoGallery},F.a.createElement(w.a,null))),F.a.createElement(m.a,{className:t.devider}),F.a.createElement(d.a,null,F.a.createElement(Te,{set:this.onSetVideo,close:this.handleCloseVideoGallery}))),F.a.createElement(X,{open:k,onClose:this.handleCloseVideoLink,onAddLink:this.onSetVideo}),F.a.createElement(ye.a,{onClose:this.handleTogglePermission,open:j,onAddAccessList:this.handleAccessList,access:z}))}}const Be=Object(Y.c)("translations")(Ue);var Ve;t.a=(Ve=Object(v.a)((e=>Object(ze.a)({fullPageXs:{minWidth:500,maxWidth:500,maxHeight:540,[e.breakpoints.down("xs")]:{minWidth:"100%",maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",margin:0,overflowY:"auto"}},backdrop:{top:0,left:0,width:"100%",height:"100%",position:"fixed",willChange:"opacity",backgroundColor:"rgba(251, 249, 249, 0.5)",WebkitTapHighlightColor:"transparent"},input:{},content:{padding:0,paddingTop:0},dialogRoot:{paddingTop:0},popperOpen:{zIndex:10},popperClose:{pointerEvents:"none",zIndex:0},author:{paddingRight:70},dialogTitle:{padding:0},iconButtonsRoot:{justifyContent:"flex-start",margin:"0px 4px"},playVideo:{position:"absolute",right:"45%",top:"45%",cursor:"pointer",backgroundColor:"#f1efeca3",borderRadius:"50%",height:60,padding:0},playIcon:{width:60,height:60,fill:"red"},noDisplay:{display:"none"},playIconButtonRoot:{width:60,height:60},galleryActions:{margin:0,background:"#fff",WebkitBoxSizing:"border-box",boxSizing:"border-box",height:56,textAlign:"center",padding:4,minWidth:0,display:"flex",flexDirection:"row",justifyContent:"space-between"},galleryDialogTitle:{color:"#676767"},galleryDialogIcon:{},galleryAction:{margin:0,padding:0,minWidth:0},devider:{marginBottom:10},videoGallery:{},permission:{fontWeight:400,fontSize:"14px",cursor:"pointer",color:"blue"},disableComponent:{opacity:"0.2","pointer-events":"none"}})))(Be),Object(q.connect)(je,Ae)(Ve))},577:function(e,t,s){"use strict";var a=s(1153),o=s(854),n=s(1160),i=s(1154),r=s(1169),l=s(763),c=s(504),h=s(512),d=s(283),p=s(1136),m=s(15),u=s(676),g=s.n(u),b=s(614),f=s.n(b),v=s(675),y=s.n(v),E=s(527),C=s.n(E),x=s(575),w=s.n(x),S=s(615),P=s.n(S),k=s(150),O=s.n(k),I=s(0),T=s.n(I),N=s(4),L=s(1177),R=s(828),D=s(1155),W=s(687),M=s(310),A=s(502),j=s(471),z=s(47),U=s(470),B=s(468),V=s(467),F=s(204),q=s(51),G=s.n(q),Y=s(178),H=s(59),_=s(97),X=s(573),J=s.n(X),Q=s(92),$=s(35),Z=s(46);const K=()=>({textField:{fontWeight:400,fontSize:"14px ",width:"100%",margin:0,WebkitBoxShadow:"none",boxShadow:"none",borderColor:"transparent",height:38,border:"1px solid #000",resize:"none"},header:{padding:"2px 3px 3px 10px"},popperOpen:{zIndex:11},popperClose:{pointerEvents:"none",zIndex:0},iconButton:{top:0,display:"flex",right:4,flexDirection:"row-reverse",position:"absolute"},commentBody:{color:"black",fontWeight:400,fontSize:"12px",height:"100%",border:"none",width:"100%",outline:"none",resize:"none"},rightIconMenuItem:{fontSize:12,fontWeight:300,paddingLeft:6,paddingRight:6,paddingTop:0,paddingBottom:0},moreIcon:{width:"0.6em",height:"0.6em"},menuRoot:{marginTop:7,marginRight:7}});var ee=s(18);const te=(e,t)=>({delete:(t,s)=>e(Q.f(t,s)),update:t=>{e(Q.h(t))},openEditor:()=>e(Q.k({id:t.comment.get("id","0"),postId:t.comment.get("postId")})),closeEditor:()=>e(Q.d(t.comment.get("postId"),t.comment.get("id","0"))),getUserInfo:()=>e($.k(t.comment.get("ownerUserId","0"),""))}),se=()=>{const e=ee.a.selectCurrentUser(),t=Z.a.selectUserProfileById();return(s,a)=>{const o=a.comment.get("ownerUserId","0"),n=e(s),i=n.get("userId","0");return{uid:i,avatar:a.comment.get("ownerAvatar","0"),fullName:n.get("ownerDisplayName","loading..."),isCommentOwner:i===o,commentOwner:t(s,{userId:o})}}};var ae=s(138);class oe extends I.Component{constructor(e){super(e),this.buttonMenu=null,this.styles={author:{fontSize:"10px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"},textarea:{fontWeight:400,fontSize:"14px",border:"none",width:"100%",outline:"none",resize:"none"},cancel:{float:"right",clear:"both",zIndex:5,margin:"0px 5px 5px 0px",fontWeight:400}},this.textareaRef=void 0,this.divCommentRef=void 0,this.inputText=void 0,this.divComment=void 0,this.handleEditComment=()=>{this.setState({openMenu:!1});const e=this.props.openEditor;e&&e()},this.handleCancelEdit=()=>{const e=this.props.closeEditor,t=this.state.initialText;t&&this.setState({text:t}),e&&e()},this.handleUpdateComment=()=>{const e=this.props.comment.set("text",this.state.text),t=this.props.update;t&&t(e),this.setState({initialText:this.state.text})},this.handleOnChange=e=>{const t=e.target.value;0===t.length||""===t.trim()||t.trim()===this.state.initialText?this.setState({text:t,editDisabled:!0}):this.setState({text:t,editDisabled:!1})},this.handleDelete=(e,t,s)=>{this.props.delete&&this.props.delete(t,s)},this.handleCommentMenu=e=>{this.setState({openMenu:!0,anchorEl:e.currentTarget})},this.handleCloseCommentMenu=()=>{this.setState({openMenu:!1})},this.textareaRef=e=>{this.inputText=e},this.divCommentRef=e=>{this.divComment=e},this.state={text:this.props.comment.get("text",""),initialText:this.props.comment.get("text",""),editDisabled:!0,isPostOwner:!1,openMenu:!1,anchorEl:null},this.handleDelete=this.handleDelete.bind(this),this.handleUpdateComment=this.handleUpdateComment.bind(this),this.handleOnChange=this.handleOnChange.bind(this),this.handleCancelEdit=this.handleCancelEdit.bind(this),this.handleEditComment=this.handleEditComment.bind(this)}componentDidMount(){const e=this.props,t=e.commentOwner,s=e.isCommentOwner,a=e.getUserInfo;s||t||!a||a()}render(){const e=this.props,t=e.comment,s=e.classes,o=e.t,n=e.editorStatus,r=this.state,l=r.openMenu,h=r.anchorEl;if(!o||!t)return T.a.createElement("div",null);const d=T.a.createElement("div",{className:s.menuRoot},this.props.isCommentOwner&&T.a.createElement(c.a,{buttonRef:e=>{this.buttonMenu=e},"aria-owns":Object(ae.a)(l,!1)?"comment-menu":"","aria-haspopup":"false",onClick:this.handleCommentMenu},T.a.createElement(C.a,{className:s.moreIcon})),T.a.createElement(B.a,{open:Object(ae.a)(l,!1),anchorEl:h,anchorReference:"anchorEl",anchorPosition:{top:0,left:0},onClose:this.handleCloseCommentMenu,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},T.a.createElement(U.a,{role:"menu"},this.props.isCommentOwner?T.a.createElement(p.a,{className:s.rightIconMenuItem,onClick:this.handleEditComment},o("comment.editButton")):"",this.props.isCommentOwner||this.props.isPostOwner?T.a.createElement(p.a,{className:s.rightIconMenuItem,onClick:e=>this.handleDelete(e,t.get("id","0"),t.get("postId","0"))},o("comment.deleteButton")):""))),m=()=>T.a.createElement("div",null,T.a.createElement(Y.a,{to:"/".concat(u)}," ",T.a.createElement("span",{style:this.styles.author},t.get("ownerDisplayName","Loading..."))),T.a.createElement("span",{style:{fontWeight:400,fontSize:"8px"}},G()(t.get("creationDate",0)).local().fromNow())),u=t.get("ownerUserId"),g=T.a.createElement("div",{style:{outline:"none",flex:"auto",flexGrow:1}},n?T.a.createElement(V.a,{placeholder:o("comment.updateCommentPlaceholder"),autoFocus:!0,rowsMax:"4",value:this.state.text,onChange:this.handleOnChange,className:s.textField}):T.a.createElement("div",{className:O()("animate2-top10",s.commentBody)},this.state.text),T.a.createElement("div",{style:{display:n?"flex":"none",flexDirection:"row-reverse"}},T.a.createElement(R.a,{color:"primary",disabled:this.state.editDisabled,style:{float:"right",clear:"both",zIndex:5,margin:"0px 5px 5px 0px",fontWeight:400},onClick:this.handleUpdateComment}," ",o("comment.updateButton")," "),T.a.createElement(R.a,{color:"primary",style:this.styles.cancel,onClick:this.handleCancelEdit}," ",o("comment.cancelButton")," ")));return T.a.createElement("div",{className:"animate-top",key:t.get("id","0")},T.a.createElement(M.a,{elevation:0,className:"animate2-top10",style:{position:"relative",padding:"",display:this.state.display?"none":"block"}},T.a.createElement(a.a,{elevation:0},T.a.createElement(i.a,{className:s.header,title:n?"":T.a.createElement(m,null),subheader:g,avatar:T.a.createElement(Y.a,{to:"/".concat(u)},T.a.createElement(F.a,{fullName:t.get("ownerDisplayName",""),fileName:t.get("ownerAvatar",""),size:24})),action:!this.props.isCommentOwner&&!this.props.isPostOwner&&this.props.disableComments||n?"":d}))))}}var ne=(e=>{const t=Object(_.c)("translations")(e);return Object(H.connect)(se,te)(J()(K)(t))})(oe);class ie extends I.Component{constructor(e){super(e),this.commentList=()=>{const e=Object(N.Map)(this.props.comments),t=Object(N.Map)(this.props.commentsEditorStatus);if(!e.isEmpty()){const s=z.c(e.valueSeq()),a=[];return s.forEach((e=>{a.push(T.a.createElement(ne,{key:e.get("id"),comment:e,isPostOwner:this.props.isPostOwner,disableComments:this.props.disableComments,editorStatus:t.get(e.get("id","0"),!1)}))})),a}},this.state={}}render(){const e=this.props,t=e.classes,s=e.postId;return T.a.createElement(j.a,{key:"comment-list-".concat(s),className:t.list},this.commentList())}}var re=Object(H.connect)(((e,t)=>({commentsEditorStatus:e.getIn(["comment","editorStatus",t.postId],{})})),(()=>({})))(Object(m.a)((()=>({list:{width:"100%",maxHeight:290,overflowY:"auto",overflowX:"visible"}})))(ie)),le=s(17),ce=s(122);class he extends ce.a{constructor(...e){super(...e),this.id=void 0,this.postId=void 0,this.text=void 0,this.score=void 0,this.creationDate=void 0,this.ownerDisplayName=void 0,this.ownerAvatar=void 0,this.ownerUserId=void 0}}var de=s(519),pe=s(43),me=s(32);const ue=()=>({textField:{fontWeight:400,fontSize:"14px"},header:{padding:"2px 3px 3px 10px"},commentBody:{color:"black",fontWeight:400,fontSize:"12px",height:"100%",border:"none",width:"100%",outline:"none",resize:"none",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},author:{fontSize:"10px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"},noUnderline:{display:"none"},postButton:{flexDirection:"row-reverse"},cardHeaderContent:{flex:"1 1 auto",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),ge=e=>({send:t=>{e(Q.e(t))}}),be=()=>{const e=ee.a.selectCurrentUser(),t=de.a.selectRequest();return(s,a)=>{const o=a.postId,n=pe.a.createServerRequestId(me.a.CommentGetComments,o),i=e(s),r=t(s,{requestId:n});return{commentsRequestStatus:r?r.status:le.a.NoAction,uid:i.get("userId",""),avatar:i.get("avatar",""),fullName:i.get("fullName","")}}};class fe extends I.Component{constructor(e){super(e),this.styles={commentItem:{height:"60px",position:"",zIndex:""},toggleShowList:{height:"60px",zIndex:5},writeCommentTextField:{width:"100%",fontWeight:400,fontSize:"14px"},progressbar:{height:"1.5px",backgroundColor:"rgb(245, 243, 243)",color:D.a.A400},secondaryText:{fontSize:"13px",lineHeight:"20px",color:"rgba(0,0,0,0.87)",fontWeight:300,whiteSpace:"pre-wrap"},primaryText:{fontSize:"13px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"}},this.clearCommentWrite=()=>{this.setState({commentText:"",postDisable:!0})},this.handlePostComment=()=>{const e=this.props,t=e.postId,s=e.fullName,a=e.avatar,o=e.uid,n=e.send,i=new he;i.postId=t,i.text=this.state.commentText,i.ownerAvatar=a,i.ownerDisplayName=s,i.ownerUserId=o,n&&n(Object(N.Map)(i)),this.clearCommentWrite()},this.handleChange=e=>{const t=e.target.value;this.setState({commentText:t}),0===t.length||""===t.trim()?this.setState({commentText:"",postDisable:!0}):this.setState({commentText:t,postDisable:!1})},this.commentWriteBox=()=>{const e=this.props,t=e.classes,s=e.postId,n=e.fullName,r=e.avatar,l=e.t;return l?T.a.createElement("div",null,T.a.createElement(W.a,null),T.a.createElement(M.a,{key:s+"-commentwrite",elevation:0,className:"animate2-top10"},T.a.createElement(a.a,{elevation:0},T.a.createElement(i.a,{className:t.header,avatar:T.a.createElement(F.a,{fullName:n,fileName:r,size:24}),subheader:T.a.createElement(A.a,{autoFocus:!0,placeholder:l("comment.addCommentPlaceholder"),multiline:!0,rowsMax:"4",InputProps:{disableUnderline:!0,autoFocus:!0,fullWidth:!0},value:this.state.commentText,onChange:this.handleChange,className:t.textField,fullWidth:!0})}),T.a.createElement(o.a,{className:t.postButton},T.a.createElement(R.a,{color:"primary",disabled:this.state.postDisable,onClick:this.handlePostComment},l("comment.postButton")))))):T.a.createElement("div",null)},this.loadCommentsList=()=>{const e=this.props,t=e.postId,s=e.open,a=this.props.comments||Object(N.Map)({});return a&&a.size>0?T.a.createElement(M.a,{elevation:0,style:s?{display:"block",padding:"0px 0px"}:{display:"none",padding:"12px 16px"}},T.a.createElement(re,{comments:a,isPostOwner:this.props.isPostOwner,disableComments:this.props.disableComments,postId:t})):""},this.state={commentText:"",postDisable:!0},this.handlePostComment=this.handlePostComment.bind(this),this.clearCommentWrite=this.clearCommentWrite.bind(this),this.commentWriteBox=this.commentWriteBox.bind(this),this.loadCommentsList=this.loadCommentsList.bind(this)}shouldComponentUpdate(e,t){let s=!1;return L.a(this.state,t)?(e.open!==this.props.open||e.disableComments!==this.props.disableComments||e.commentsRequestStatus!==this.props.commentsRequestStatus||e.comments!==this.props.comments)&&(s=!0):s=!0,s}render(){const e=this.props,t=e.postId,s=e.open,a=e.comments,o=e.commentsRequestStatus,n=T.a.createElement(h.a,{style:this.styles.progressbar,variant:"indeterminate"});return T.a.createElement("div",{key:t+"-comments-group"},a&&a.size>0&&T.a.createElement(W.a,null),T.a.createElement("div",{style:s?{display:"block"}:{display:"none"}},T.a.createElement(M.a,{elevation:0,className:"animate-top",style:s?{display:"none"}:{display:"block"}},T.a.createElement("div",{style:{position:"relative",height:"60px"}},T.a.createElement(R.a,{style:this.styles.toggleShowList,fullWidth:!0,onClick:this.props.onToggleRequest}," ")))),s?o===le.a.Sent?n:this.loadCommentsList():"",!this.props.disableComments&&s?this.commentWriteBox():"")}}var ve=(e=>{const t=Object(_.c)("translations")(e);return Object(H.connect)(be,ge)(J()(ue)(t))})(fe),ye=s(524),Ee=s(553),Ce=s(961),xe=s(295),we=s.n(xe),Se=s(29);class Pe extends I.Component{constructor(e){super(e),this.state={expanded:!1,truncated:!1},this.toggleLines=this.toggleLines.bind(this)}toggleLines(e){e.preventDefault(),this.setState({expanded:!this.state.expanded})}render(){const e=this.props,t=e.children,s=e.lines,a=e.classes,o=e.body;if(void 0===s)return Se.a.error("render/undefineProps/lines"),T.a.createElement("div",null);const n=this.state.expanded,i=T.a.createElement("div",{onClick:this.toggleLines,className:O()(a.root,{[a.expanded]:!n})},T.a.createElement(Ce.a,{in:n,collapsedHeight:"173px"},t));return(pe.a.isEmpty(o)?0:pe.a.getNumberOfLines(o))>s?i:t}}Pe.defaultProps={lines:3,more:"Read more",less:"Show less"};var ke=we()((()=>({root:{position:"relative"},expanded:{"&:before":{content:"",float:"left",width:5,height:"100%"},"&:after":{content:'"\\002026"',fontSize:34,fontWeight:500,color:"#4285f4",boxSizing:"content-box",float:"right",position:"absolute",top:150,left:"100%",height:20,width:"2em",marginLeft:"-2em",paddingRight:5,textAlign:"right",background:"linear-gradient(to right,rgba(255,255,255,0),white 50%,white)",cursor:"pointer"}}})))(Pe),Oe=s(1138),Ie=s(1137),Te=s(510),Ne=s(176),Le=s(663),Re=s.n(Le),De=s(1161),We=s(1162),Me=s(1163),Ae=s(1164),je=s(1165),ze=s(1166),Ue=s(1167),Be=s(1168);class Ve extends I.Component{constructor(e){super(e),this.state={}}render(){const e=this.props,t=e.classes,s=e.t,a=e.shareOpen,o=e.onClose,n=e.openCopyLink,i=e.post,r=e.onCopyLink;return T.a.createElement(Oe.a,{className:t.fullPageXs,title:"Share On",open:a,onClose:o},T.a.createElement(M.a,{className:t.shareLinkPaper},n?T.a.createElement("div",null,T.a.createElement(A.a,{autoFocus:!0,fullWidth:!0,id:"text-field-default",defaultValue:"".concat(window.location.origin,"/").concat(i.get("ownerUserId"),"/posts/").concat(i.get("id"))}),T.a.createElement(Ne.a,{className:O()("animate-top",t.clipboard),variant:"h5",component:"h2"},"Link has been copied to clipboard ...")):T.a.createElement(U.a,null,T.a.createElement("div",null,T.a.createElement(De.a,{onShareWindowClose:o,url:"".concat(window.location.origin,"/").concat(i.get("ownerUserId"),"/posts/").concat(i.get("id")),quote:i.get("body"),hashtag:i.get("tags",Object(N.List)([])).count()>0?"#".concat(i.getIn(["tags",0],"hashtag")):null},T.a.createElement(p.a,null,T.a.createElement(Ie.a,{classes:{root:t.networkShare}},T.a.createElement(We.a,{size:32,round:!0})),T.a.createElement(Te.a,{inset:!0,primary:s("post.facebookButton")})))),T.a.createElement("div",null,T.a.createElement(Me.a,{onShareWindowClose:o,url:"".concat(window.location.origin,"/").concat(i.get("ownerUserId"),"/posts/").concat(i.get("id")),quote:i.get("body"),hashtag:"#".concat(i.getIn(["tags",0],""))},T.a.createElement(p.a,null,T.a.createElement(Ie.a,{classes:{root:t.networkShare}},T.a.createElement(Ae.a,{size:32,round:!0})),T.a.createElement(Te.a,{inset:!0,primary:s("post.twitterButton")})))),T.a.createElement("div",null,T.a.createElement(je.a,{onShareWindowClose:o,url:"".concat(window.location.origin,"/").concat(i.get("ownerUserId"),"/posts/").concat(i.get("id")),quote:i.get("body"),hashtag:"#".concat(i.getIn(["tags",0],""))},T.a.createElement(p.a,null,T.a.createElement(Ie.a,{classes:{root:t.networkShare}},T.a.createElement(ze.a,{size:32,round:!0})),T.a.createElement(Te.a,{inset:!0,primary:s("post.linkedinButton")})))),T.a.createElement("div",null,T.a.createElement(Ue.a,{onShareWindowClose:o,url:"".concat(window.location.origin,"/").concat(i.get("ownerUserId"),"/posts/").concat(i.get("id")),quote:i.get("body"),hashtag:"#".concat(i.getIn(["tags",0],""))},T.a.createElement(p.a,null,T.a.createElement(Ie.a,{classes:{root:t.networkShare}},T.a.createElement(Be.a,{size:32,round:!0})),T.a.createElement(Te.a,{inset:!0,primary:s("post.googlePlusButton")})))),T.a.createElement(p.a,{onClick:r},T.a.createElement(Ie.a,null,T.a.createElement(Re.a,null)),T.a.createElement(Te.a,{inset:!0,primary:s("post.copyLinkButton")})))))}}const Fe=Object(_.c)("translations")(Ve);var qe=Object(H.connect)((()=>({})),(()=>({})))(Object(m.a)((e=>({image:{verticalAlign:"top",maxWidth:"100%",minWidth:"100%",width:"100%"},clipboard:{fontSize:"18px",textAlign:"center",marginTop:"10px",color:"#1e882d",fontWeight:400},networkShare:{width:"100%",height:"100%"},fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},shareLinkPaper:{minHeight:80,padding:10,minWidth:460}})))(Fe)),Ge=s(664),Ye=s.n(Ge),He=s(75),_e=s(206),Xe=s(665),Je=s.n(Xe);class Qe extends I.Component{constructor(e){super(e),this.handleClick=(e,t)=>{const s=this.props.onClick;s&&s(e,t)},this.state={}}getData(){const e=this.props,t=e.classes,s=e.images,a=Math.floor(2*Math.random()+1);return s.length>1?T.a.createElement("div",{className:t.container},T.a.createElement("div",{className:O()({[t.firstColumn]:1===a},{[t.firstRow]:2===a})},T.a.createElement(r.a,{image:s[0].url,onClick:e=>this.handleClick(e,0),className:O()(t.mediaCard,t.featureCard)})),T.a.createElement("div",{className:O()({[t.column]:1===a},{[t.row]:2===a})},s.map(((e,s)=>0!==s?T.a.createElement(r.a,{key:s,onClick:e=>this.handleClick(e,s),image:e.url,className:t.mediaCard}):"")))):T.a.createElement(ye.a,{fileName:s[0].url,onClick:e=>this.handleClick(e,0)})}render(){const e=this.props.classes;return T.a.createElement("div",{className:e.mainContainer},this.getData())}}var $e=Object(m.a)((()=>({mainContainer:{width:"100%"},container:{display:"flex",flexWrap:"wrap",marginTop:20,width:"100%",height:415,position:"relative"},firstRow:{flex:"100%",display:"flex",paddingBottom:1},row:{flex:"100%",display:"flex",marginTop:1,marginBottom:1},firstColumn:{flex:"50%",display:"flex",flexDirection:"column",paddingRight:1},column:{flex:"50%",display:"flex",flexDirection:"column",paddingLeft:1,paddingRight:2},mediaCard:{height:"100%",width:"100%",backgroundSize:"cover",margin:1}})))(Qe),Ze=s(589),Ke=s.n(Ze);class et extends I.Component{constructor(e){super(e),this.handleImageClick=(e,t)=>{t(e)},this.state={},this.handleImageClick=this.handleImageClick.bind(this)}shouldComponentUpdate(e){return!L.a(e.images,this.props.images)}render(){const e=this.props,t=e.classes,s=e.images,a=e.currentAlbum;if(s&&s.size>0){const e=[];s.valueSeq().forEach((t=>{e.push({src:t,url:t,id:t})}));const o=e.slice(0,4);return T.a.createElement(Ke.a,{images:e,renderImageFunc:e=>T.a.createElement("div",{className:t.root},T.a.createElement($e,{images:o,onClick:(t,s)=>this.handleImageClick(s,e)}),T.a.createElement("div",{className:O()(t.titleContainer,{[t.noDisplay]:!(a&&a.get("album").get("title"))})},T.a.createElement("div",{className:t.aboveContainer}),T.a.createElement("div",{className:t.bottomContainer}),T.a.createElement(Y.a,{to:"/u/".concat(a&&a.get("ownerUserId"),"/album/").concat(a&&a.get("id"))},T.a.createElement(Ne.a,{className:t.title},a&&a.get("album").get("title")))))})}return T.a.createElement("div",{className:t.noAlbum},T.a.createElement(Je.a,{className:t.noAlbumIcon}))}}var tt=we()((e=>({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",position:"relative",backgroundColor:e.palette.background.paper},gridList:{width:500,height:450},subheader:{width:"100%"},descRoot:{bottom:0,left:0,position:"absolute",right:0,zIndex:1},topGradiant:{background:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.6))",height:32},shadow:{backgroundColor:"rgba(0,0,0,.6)",padding:24,textAlign:"center",verticalAlign:"middle"},albumTitle:{color:"white"},noDisplay:{display:"none"},noAlbum:{display:"flex",justifyContent:"center",alignItems:"center"},noAlbumIcon:{fontSize:50},aboveContainer:{background:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.6))",height:30},bottomContainer:{backgroundColor:"rgba(0,0,0,.6)",height:70},titleContainer:{position:"absolute",bottom:0,left:1,right:1,height:100},title:{textAlign:"center",fontSize:22,fontWeight:400,color:"white",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})))(et),st=s(666),at=s.n(st),ot=s(667),nt=s.n(ot),it=s(673),rt=s.n(it),lt=s(25),ct=s(177),ht=s(5),dt=s(37),pt=s(143),mt=s(26);const ut=(e,t)=>e.getIn(["comment","postComments",t.postId],Object(N.Map)({})),gt=()=>Object(mt.a)([ut],(e=>e)),bt=(e,t)=>{const s=t.post;return{vote:()=>e(pt.c(s.get("id"),s.get("ownerUserId"))),unvote:()=>e(pt.d(s.get("id"),s.get("ownerUserId"))),delete:t=>e(dt.h(t)),toggleDisableComments:t=>{e(dt.m(s.set("disableComments",t),(e=>e)))},toggleSharingComments:t=>{e(dt.m(s.set("disableSharing",t),(e=>e)))},goTo:t=>e(Object(ct.a)(t)),setHomeTitle:t=>e(ht.q(t||"")),getPostComments:(t,s,a,o)=>e(Q.g(t,s,a,o))}},ft=()=>{const e=ee.a.selectCurrentUser(),t=gt();return(s,a)=>{const o=t(s,{postId:a.post.get("id")}),n=e(s).get("userId"),i=a.post.get("score",0),r=a.post.getIn(["votes",n],!1);return{commentList:o,avatar:a.post.get("ownerAvatar",""),fullName:a.post.get("ownerDisplayName",""),voteCount:i,currentUserVote:r,isPostOwner:n===a.post.get("ownerUserId")}}};class vt extends I.Component{constructor(e){super(e),this.styles={dialog:{width:"",maxWidth:"530px",borderRadius:"4px"}},this.handleOpenComments=()=>{const e=this.props,t=e.getPostComments,s=e.post;if(!s||!t)return;t(s.get("ownerUserId"),s.get("id"),0,10),this.setState({openComments:!this.state.openComments})},this.handleOpenPostWrite=()=>{this.closePostMenu(),this.setState({openPostWrite:!0})},this.handleClosePostWrite=()=>{this.setState({openPostWrite:!1})},this.handleDelete=()=>{const e=this.props.post;this.closePostMenu(),this.props.delete&&this.props.delete(e.get("id"))},this.openPostMenu=e=>{this.setState({postMenuAnchorEl:e.currentTarget,isPostMenuOpen:!0})},this.closePostMenu=()=>{this.setState({postMenuAnchorEl:null,isPostMenuOpen:!1})},this.handleCopyLink=()=>{const e=this.props.t;this.setState({openCopyLink:!0,shareTitle:e("post.copyLinkButton")})},this.handleOpenShare=()=>{const e=this.props.post;Ye()("".concat(window.location.origin,"/").concat(e.get("ownerUserId"),"/posts/").concat(e.get("id"))),this.setState({shareOpen:!0})},this.handleCloseShare=()=>{this.setState({shareOpen:!1,shareTitle:"Share On",openCopyLink:!1})},this.handleVote=()=>{const e=this.props,t=e.unvote,s=e.vote,a=e.currentUserVote;s&&t&&(a?t():s())},this.getOpenCommentGroup=e=>{this.setState({openCommentGroup:e})},this.onShowVideo=()=>{this.setState({showVideo:!0})},this.getPermissionLabel=()=>{const e=this.props,t=e.t,s=e.post.get("permission");let a="";return s===He.a.Public?a=t("permission.public"):s===He.a.Circles?a=t("permission.circles"):s===He.a.OnlyMe&&(a=t("permission.onlyMe")),a},this.rightIconMenu=()=>{const e=this.props,t=e.post,s=e.t,a=e.toggleDisableComments,o=e.toggleSharingComments,n=this.state,i=n.postMenuAnchorEl,r=n.isPostMenuOpen;return a&&o?T.a.createElement("div",null,T.a.createElement(c.a,{onClick:this.openPostMenu.bind(this)},T.a.createElement(C.a,null)),T.a.createElement(d.a,{open:r||!1,anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.closePostMenu},t.get("postTypeId")!==_e.a.Album&&T.a.createElement(p.a,{onClick:this.handleOpenPostWrite}," ",s("post.edit")," "),T.a.createElement(p.a,{onClick:this.handleDelete}," ",s("post.delete")," "),T.a.createElement(p.a,{onClick:()=>a(!t.get("disableComments"))},t.get("disableComments")?s("post.enableComments"):s("post.disableComments")),T.a.createElement(p.a,{onClick:()=>o(!t.get("disableSharing"))},t.get("disableSharing")?s("post.enableSharing"):s("post.disableSharing")))):T.a.createElement("div",null)};const t=e.post;this.state={text:t.get("body",""),readMoreState:!1,openComments:!1,shareOpen:!1,disableComments:t.get("disableComments"),disableSharing:t.get("disableSharing"),shareTitle:"Share On",openCopyLink:!1,openPostWrite:!1,postMenuAnchorEl:null,isPostMenuOpen:!1,showVideo:!1},this.handleReadMore=this.handleReadMore.bind(this),this.getOpenCommentGroup=this.getOpenCommentGroup.bind(this),this.handleVote=this.handleVote.bind(this),this.handleOpenShare=this.handleOpenShare.bind(this),this.handleCloseShare=this.handleCloseShare.bind(this),this.handleCopyLink=this.handleCopyLink.bind(this),this.handleDelete=this.handleDelete.bind(this),this.handleOpenPostWrite=this.handleOpenPostWrite.bind(this),this.handleClosePostWrite=this.handleClosePostWrite.bind(this),this.handleOpenComments=this.handleOpenComments.bind(this),this.rightIconMenu=this.rightIconMenu.bind(this)}handleReadMore(){this.setState({readMoreState:!this.state.readMoreState})}shouldComponentUpdate(e,t){let s=!1;return e.post.equals(this.props.post)?e.commentList!==this.props.commentList||this.props.getPostComments!==e.getPostComments?s=!0:L.a(this.state,t)||(s=!0):s=!0,s}getAlbum(){const e=this.props.post,t=e.get("album"),s=e.get("id"),a=e.get("postTypeId");return t&&t.get("photos")&&(a===_e.a.Album||a===_e.a.PhotoGallery)?T.a.createElement(tt,{key:"post-album-grid-".concat(s),currentAlbum:e,images:t.get("photos")}):""}render(){const e=this.props,t=e.post,s=e.setHomeTitle,d=e.goTo,p=e.isPostOwner,m=e.commentList,u=e.classes,b=this.state.showVideo;if(!d||!s)return T.a.createElement("div",null);const v=t.get("ownerUserId"),E=t.get("ownerDisplayName"),C=t.get("creationDate"),x=t.get("ownerAvatar"),S=t.get("image"),k=t.get("body"),I=t.get("video"),N=t.get("thumbnail"),L=t.get("postTypeId"),R=t.get("id"),D=t.get("disableComments"),W=t.get("commentCounter"),M=t.get("disableSharing"),A=t.get("score");t.get("version");return T.a.createElement(a.a,{key:R+"post-card",className:"animate-top"},T.a.createElement(i.a,{title:T.a.createElement(Y.a,{to:"/".concat(v)},E),subheader:C?(lt.a.dataFormat.postVersion,G()(C).local().fromNow()+" | ".concat(this.getPermissionLabel())):T.a.createElement(h.a,{color:"primary"}),avatar:T.a.createElement(Y.a,{to:"/".concat(v)},T.a.createElement(F.a,{fullName:E,fileName:x,size:36})),action:p?this.rightIconMenu():""}),S&&""!==S&&L===_e.a.Photo||N&&""!==N&&I&&""!==I&&L===_e.a.Video?T.a.createElement(r.a,{className:u.cardMedia,image:L===_e.a.Photo?S:N},b?T.a.createElement("div",{className:"player-wrapper"},T.a.createElement(nt.a,{controls:!0,className:"react-player",width:"100%",height:"100%",url:I,playing:!0})):T.a.createElement(T.a.Fragment,null,T.a.createElement(ye.a,{fileName:L===_e.a.Photo?S:N}),T.a.createElement("span",{className:O()(u.playVideo,{[u.noDisplay]:L!==_e.a.Video})},T.a.createElement(c.a,{className:u.playIconButtonRoot,onClick:this.onShowVideo},T.a.createElement(w.a,{className:u.playIcon}))))):"",this.getAlbum(),T.a.createElement(n.a,{className:u.postBody},T.a.createElement(ke,{body:k},T.a.createElement(at.a,{properties:{target:"_blank",style:{color:"blue"},onClick:e=>e.stopPropagation()}},rt()(k,/#(\w+)/g,((e,t)=>T.a.createElement(Y.a,{style:{color:"green"},key:e+t,to:"/tag/".concat(e),onClick:t=>{t.preventDefault(),t.stopPropagation(),d("/tag/".concat(e)),s("#".concat(e))}},"#",e)))))),T.a.createElement(o.a,null,T.a.createElement("div",{className:u.vote},T.a.createElement(c.a,{className:u.iconButton,onClick:this.handleVote,"aria-label":"Love"},T.a.createElement(l.a,{className:u.iconButton,checkedIcon:T.a.createElement(f.a,{style:{fill:"#4CAF50"}}),icon:T.a.createElement(y.a,{style:{fill:"#757575"}}),checked:this.props.currentUserVote})),T.a.createElement("div",{className:u.voteCounter}," ",A>0?A:""," ")),T.a.createElement("div",{style:{display:"inherit"}},T.a.createElement(c.a,{className:u.iconButton,onClick:this.handleOpenComments,"aria-label":"Comment"},T.a.createElement(g.a,null)),T.a.createElement("div",{className:u.commentCounter},W>0?W:""," ")),M?"":T.a.createElement(c.a,{className:u.iconButton,onClick:this.handleOpenShare,"aria-label":"Comment"},T.a.createElement(P.a,null))),T.a.createElement(ve,{open:this.state.openComments,comments:m,ownerPostUserId:v,onToggleRequest:this.handleOpenComments,isPostOwner:this.props.isPostOwner,disableComments:D,postId:R}),T.a.createElement(qe,{onClose:this.handleCloseShare,shareOpen:this.state.shareOpen,onCopyLink:this.handleCopyLink,openCopyLink:this.state.openCopyLink,post:t}),this.state.openPostWrite&&T.a.createElement(Ee.a,{key:"post-component-post-write-".concat(R),open:this.state.openPostWrite,onRequestClose:this.handleClosePostWrite,edit:!0,postModel:t}))}}const yt=Object(_.c)("translations")(vt);var Et;t.a=(Et=Object(m.a)((e=>({iconButton:{},vote:{display:"flex",flex:1},voteCounter:{color:"#777",fontSize:12,fontWeight:500,marginTop:25,marginLeft:-18,marginRight:6},commentCounter:{fontWeight:400,color:"#777",fontSize:12,lineHeight:"48px",marginLeft:-2},popperOpen:{zIndex:10},popperClose:{pointerEvents:"none",zIndex:0},postBody:{wordWrap:"break-word",color:"rgba(0, 0, 0, 0.87)",fontSize:"0.875rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.46429em",whiteSpace:"pre-line"},image:{width:"100%",height:500},playVideo:{position:"absolute",right:"45%",top:"45%",cursor:"pointer",backgroundColor:"#f1efeca3",borderRadius:"50%",height:60,padding:0},playIcon:{width:60,height:60,marginTop:"-12px",fill:"red"},noDisplay:{display:"none"},playIconButtonRoot:{width:60,height:60},cardMedia:{position:"relative"},fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}}})))(yt),Object(H.connect)(ft,bt)(Et))},592:function(e,t,s){"use strict";var a=s(175),o=s(508),n=s(1137),i=s(510),r=s(310),l=s(295),c=s.n(l),h=s(557),d=s.n(h);const p=e=>e.reduce(((e,t,s,a)=>t<a[e]?s:e),0),m=e=>{const t=[];for(let s=0;s<e;s++)t.push(0);return t};var u=s(43),g=s(150),b=s.n(g),f=s(206),v=s(4),y=s(585),E=s.n(y),C=s(0),x=s.n(C),w=s(587),S=s.n(w),P=s(97),k=s(536),O=s(126),I=s(577),T=s(553),N=s(204),L=s(531),R=s(17),D=s(179),W=s(59),M=s(5),A=s(18),j=s(121),z=s(519);const U=e=>({openPostWrite:()=>e(M.n(D.a.PostWrite)),closePostWrite:()=>e(M.c(D.a.PostWrite)),showTopLoading:()=>e(M.w()),hideTopLoading:()=>e(M.j())}),B=()=>{const e=A.a.selectCurrentUser(),t=j.a.selectDialogState(),s=j.a.selectProgress(),a=z.a.selectRequest();return(o,n)=>{const i=e(o),r=t(o,{type:D.a.PostWrite}),l=a(o,{requestId:n.requestId}),c=s(o);return{streamRequestStatus:l?l.status:R.a.NoAction,avatar:i.get("avatar",""),fullName:i.get("fullName"),postWriteDilogOpen:r,progress:c}}},V=(e,t)=>e>1400?F(3,t):e<867?F(1,t):e<1400?F(2,t):[],F=(e,t)=>{const s=[];let a=0;const o=m(e);return t.forEach((e=>{s[a]||(s[a]=[]),s[a].push(e),++o[a];e.get("postTypeId")!==f.a.Text&&++o[a];const t=e.get("body");o[a]+=Number(u.a.getNumberOfLines(t)/10),a=p(o)})),s};class q extends C.Component{static getDerivedStateFromProps(e,t){if(e.posts&&e.posts.count()>0&&!e.posts.equals(t.prevPosts)){return{posts:V(window.innerWidth,e.posts),prevPosts:e.posts.count()}}return null}constructor(e){super(e),this.nextPage=0,this.styles={postWritePrimaryText:{color:a.a[400],cursor:"text"},postWtireItem:{fontWeight:"200"}},this.loader=()=>{const e=this.props.streamRequestStatus,t=this.props.loadStream;t&&e&&e!==R.a.Sent&&(t(this.nextPage),this.nextPage++)},this.handleResize=e=>{const t=this.props.posts,s=V(e.target.innerWidth,t);this.setState({posts:s})},this.handleOpenPostWrite=()=>{const e=this.props.openPostWrite;e&&e()},this.handleClosePostWrite=()=>{const e=this.props.closePostWrite;e&&e()},this.writePostElement=()=>{const e=this.props,t=e.tag,s=e.displayWriting,a=e.classes,l=e.t,c=e.postWriteDilogOpen;return x.a.createElement("div",{className:b()("grid-cell animate-top",a.gridCell),style:{maxWidth:"530px",minWidth:"280px"}},c&&x.a.createElement(T.a,{open:c,onRequestClose:this.handleClosePostWrite,edit:!1}),s&&!t?x.a.createElement(x.a.Fragment,null,x.a.createElement(r.a,{elevation:2},x.a.createElement(o.a,{button:!0,style:this.styles.postWtireItem,onClick:this.handleOpenPostWrite},x.a.createElement(N.a,{fullName:this.props.fullName,fileName:this.props.avatar,size:36}),x.a.createElement(i.a,{inset:!0,primary:x.a.createElement("span",{style:this.styles.postWritePrimaryText}," ",l("home.postWriteButtonText"))}),x.a.createElement(n.a,null,x.a.createElement(d.a,null)))),x.a.createElement("div",{style:{height:"16px"}})):"")},this.getpostList=()=>{const e=this.props.classes,t=this.state.posts,s=[];return(t||[]).forEach(((t,a)=>{const o=x.a.createElement("div",{className:e.postBox,key:"post-stream-column-".concat(a)},0===a?this.writePostElement():"",t.map(((t,s)=>x.a.createElement(C.Fragment,{key:"post-container-".concat(t.get("id"))},s>0?x.a.createElement("div",{className:e.spaceBox}," "):"",x.a.createElement(I.a,{key:"".concat(t.get("id"),"-stream-div-post"),post:t})," "))));s.push(o)})),s},this.state={divided:!1,disableComments:this.props.disableComments||!1,disableSharing:this.props.disableSharing||!1,openPostWrite:!1,homeTitle:e.homeTitle||"",hasMorePosts:!0,posts:[],prevPosts:Object(v.Map)({})},this.handleResize=E()(this.handleResize,300),this.handleResize=this.handleResize.bind(this),this.loader=this.loader.bind(this),this.handleOpenPostWrite=this.handleOpenPostWrite.bind(this),this.handleClosePostWrite=this.handleClosePostWrite.bind(this)}componentDidMount(){setTimeout((()=>{this.loader()}),500)}render(){const e=this.props,t=e.hasMorePosts,s=e.classes,a=e.posts;return x.a.createElement(k.a,{dataLength:a?a.size:0,next:this.loader,hasMore:t||!1,endMessage:"",loader:x.a.createElement(L.a,{key:"stream-load-more-progress"})},x.a.createElement(S.a,{target:"window",onResize:this.handleResize}),!a||a.count()>0?"":this.writePostElement(),x.a.createElement("div",{className:s.container},a&&a.count()>0&&this.getpostList()))}}const G=Object(P.c)("translations")(q);var Y;t.a=Object(O.withRouter)((Y=c()((e=>({root:{position:"relative"},container:{maxWidth:1200,textAlign:"center",whiteSpace:"nowrap",lineHeight:0,position:"relative",boxPack:"center",WebkitJustifyContent:"center",justifyContent:"center",display:"flex",margin:"0 auto",padding:"10px 0",width:"100%","@media (min-width: 440px)":{width:"90%"},"@media only screen and (min-width: 860px)":{width:"90%"},"@media (min-width: 1600px)":{width:"94%"},"@media (max-width: 440px)":{width:"calc(100% - 16px)",margin:"0 8px"}},postBox:{flexGrow:1,WebkitBoxFlex:1,flex:"0 1 auto",maxWidth:530,minWidth:140,width:"100%",display:"inline-block",verticalAlign:"top",textAlign:"left",whiteSpace:"normal",lineHeight:"normal","& + &":{marginLeft:24}},spaceBox:{height:24},gridCell:{[e.breakpoints.down("sm")]:{maxWidth:"100% !important",width:"100%"}}})))(G),Object(W.connect)(B,U)(Y)))},616:function(e,t,s){"use strict";var a=s(160),o=s(123),n=Object(a.b)({defaultTheme:o.a});t.a=n},618:function(e,t,s){"use strict";s.r(t),s.d(t,"SearchComponent",(function(){return g}));var a=s(1146),o=s(295),n=s.n(o),i=s(1170),r=s(1174),l=s(177),c=s(0),h=s.n(c),d=s(97),p=s(59),m=s(126),u=s(5);class g extends c.Component{constructor(e){super(e),this.handleChangeTab=(e,t)=>{const s=this.props,a=s.goTo,o=s.setHeaderTitle,n=s.t,i=s.location;if(a&&o&&n)switch(this.setState({tabIndex:t}),t){case 0:a("/search/post".concat(i.search)),o(n("header.peopleCaption"));break;case 1:a("/search/user".concat(i.search)),o(n("header.circlesCaption"))}},this.getTabIndexByNav=e=>{switch(e){case"people":return 1;default:return 0}};const t=this.props.tab;this.state={tabIndex:this.getTabIndexByNav(t)}}componentDidMount(){const e=this.props,t=e.setHeaderTitle,s=e.t,a=this.props.match.params.tab;if(t&&s)switch(a){case void 0:case"":t(s("header.peopleCaption"));break;case"circles":t(s("header.circlesCaption"));break;case"followers":t(s("header.followersCaption"))}}render(){const e=this.props,t=e.t,s=e.children,o=e.classes,n=this.state.tabIndex;if(t)return h.a.createElement("div",{style:{margin:"0 auto"}},h.a.createElement(a.a,{position:"static",color:"default"},h.a.createElement(r.a,{indicatorColor:"secondary",onChange:this.handleChangeTab,value:n,centered:!0,textColor:"primary"},h.a.createElement(i.a,{label:t("search.posts")}),h.a.createElement(i.a,{label:t("search.users")}))),h.a.createElement("div",{className:o.container},s))}}const b=Object(d.c)("translations")(g);t.default=Object(m.withRouter)(Object(p.connect)((e=>({uid:e.getIn(["authorize","uid"],0),circlesLoaded:e.getIn(["circle","loaded"])})),(e=>({goTo:t=>e(Object(l.a)(t)),setHeaderTitle:t=>e(u.q(t))})))(n()((()=>({container:{marginTop:50}})))(b)))}}]);