(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[25],{1152:function(e,t,o){"use strict";o.r(t);var n,r=o(8),s=o(43),i=o(49),a=o(45),l=o(86),c=o(48),p=o(177),u=o(292),h=o.n(u),d=o(0),m=o.n(d),f=o(106),v=o(95),g=o(607),b=o(50),y=o(33),w=o(61),T=o(17),E=o(19),P=o(39),S=o(102),O=o(539),x=function(e,t){return{loadStream:function(t,o){return e(T.f.dbGetPosts(t,o))},setHomeTitle:function(t){return e(T.d.setHeaderTitle(t||""))},increasePage:function(){return e(T.f.increasePageStream())},showTopLoading:function(){return e(T.d.showTopLoading())},hideTopLoading:function(){return e(T.d.hideTopLoading())}}},W=function(){var e=P.a.selectCurrentUser(),t=S.b.selectHasMorePostStream(),o=S.b.selectStreamPage(),n=O.a.selectRequest(),r=S.b.selectStreamPosts();return function(s,i){var a=e(s).toJS(),l=b.a.createServerRequestId(y.a.StreamGetPosts,a.userId),c=n(s,{requestId:l}),p=t(s),u=r(s),h=o(s);return{hasMorePosts:p,currentUser:a,streamRequestStatus:c?c.status:E.a.NoAction,posts:u,requestId:l,page:h}}},j=o(15),L=function(e){function t(e){var o;return Object(r.a)(this,t),(o=Object(i.a)(this,Object(a.a)(t).call(this,e))).styles={postWritePrimaryText:{color:p.a[400],cursor:"text"},postWtireItem:{fontWeight:"200"}},o.state={},o.loadPosts=o.loadPosts.bind(Object(l.a)(o)),o}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setHomeTitle)((0,e.t)("header.home"))}},{key:"loadPosts",value:function(){var e=this.props,t=e.loadStream,o=e.page,n=e.increasePage;t&&void 0!==o&&n&&(t(o),n())}},{key:"render",value:function(){var e=this.props,t=e.hasMorePosts,o=e.posts,n=e.requestId,r=e.currentUser;return m.a.createElement("div",{className:"stream-root"},m.a.createElement(g.a,{homeTitle:r?r.fullName:"",requestId:n,posts:o,loadStream:this.loadPosts,hasMorePosts:t,displayWriting:!0}))}}]),t}(d.Component),D=Object(f.c)("translations")(L),R=Object(v.withRouter)((n=h()((function(e){return{root:{},gridCell:Object(j.a)({},e.breakpoints.down("sm"),{maxWidth:"100% !important",width:"100%"})}}))(D),Object(w.connect)(W,x)(n)));t.default=R},551:function(e,t,o){"use strict";var n=o(8),r=o(43),s=o(49),i=o(45),a=o(48),l=o(631),c=o(521),p=o(0),u=o.n(p),h=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(a.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.theme;return u.a.createElement("div",{key:"load-more-progress",className:"g-load-more"},u.a.createElement(c.a,{size:30,thickness:5,style:{color:e.palette.primary.light}}))}}]),t}(p.Component),d=Object(l.a)(h);t.a=d},554:function(e,t,o){"use strict";var n=o(0),r=o.n(n),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};var i=function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var a={Pixel:"Pixel",Percent:"Percent"},l={unit:a.Percent,value:.8};var c=function(e){function t(t){var o=e.call(this,t)||this;return o.lastScrollTop=0,o.actionTriggered=!1,o.startY=0,o.currentY=0,o.dragging=!1,o.maxPullDownDistance=0,o.getScrollableTarget=function(){return o.props.scrollableTarget instanceof HTMLElement?o.props.scrollableTarget:"string"===typeof o.props.scrollableTarget?document.getElementById(o.props.scrollableTarget):(null===o.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},o.onStart=function(e){o.lastScrollTop||(o.dragging=!0,e instanceof MouseEvent?o.startY=e.pageY:e instanceof TouchEvent&&(o.startY=e.touches[0].pageY),o.currentY=o.startY,o._infScroll&&(o._infScroll.style.willChange="transform",o._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},o.onMove=function(e){o.dragging&&(e instanceof MouseEvent?o.currentY=e.pageY:e instanceof TouchEvent&&(o.currentY=e.touches[0].pageY),o.currentY<o.startY||(o.currentY-o.startY>=Number(o.props.pullDownToRefreshThreshold)&&o.setState({pullToRefreshThresholdBreached:!0}),o.currentY-o.startY>1.5*o.maxPullDownDistance||o._infScroll&&(o._infScroll.style.overflow="visible",o._infScroll.style.transform="translate3d(0px, "+(o.currentY-o.startY)+"px, 0px)")))},o.onEnd=function(){o.startY=0,o.currentY=0,o.dragging=!1,o.state.pullToRefreshThresholdBreached&&o.props.refreshFunction&&o.props.refreshFunction(),requestAnimationFrame((function(){o._infScroll&&(o._infScroll.style.overflow="auto",o._infScroll.style.transform="none",o._infScroll.style.willChange="none")}))},o.onScrollListener=function(e){"function"===typeof o.props.onScroll&&setTimeout((function(){return o.props.onScroll&&o.props.onScroll(e)}),0);var t=o.props.height||o._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;o.actionTriggered||(o.isElementAtBottom(t,o.props.scrollThreshold)&&o.props.hasMore&&(o.actionTriggered=!0,o.setState({showLoader:!0}),o.props.next&&o.props.next()),o.lastScrollTop=t.scrollTop)},o.state={showLoader:!1,pullToRefreshThresholdBreached:!1},o.throttledOnScrollListener=function(e,t,o,n){var r,s=!1,i=0;function a(){r&&clearTimeout(r)}function l(){var l=this,c=Date.now()-i,p=arguments;function u(){i=Date.now(),o.apply(l,p)}s||(n&&!r&&u(),a(),void 0===n&&c>e?u():!0!==t&&(r=setTimeout(n?function(){r=void 0}:u,void 0===n?e-c:e)))}return"boolean"!==typeof t&&(n=o,o=t,t=void 0),l.cancel=function(){a(),s=!0},l}(150,o.onScrollListener).bind(o),o.onStart=o.onStart.bind(o),o.onMove=o.onMove.bind(o),o.onEnd=o.onEnd.bind(o),o}return function(e,t){function o(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}(t,e),t.prototype.componentDidMount=function(){var e=this;if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",(function(t){return e.throttledOnScrollListener(t)})),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){var e=this;this.el&&(this.el.removeEventListener("scroll",(function(t){return e.throttledOnScrollListener(t)})),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.key===e.key&&this.props.dataLength===e.dataLength||(this.actionTriggered=!1,this.setState({showLoader:!1,pullToRefreshThresholdBreached:!1}))},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var o=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=function(e){return"number"===typeof e?{unit:a.Percent,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:a.Pixel,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:a.Percent,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),l):(console.warn("scrollThreshold should be string or number"),l)}(t);return n.unit===a.Pixel?e.scrollTop+o>=e.scrollHeight-n.value:e.scrollTop+o>=n.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=i({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),o=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),n=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return r.a.createElement("div",{style:n,className:"infinite-scroll-component__outerdiv"},r.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&r.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},r.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!o&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(n.Component);t.a=c},607:function(e,t,o){"use strict";var n,r=o(8),s=o(49),i=o(45),a=o(86),l=o(43),c=o(48),p=o(177),u=o(528),h=o(1113),d=o(530),m=o(308),f=o(292),v=o.n(f),g=o(571),b=o.n(g),y=function(e){return e.reduce((function(e,t,o,n){return t<n[e]?o:e}),0)},w=function(e){for(var t=[],o=0;o<e;o++)t.push(0);return t},T=o(50),E=o(154),P=o.n(E),S=o(204),O=o(4),x=o(597),W=o.n(x),j=o(0),L=o.n(j),D=o(599),R=o.n(D),M=o(106),_=o(554),k=o(95),C=o(592),Y=o(569),N=o(202),q=o(551),B=o(19),H=o(181),I=o(61),A=o(5),F=o(39),z=o(133),U=o(539),J=function(e,t){return{openPostWrite:function(){return e(A.openDialog(H.a.PostWrite))},closePostWrite:function(){return e(A.closeDialog(H.a.PostWrite))},showTopLoading:function(){return e(A.showTopLoading())},hideTopLoading:function(){return e(A.hideTopLoading())}}},G=function(){var e=F.a.selectCurrentUser(),t=z.a.selectDialogState(),o=z.a.selectProgress(),n=U.a.selectRequest();return function(r,s){var i=e(r),a=t(r,{type:H.a.PostWrite}),l=n(r,{requestId:s.requestId}),c=o(r);return{streamRequestStatus:l?l.status:B.a.NoAction,avatar:i.get("avatar",""),fullName:i.get("fullName"),postWriteDilogOpen:a,progress:c}}},$=o(15),V=function(e,t){return e>1400?K(3,t):e<867?K(1,t):e<1400?K(2,t):[]},K=function(e,t){var o=[],n=0,r=w(e);return t.forEach((function(e,t){o[n]||(o[n]=[]),o[n].push(e),++r[n],e.get("postTypeId")!==S.a.Text&&++r[n];var s=e.get("body");r[n]+=Number(T.a.getNumberOfLines(s)/10),n=y(r)})),o},Q=function(e){function t(e){var o;return Object(r.a)(this,t),(o=Object(s.a)(this,Object(i.a)(t).call(this,e))).nextPage=0,o.styles={postWritePrimaryText:{color:p.a[400],cursor:"text"},postWtireItem:{fontWeight:"200"}},o.loader=function(){var e=o.props.streamRequestStatus;e&&e!==B.a.Sent&&((0,o.props.loadStream)(o.nextPage),o.nextPage++)},o.handleResize=function(e){var t=o.props.posts,n=V(e.target.innerWidth,t);o.setState({posts:n})},o.handleOpenPostWrite=function(){var e=o.props.openPostWrite;e&&e()},o.handleClosePostWrite=function(){var e=o.props.closePostWrite;e&&e()},o.writePostElement=function(){var e=o.props,t=e.tag,n=e.displayWriting,r=e.classes,s=e.t,i=e.postWriteDilogOpen;return L.a.createElement("div",{className:P()("grid-cell animate-top",r.gridCell),style:{maxWidth:"530px",minWidth:"280px"}},i&&L.a.createElement(Y.a,{open:i,onRequestClose:o.handleClosePostWrite,edit:!1}),n&&!t?L.a.createElement(L.a.Fragment,null,L.a.createElement(m.a,{elevation:2},L.a.createElement(u.a,{button:!0,style:o.styles.postWtireItem,onClick:o.handleOpenPostWrite},L.a.createElement(N.a,{fullName:o.props.fullName,fileName:o.props.avatar,size:36}),L.a.createElement(d.a,{inset:!0,primary:L.a.createElement("span",{style:o.styles.postWritePrimaryText}," ",s("home.postWriteButtonText"))}),L.a.createElement(h.a,null,L.a.createElement(b.a,null)))),L.a.createElement("div",{style:{height:"16px"}})):"")},o.getpostList=function(){var e=o.props.classes,t=o.state.posts,n=[];return(t||[]).forEach((function(t,r){var s=L.a.createElement("div",{className:e.postBox,key:"post-stream-column-".concat(r)},0===r?o.writePostElement():"",t.map((function(t,o){return L.a.createElement(j.Fragment,{key:"post-container-".concat(t.get("id"))},o>0?L.a.createElement("div",{className:e.spaceBox}," "):"",L.a.createElement(C.a,{key:"".concat(t.get("id"),"-stream-div-post"),post:t})," ")})));n.push(s)})),n},o.state={divided:!1,disableComments:o.props.disableComments,disableSharing:o.props.disableSharing,openPostWrite:!1,homeTitle:e.homeTitle,hasMorePosts:!0,posts:[],prevPosts:Object(O.Map)({})},o.handleResize=W()(o.handleResize,300),o.handleResize=o.handleResize.bind(Object(a.a)(o)),o.loader=o.loader.bind(Object(a.a)(o)),o.handleOpenPostWrite=o.handleOpenPostWrite.bind(Object(a.a)(o)),o.handleClosePostWrite=o.handleClosePostWrite.bind(Object(a.a)(o)),o}return Object(c.a)(t,e),Object(l.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return e.posts&&e.posts.count()>0&&!e.posts.equals(t.prevPosts)?{posts:V(window.innerWidth,e.posts),prevPosts:e.posts.count()}:null}}]),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.loader()}),500)}},{key:"render",value:function(){var e=this.props,t=e.hasMorePosts,o=e.classes,n=e.posts;return L.a.createElement(_.a,{dataLength:n?n.size:0,next:this.loader,hasMore:t,endMessage:"",loader:L.a.createElement(q.a,{key:"stream-load-more-progress"})},L.a.createElement(R.a,{target:"window",onResize:this.handleResize}),!n||n.count()>0?"":this.writePostElement(),L.a.createElement("div",{className:o.container},n&&n.count()>0&&this.getpostList()))}}]),t}(j.Component),X=Object(M.c)("translations")(Q),Z=Object(k.withRouter)((n=v()((function(e){var t;return{root:{position:"relative"},container:(t={maxWidth:1200,textAlign:"center",whiteSpace:"nowrap",lineHeight:0,position:"relative",boxPack:"center",WebkitJustifyContent:"center",justifyContent:"center",display:"flex",margin:"0 auto",padding:"10px 0",width:"100%"},Object($.a)(t,"@media (min-width: 440px)",{width:"90%"}),Object($.a)(t,"@media only screen and (min-width: 860px)",{width:"90%"}),Object($.a)(t,"@media (min-width: 1600px)",{width:"94%"}),Object($.a)(t,"@media (max-width: 440px)",{width:"calc(100% - 16px)",margin:"0 8px"}),t),postBox:Object($.a)({flexGrow:1,WebkitBoxFlex:1,flex:"0 1 auto",maxWidth:530,minWidth:140,width:"100%",display:"inline-block",verticalAlign:"top",textAlign:"left",whiteSpace:"normal",lineHeight:"normal"},"& + &",{marginLeft:24}),spaceBox:{height:24},gridCell:Object($.a)({},e.breakpoints.down("sm"),{maxWidth:"100% !important",width:"100%"})}}))(X),Object(I.connect)(G,J)(n)));t.a=Z},631:function(e,t,o){"use strict";var n=o(520),r=o(134),s=Object(n.b)({defaultTheme:r.a});t.a=s}}]);