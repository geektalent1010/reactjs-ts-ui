(this["webpackJsonptelar-social-engine"]=this["webpackJsonptelar-social-engine"]||[]).push([[7],{553:function(e,t,a){"use strict";var s=a(8),i=a(828),o=a(1153),n=a(1160),l=a(1154),r=a(175),h=a(1138),c=a(1141),d=a(1140),p=a(1139),m=a(687),g=a(786),u=a(504),b=a(283),f=a(1136),v=a(15),y=a(502),C=a(514),E=a(176),x=a(534),w=a.n(x),S=a(527),k=a.n(S),P=a(557),O=a.n(P),I=a(575),N=a.n(I),L=a(656),R=a.n(L),T=a(657),D=a.n(T),A=a(658),W=a.n(A),M=a(535),V=a(47),U=a(43),j=a(150),z=a.n(j),B=a(0),G=a.n(B),F=a(59),q=a(25),H=a(97);class X extends B.Component{constructor(e){super(e),this.handleAddLink=()=>{const e=this.props,t=e.onAddLink,a=e.onClose,s=this.state.link;if(s&&""!==s.trim()){t(s,U.a.validateYoutubeUrl(s)?U.a.getYoutubetThumbnails(s):q.a.settings.defaultVideoThumbnails)}a()},this.handleInputChange=e=>{const t=e.target,a="checkbox"===t.type?t.checked:t.value,s=t.name;"link"===s&&this.validateInputLink(a),this.setState({[s]:a})},this.validateInputLink=e=>{const t=this.props.t;t&&(e&&""!==e.trim()?U.a.validateUrl(e.trim())?this.setState({linkInputError:"",disabledOk:!1}):this.setState({linkInputError:t("post.videoInputLinkInvalidError"),disabledOk:!0}):this.setState({linkInputError:t("post.videoInputLinkRequiredError"),disabledOk:!0}))},this.state={link:"",linkInputError:"",disabledOk:!0}}render(){const e=this.props,t=e.classes,a=e.t,s=e.open,o=e.onClose,n=this.state,l=n.disabledOk,m=n.linkInputError;return a?G.a.createElement(h.a,{PaperProps:{className:t.fullPageXs},open:s,onClose:o,maxWidth:"md"},G.a.createElement(p.a,null,a("post.addVideoTitle")),G.a.createElement(d.a,null,G.a.createElement(y.a,{autoFocus:!0,margin:"dense",type:"link",name:"link",onChange:this.handleInputChange,helperText:m,error:""!==m,fullWidth:!0})),G.a.createElement(c.a,null,G.a.createElement(i.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:o,style:{color:r.a[800]}},a("post.cancelButton")),G.a.createElement(i.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.handleAddLink,disabled:l},a("post.addVideoButton")))):G.a.createElement("div",null)}}const Y=Object(H.c)("translations")(X);var J=Object(F.connect)((()=>({})),(()=>({})))(Object(v.a)((e=>({fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},dialogTitle:{padding:0}})))(Y)),Z=a(593),_=a(524),K=a(1144),Q=a(1142),$=a(1143),ee=a(512),te=a(540),ae=a.n(te),se=a(32),ie=a(124),oe=a(1177),ne=a(5),le=a(44),re=a(17),he=a(18),ce=a(519),de=a(528),pe=a.n(de);var me=a(138);class ge extends B.Component{static getDerivedStateFromProps(e,t){return oe.a(e.photos,t.prevPhotos)?null:{selectedPhotos:[...e.photos],prevPhotos:e.photos}}constructor(e){super(e),this.saveAlbum=()=>{const e=this.props,t=e.progress,a=e.currentUser,s=this.state,i=s.accessUserList,o=s.permission,n=[...this.state.selectedPhotos],l=[];n.slice(0,4).map((e=>{const s=t.getIn([e.fileName,"meta"],{url:""}),n=e.fileName.split(".")[0],r=new ie.a(n,0,0,s.url||URL.createObjectURL(e.src),s.url||URL.createObjectURL(e.src),e.fileName,"","",e.fileName,Object(me.b)(a,"currentUser").userId,0,"",0,0,"",!1,i,o);return l.push(r),{url:s.url,fileName:e.fileName,fileId:n}}))},this.deleteSelectedPhoto=e=>{const t=this.props.onDelete;let a=[...this.state.selectedPhotos];a=a.filter((t=>t.fileName!==e)),this.setState({selectedPhotos:a}),t(e)},this.imageList=()=>{const e=this.props,t=e.classes,a=e.progress;return this.state.selectedPhotos.map((e=>{const s=a.getIn([e.fileName,"percent"],0),i=a.getIn([e.fileName,"visible"],!1);return G.a.createElement(Q.a,{key:"album-dialog-tile-".concat(e.fileName)},G.a.createElement("img",{src:e.src,alt:"something"}),G.a.createElement($.a,{title:i?G.a.createElement(ee.a,{variant:"determinate",value:s,color:"secondary"}):"",actionIcon:i?"":G.a.createElement(u.a,{className:t.icon,onClick:()=>this.deleteSelectedPhoto(e.fileName)},G.a.createElement(ae.a,null))}))}))},this.gridTile=()=>{const e=this.props.classes;return G.a.createElement(K.a,{cellHeight:100,className:e.gridList,cols:3},this.imageList())},this.state={selectedPhotos:[],prevPhotos:[]},this.imageList=this.imageList.bind(this),this.deleteSelectedPhoto=this.deleteSelectedPhoto.bind(this),this.saveAlbum=this.saveAlbum.bind(this)}render(){const e=this.props.classes;return G.a.createElement("div",{className:e.root},this.gridTile())}}const ue=Object(H.c)("translations")(ge),be=Object(v.a)((e=>({fullPageXs:{},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginTop:30},gridList:{flexWrap:"nowrap",width:"100%",transform:"translateZ(0)"},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),marginBottom:20,backgroundColor:e.palette.background.default},paper:{minHeight:"500px",[e.breakpoints.down("xs")]:{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",borderRadius:0,margin:0}},information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:pe.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"}})),{withTheme:!0})(ue);var fe=Object(F.connect)((()=>{const e=he.a.selectCurrentUser(),t=ce.a.selectRequest();return a=>{const s=e(a).toJS(),i=U.a.createServerRequestId(se.a.GalleryCreateAlbum,s.userId||"0"),o=t(a,{requestId:i});return{currentUser:s,createAlbumRequestStatus:o?o.status:re.a.NoAction}}}),(e=>({deleteImage:(t,a)=>e(le.j(t,q.a.data.imageFolderPath,a)),progressChange:(t,a)=>e(ne.o(t,a))})))(be),ve=a(204),ye=a(578),Ce=a(1159),Ee=a(655),xe=a.n(Ee),we=a(4),Se=a(46),ke=a(114),Pe=a.n(ke);class Oe extends B.Component{constructor(e){super(e),this.styles={root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},uploadButton:{verticalAlign:"middle",fontWeight:400},uploadInput:{cursor:"pointer",position:"absolute",top:0,bottom:0,right:0,left:0,width:"100%",opacity:0},deleteVideo:{marginLeft:"5px",cursor:"pointer",color:"white"},addImage:{marginRight:"5px",cursor:"pointer",color:"white"}},this.fileInputRef=void 0,this.videoRef=void 0,this.blobFile=void 0,this.file=void 0,this.handleSetVideo=(e,t,a)=>{this.props.set(t,a),this.close()},this.togglePreview=()=>{this.setState((e=>(e.isPreview&&this.fileInputRef.current&&(this.fileInputRef.current.value=""),{isPreview:!e.isPreview})))},this.handleDeleteVideo=(e,t)=>{const a=this.props.deleteVideo;a&&a(t)},this.onFileChange=e=>{const t=this.props,a=t.showError,s=t.t,i=M.a.getExtension(e.target.files[0].name);let o=!1;M.a.checkMaxFileSize(e.target.files[0].size,q.a.settings.maxVideoFileSize)&&a&&(o=!0,a(s("videGallery.maxExceedMessage")));const n="".concat(Pe()(),".").concat(i);this.setState({isPreview:!0,fileName:n,isSaveDisabled:o}),this.file=e.currentTarget.files[0];const l=this.file.type,r=Object(me.b)(this.videoRef.current,"this.videoRef.current");let h=r.canPlayType(l);""===h&&(h="no");const c=URL.createObjectURL(this.file);r.src=c},this.close=()=>{const e=this.props.close;e&&e()},this.videoList=()=>{const e=this.props.videos;return Object(me.b)(e,"videos").map((e=>G.a.createElement(Q.a,{key:Object(me.b)(e.id,"video.id")},G.a.createElement("div",null,G.a.createElement("div",{style:{overflowY:"hidden",overflowX:"auto"}},G.a.createElement("ul",{style:{whiteSpace:"nowrap",padding:"0 6px",margin:"8px 0 0 0",verticalAlign:"bottom",flexShrink:0,listStyleType:"none"}},G.a.createElement("div",{style:{display:"block"}},G.a.createElement("div",{style:{display:"block",marginRight:"8px",transition:"transform .25s"}},G.a.createElement("li",{style:{width:"100%",margin:0,verticalAlign:"bottom",position:"static",display:"inline-block"}},G.a.createElement(_.a,{fileName:e.thumbnail,style:{width:"100%",height:"auto"}}))))))),G.a.createElement($.a,{title:G.a.createElement(ae.a,{style:this.styles.deleteVideo,onClick:t=>this.handleDeleteVideo(t,e.id||"0")}),titlePosition:"top",actionIcon:G.a.createElement(xe.a,{style:this.styles.addImage,onClick:t=>this.handleSetVideo(t,e.URL,e.thumbnail||"")}),actionPosition:"left"}))))},this.handleUploadVideo=()=>{const e=this.props.uploadVideo,t=this.state.fileName;if(!this.videoRef.current||!e)return;M.a.captureVideo(this.videoRef.current,null).toBlob((a=>{a&&(e(this.file,t,a),this.togglePreview())}),"image/jpeg",.95)},this.state={fileName:"",isPreview:!1,isSaveDisabled:!1},this.fileInputRef=G.a.createRef(),this.videoRef=G.a.createRef(),this.close=this.close.bind(this),this.onFileChange=this.onFileChange.bind(this),this.handleSetVideo=this.handleSetVideo.bind(this),this.handleDeleteVideo=this.handleDeleteVideo.bind(this),this.videoList=this.videoList.bind(this),this.handleUploadVideo=this.handleUploadVideo.bind(this)}componentDidMount(){const e=this.props.getVideoGallery;e&&e()}render(){const e=this.props,t=e.t,a=e.videos,s=e.classes,o=this.state,n=o.isPreview,l=o.isSaveDisabled,r=G.a.createElement(K.a,{cellHeight:180,className:z()(s.gridList,{[s.noDisplay]:n})},G.a.createElement(Q.a,{key:"upload-image-gallery"},G.a.createElement("div",{style:{display:"flex",backgroundColor:"rgba(222, 222, 222, 0.52)",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},G.a.createElement("input",{accept:"video/mp4,video/x-m4v,video/*",style:this.styles.uploadInput,id:"raised-button-file",onChange:this.onFileChange,ref:this.fileInputRef,type:"file"}),G.a.createElement("label",{htmlFor:"raised-button-file"},G.a.createElement(i.a,{variant:"contained",component:"span",style:this.styles.uploadButton},t("imageGallery.uploadButton"))))),a&&a.count()>0?this.videoList():""),h=G.a.createElement("div",{className:z()(s.videoRoot,{[s.noDisplay]:!n})},G.a.createElement("video",{className:z()(s.video),controls:!0,autoPlay:!1,ref:this.videoRef}));return G.a.createElement("div",{style:this.styles.root},G.a.createElement(Ce.a,{in:!n},r),G.a.createElement(Ce.a,{in:n},h),G.a.createElement("div",{className:z()(s.previewActions,{[s.noDisplay]:!n})},G.a.createElement(i.a,{disabled:l,color:"primary",onClick:this.handleUploadVideo}," ",t("videGallery.saveButton")," "),G.a.createElement(i.a,{onClick:this.togglePreview}," ",t("videGallery.backButton")," ")))}}const Ie=Object(H.c)("translations")(Oe);var Ne=Object(F.connect)((e=>{const t=e.getIn(["authorize","uid"]),a=Se.a.getUserProfileById(e,{userId:t}).toJS();return{videos:e.getIn(["imageGallery","videos"],Object(we.Map)({})),avatar:a?a.avatar:""}}),(e=>({uploadVideo:(t,a,s)=>e(le.u(t,a,s)),deleteVideo:t=>e(le.k(t)),getVideoGallery:()=>e(le.p()),showError:t=>e(ne.s(t))})))(Object(v.a)((e=>({fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},gridList:{width:500,height:450,overflowY:"auto"},noDisplay:{display:"none !important"},video:{width:"100%",height:"100%",position:"absolute",top:0,left:0},videoRoot:{position:"relative",padding:"39.25%",width:"100%",height:"100%"},previewActions:{justifyContent:"space-between",display:"flex",marginTop:10,width:"100%",height:"100%"}})))(Ie)),Le=a(75),Re=a(574),Te=a(206),De=a(37),Ae=a(179),We=a(121);const Me=e=>({openAlbum:()=>e(ne.n(Ae.a.Album)),closeAlbum:()=>e(ne.c(Ae.a.Album)),post:(t,a)=>e(De.g(t,a)),update:(t,a)=>e(De.m(t,a)),uploadImage:(t,a)=>e(le.t(t,a))}),Ve=()=>{const e=he.a.selectCurrentUser(),t=We.a.selectDialogState(),a=We.a.selectProgress();return s=>{const i=e(s).toJS(),o=t(s,{type:Ae.a.Album}),n=a(s);return{postImageState:s.getIn(["imageGallery","status"]),ownerAvatar:i.avatar||"",ownerDisplayName:i.fullName||"",albumDialogOpen:o,progress:n}}};var Ue=a(507);class je extends B.Component{constructor(e){super(e),this.selectedPhotos=[],this.handleToggleComments=()=>{this.setState((e=>({disableSharing:!e.disableComments,disabledPost:!this.isPostChangeValid(e)})))},this.handleToggleSharing=()=>{this.setState((e=>({disableSharing:!e.disableSharing,disabledPost:!this.isPostChangeValid(e)})))},this.handleTogglePermission=()=>{this.setState((e=>({permissionOpen:!e.permissionOpen,disabledPost:!this.isPostChangeValid(e)})))},this.handleRemoveImage=()=>{this.setState((e=>({image:"",video:"",imageFullPath:"",postType:Te.a.Text,disabledPost:!this.isPostChangeValid(e)})))},this.closeAlbumDialog=()=>{const e=this.props.closeAlbum;e&&e()},this.openAlbumDialog=()=>{const e=this.props.openAlbum;e&&e()},this.handlePost=()=>{this.setState({disabledPost:!1});const e=this.state,t=e.image,a=e.imageFullPath,i=e.disableComments,o=e.disableSharing,n=e.postText,l=e.video,r=e.thumbnail,h=e.postType,c=e.accessUserList,d=e.permission,p=e.galleryOpen,m=e.selectedPhotos,g=this.props,u=g.ownerAvatar,b=g.ownerDisplayName,f=g.edit,v=g.onRequestClose,y=g.post,C=g.update,E=g.postModel,x=g.progress;if(!this.isPostChangeValid(this.state))return void this.setState({disabledPost:!0});const w=V.b(n),S=new Re.a;p&&x&&m.forEach((e=>{const t=x.getIn([e.fileName,"meta"]);let a="";a=t?t.url:e.src,S.photos.push(a)}));const k={body:n,tags:w,image:t,video:l,thumbnail:r,imageFullPath:a,ownerAvatar:u,ownerDisplayName:b,disableComments:i,disableSharing:o,postTypeId:h,score:0,album:Object(s.a)({},S),viewCount:0,accessUserList:c,permission:d};if(f){if(E&&C){C(E.set("body",n).set("tags",Object(we.List)(w)).set("image",t).set("imageFullPath",a).set("video",l).set("album",Object(we.fromJS)(Object(s.a)({},S))).set("thumbnail",r).set("disableComments",i).set("disableSharing",o).set("postTypeId",h).set("accessUserList",Object(we.List)(c)).set("permission",d),v)}}else y&&y(k,v)},this.onRequestSetImage=e=>{this.setState({image:e,video:"",postType:Te.a.Photo,disabledPost:!1})},this.onSetVideo=(e,t)=>{this.setState({image:"",thumbnail:t,video:e,postType:Te.a.Video,disabledPost:!1})},this.handleOnChange=e=>{const t=e.target.value;this.setState({postText:t}),0===t.length||""===t.trim()||this.props.edit&&t.trim()===this.props.text?this.setState({postText:t,disabledPost:!0}):this.setState({postText:t,disabledPost:!1})},this.handleCloseGallery=()=>{this.setState({galleryOpen:!1})},this.handleOpenGallery=()=>{this.setState({galleryOpen:!0})},this.handleOpenVideoLink=()=>{this.setState({videoLinkOpen:!0})},this.handleCloseVideoLink=()=>{this.setState({videoLinkOpen:!1})},this.handleOpenVideoGallery=()=>{this.setState({videoGalleryOpen:!0})},this.handleCloseVideoGallery=()=>{this.setState({videoGalleryOpen:!1})},this.handleOpenMenu=e=>{this.setState({menuOpen:!0,menuAnchorEl:e.currentTarget})},this.handleCloseMenu=()=>{this.setState({menuOpen:!1,menuAnchorEl:null})},this.handleAccessList=(e,t)=>{this.setState({accessUserList:e,permission:t,permissionOpen:!1})},this.handleDeletePhoto=e=>{const t=this.state,a=t.selectedPhotos,s=t.postText,i=[];a.forEach((t=>{e!==t.fileName&&i.push(t)}));let o=!0;const n=0===s.length||""===s.trim()||this.props.edit&&s.trim()===this.props.text;(i&&i.length>0||!n)&&(o=!1),this.setState({selectedPhotos:[...i],disabledPost:o})},this.onUploadAlbumChange=e=>{const t=this.props.uploadImage,a=this.state,s=a.galleryOpen,i=a.selectedPhotos;if(t){const a=e.currentTarget.files,o=[];for(let e=0;e<a.length;e++){const s=a[e],i=M.a.getExtension(s.name),n="".concat(Pe()(),".").concat(i);o.push({src:URL.createObjectURL(s),fileName:n}),t(s,n)}const n=[...i,...o];a.length>3&&!s?(this.selectedPhotos=n.map((e=>({file:e.src,fileName:e.fileName}))),this.openAlbumDialog()):this.setState({selectedPhotos:[...n],galleryOpen:!0,disabledPost:!1,postType:Te.a.PhotoGallery}),e.currentTarget.value=null}},this.isPostChangeValid=e=>{const t=e.image,a=e.video,s=e.postText,i=e.selectedPhotos;return!U.a.isEmpty(t)||!U.a.isEmpty(a)||!U.a.isEmpty(s)||i&&i.length>0},this.getPermissionLabel=()=>{const e=this.props.t,t=this.state.permission;let a="";return t===Le.a.Public?a=e("permission.public"):t===Le.a.Circles?a=e("permission.circles"):t===Le.a.OnlyMe&&(a=e("permission.onlyMe")),a};const t=e.postModel,a=t&&t.getIn(["album","photos"],Object(we.List)([])),i=e.edit&&t&&t.get("postTypeId",0)===Te.a.PhotoGallery?a.map((e=>Object(we.Map)({src:e,fileName:e,loaded:!0}))).toJS():[],o=!!(this.props.edit&&i&&i.length>0);this.state={postText:this.props.edit&&t?t.get("body",""):"",image:this.props.edit&&t?t.get("image",""):"",imageFullPath:this.props.edit&&t?t.get("imageFullPath",""):"",galleryOpen:o,menuOpen:!1,disabledPost:!0,disableComments:!(!this.props.edit||!t)&&t.get("disableComments",!1),disableSharing:!(!this.props.edit||!t)&&t.get("disableSharing",!1),videoLinkOpen:!1,videoGalleryOpen:!1,permissionOpen:!1,video:this.props.edit&&t?t.get("video",""):"",thumbnail:this.props.edit&&t?t.get("thumbnail",""):"",postType:this.props.edit&&t?t.get("postTypeId",Te.a.Text):Te.a.Text,accessUserList:this.props.edit&&t?t.get("accessUserList",[]):[],permission:this.props.edit&&t?t.get("permission",Le.a.Public):Le.a.Public,selectedPhotos:i,album:this.props.edit&&t?t.get("album",Object(we.Map)({photos:Object(we.List)([])})):Object(we.Map)({photos:Object(we.List)([])})},this.handleOnChange=this.handleOnChange.bind(this),this.handleCloseGallery=this.handleCloseGallery.bind(this),this.handleOpenGallery=this.handleOpenGallery.bind(this),this.onRequestSetImage=this.onRequestSetImage.bind(this),this.handlePost=this.handlePost.bind(this),this.handleRemoveImage=this.handleRemoveImage.bind(this),this.handleToggleComments=this.handleToggleComments.bind(this),this.handleToggleSharing=this.handleToggleSharing.bind(this),this.handleTogglePermission=this.handleTogglePermission.bind(this),this.isPostChangeValid=this.isPostChangeValid.bind(this),this.getPermissionLabel=this.getPermissionLabel.bind(this),this.onUploadAlbumChange=this.onUploadAlbumChange.bind(this),this.handleDeletePhoto=this.handleDeletePhoto.bind(this)}render(){const e=this.props,t=e.classes,a=e.t,s=e.progress,v=e.albumDialogOpen,x=this.state,S=x.menuOpen,P=x.videoLinkOpen,I=x.image,L=x.postType,T=x.galleryOpen,A=x.selectedPhotos,M=x.thumbnail,V=x.permissionOpen,U=x.permission,j=x.menuAnchorEl,B=void 0!==v&&v,F=G.a.createElement("div",null,G.a.createElement(C.a,{id:"tooltip-icon",title:a("post.moreTooltip"),placement:"bottom-start"},G.a.createElement(u.a,{onClick:this.handleOpenMenu},G.a.createElement(k.a,null))),G.a.createElement(b.a,{open:S,anchorEl:j,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleCloseMenu},G.a.createElement(f.a,{onClick:this.handleToggleComments,style:{fontSize:"14px"}},this.state.disableComments?a("post.enableComments"):a("post.disableComments")," "),G.a.createElement(f.a,{onClick:this.handleToggleSharing,style:{fontSize:"14px"}},(this.state.disableSharing,a("post.disableSharing"))))),q=G.a.createElement(ve.a,{fullName:this.props.ownerDisplayName||"",fileName:this.props.ownerAvatar||"",size:36}),H=G.a.createElement("div",{className:t.author},G.a.createElement("span",{style:{fontSize:"14px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"25px"}},"".concat(this.props.ownerDisplayName," |")),G.a.createElement("span",{onClick:this.handleTogglePermission,className:z()(t.permission,t.disableComponent)},"".concat(this.getPermissionLabel()))),X=I&&""!==I&&L===Te.a.Photo||M&&""!==M&&L===Te.a.Video?G.a.createElement("div",null,G.a.createElement("div",{style:{position:"relative",overflowY:"hidden",overflowX:"auto"}},G.a.createElement("ul",{style:{position:"relative",whiteSpace:"nowrap",padding:"0 0 0 16px",margin:"8px 0 0 0",paddingRight:"16px",verticalAlign:"bottom",flexShrink:0,listStyleType:"none"}},G.a.createElement("div",{style:{display:"flex",position:"relative"}},G.a.createElement("span",{onClick:this.handleRemoveImage,style:{position:"absolute",width:"28px",backgroundColor:"rgba(6, 6, 6, 0.82)",height:"28px",right:12,top:4,cursor:"pointer",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"}},G.a.createElement(R.a,{style:{color:"rgba(239, 235, 235, 0.83)"}})),G.a.createElement("span",{className:z()(t.playVideo,{[t.noDisplay]:L!==Te.a.Video}),style:{}},G.a.createElement(N.a,{className:t.playIcon})),G.a.createElement("div",{style:{display:"inline-block",width:"100%",marginRight:"8px",transition:"transform .25s"}},G.a.createElement("li",{style:{width:"100%",margin:0,verticalAlign:"bottom",position:"static"}},G.a.createElement(_.a,{fileName:L===Te.a.Photo?I:M,style:{width:"100%",height:"auto"}}))))))):"";return G.a.createElement("div",{style:this.props.style},this.props.children,G.a.createElement(h.a,{BackdropProps:{className:t.backdrop},PaperProps:{className:t.fullPageXs},key:this.props.id||0,open:this.props.open,onClose:this.props.onRequestClose},G.a.createElement(p.a,{className:t.dialogTitle},G.a.createElement(l.a,{title:H,avatar:q,action:F})),G.a.createElement(d.a,{className:t.content,style:{paddingTop:0}},G.a.createElement(o.a,{elevation:0},G.a.createElement(n.a,null,G.a.createElement(g.a,{item:!0,xs:12},G.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},G.a.createElement("div",{style:{position:"relative",flexDirection:"column",display:"flex",flexGrow:1,overflowY:"auto",maxHeight:"300px"}},G.a.createElement(y.a,{autoFocus:!0,value:this.state.postText,onChange:this.handleOnChange,placeholder:a("post.textareaPlaceholder"),multiline:!0,rows:2,rowsMax:4,style:{fontWeight:400,fontSize:"14px",margin:"0 16px",flexShrink:0,width:"initial",flexGrow:1}}),X,T&&G.a.createElement(fe,{photos:A,progress:s,onDelete:this.handleDeletePhoto}))))))),G.a.createElement(c.a,{className:t.iconButtonsRoot},G.a.createElement("div",{style:{flexShrink:0,boxFlex:0,flexGrow:0,maxHeight:"48px",width:"100%"}},G.a.createElement("div",{style:{flexDirection:"row",display:"flex"}},G.a.createElement("input",{accept:"image/*",className:t.input,id:"album-button-file",multiple:!0,onChange:this.onUploadAlbumChange,type:"file"}),G.a.createElement("div",{style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},G.a.createElement("span",{style:{top:"15px",display:"block",position:"relative",cursor:"pointer"}},G.a.createElement("label",{htmlFor:"album-button-file"},G.a.createElement(O.a,{style:{color:"grey"}})))),G.a.createElement("div",{onClick:this.handleOpenVideoLink,style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},G.a.createElement("span",{style:{top:"12px",display:"block",position:"relative",cursor:"pointer"}},G.a.createElement(D.a,{style:{color:"grey",width:30,height:30}}))),G.a.createElement("div",{className:t.disableComponent,onClick:this.handleOpenVideoGallery,style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},G.a.createElement("span",{style:{top:"14px",display:"block",position:"relative",cursor:"pointer"}},G.a.createElement(W.a,{style:{color:"grey",width:24,height:24}})))))),G.a.createElement(c.a,null,G.a.createElement(i.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.props.onRequestClose,style:{color:r.a[800]}},a("post.cancelButton")),G.a.createElement(i.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.handlePost,disabled:this.state.disabledPost},this.props.edit?a("post.updateButton"):a("post.postButton")))),B&&s?G.a.createElement(Z.a,{open:B,progress:s,photos:this.selectedPhotos,onClose:this.closeAlbumDialog}):"",G.a.createElement(h.a,{PaperProps:{className:z()(t.fullPageXs,t.videoGallery)},open:this.state.videoGalleryOpen,onClose:this.handleCloseVideoGallery},G.a.createElement(c.a,{className:t.galleryActions},G.a.createElement(E.a,{variant:"h6",component:"div",className:t.galleryDialogTitle},G.a.createElement(W.a,{style:{color:"rgb(230, 35, 35)",margin:"0 10px",width:24,height:24}}),a("post.videoGalleryLabel")),G.a.createElement(u.a,{onClick:this.handleCloseVideoGallery},G.a.createElement(w.a,null))),G.a.createElement(m.a,{className:t.devider}),G.a.createElement(d.a,null,G.a.createElement(Ne,{set:this.onSetVideo,close:this.handleCloseVideoGallery}))),G.a.createElement(J,{open:P,onClose:this.handleCloseVideoLink,onAddLink:this.onSetVideo}),G.a.createElement(ye.a,{onClose:this.handleTogglePermission,open:V,onAddAccessList:this.handleAccessList,access:U}))}}const ze=Object(H.c)("translations")(je);var Be;t.a=(Be=Object(v.a)((e=>Object(Ue.a)({fullPageXs:{minWidth:500,maxWidth:500,maxHeight:540,[e.breakpoints.down("xs")]:{minWidth:"100%",maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",margin:0,overflowY:"auto"}},backdrop:{top:0,left:0,width:"100%",height:"100%",position:"fixed",willChange:"opacity",backgroundColor:"rgba(251, 249, 249, 0.5)",WebkitTapHighlightColor:"transparent"},input:{},content:{padding:0,paddingTop:0},dialogRoot:{paddingTop:0},popperOpen:{zIndex:10},popperClose:{pointerEvents:"none",zIndex:0},author:{paddingRight:70},dialogTitle:{padding:0},iconButtonsRoot:{justifyContent:"flex-start",margin:"0px 4px"},playVideo:{position:"absolute",right:"45%",top:"45%",cursor:"pointer",backgroundColor:"#f1efeca3",borderRadius:"50%",height:60,padding:0},playIcon:{width:60,height:60,fill:"red"},noDisplay:{display:"none"},playIconButtonRoot:{width:60,height:60},galleryActions:{margin:0,background:"#fff",WebkitBoxSizing:"border-box",boxSizing:"border-box",height:56,textAlign:"center",padding:4,minWidth:0,display:"flex",flexDirection:"row",justifyContent:"space-between"},galleryDialogTitle:{color:"#676767"},galleryDialogIcon:{},galleryAction:{margin:0,padding:0,minWidth:0},devider:{marginBottom:10},videoGallery:{},permission:{fontWeight:400,fontSize:"14px",cursor:"pointer",color:"blue"},disableComponent:{opacity:"0.2","pointer-events":"none"}})))(ze),Object(F.connect)(Ve,Me)(Be))},577:function(e,t,a){"use strict";var s=a(1153),i=a(854),o=a(1160),n=a(1154),l=a(1169),r=a(763),h=a(504),c=a(512),d=a(283),p=a(1136),m=a(15),g=a(676),u=a.n(g),b=a(614),f=a.n(b),v=a(675),y=a.n(v),C=a(527),E=a.n(C),x=a(575),w=a.n(x),S=a(615),k=a.n(S),P=a(150),O=a.n(P),I=a(0),N=a.n(I),L=a(4),R=a(1177),T=a(828),D=a(1155),A=a(687),W=a(310),M=a(502),V=a(471),U=a(47),j=a(470),z=a(468),B=a(467),G=a(204),F=a(51),q=a.n(F),H=a(178),X=a(59),Y=a(97),J=a(573),Z=a.n(J),_=a(92),K=a(35),Q=a(46);const $=()=>({textField:{fontWeight:400,fontSize:"14px ",width:"100%",margin:0,WebkitBoxShadow:"none",boxShadow:"none",borderColor:"transparent",height:38,border:"1px solid #000",resize:"none"},header:{padding:"2px 3px 3px 10px"},popperOpen:{zIndex:11},popperClose:{pointerEvents:"none",zIndex:0},iconButton:{top:0,display:"flex",right:4,flexDirection:"row-reverse",position:"absolute"},commentBody:{color:"black",fontWeight:400,fontSize:"12px",height:"100%",border:"none",width:"100%",outline:"none",resize:"none"},rightIconMenuItem:{fontSize:12,fontWeight:300,paddingLeft:6,paddingRight:6,paddingTop:0,paddingBottom:0},moreIcon:{width:"0.6em",height:"0.6em"},menuRoot:{marginTop:7,marginRight:7}});var ee=a(18);const te=(e,t)=>({delete:(t,a)=>e(_.f(t,a)),update:t=>{e(_.h(t))},openEditor:()=>e(_.k({id:t.comment.get("id","0"),postId:t.comment.get("postId")})),closeEditor:()=>e(_.d(t.comment.get("postId"),t.comment.get("id","0"))),getUserInfo:()=>e(K.k(t.comment.get("ownerUserId","0"),""))}),ae=()=>{const e=ee.a.selectCurrentUser(),t=Q.a.selectUserProfileById();return(a,s)=>{const i=s.comment.get("ownerUserId","0"),o=e(a),n=o.get("userId","0");return{uid:n,avatar:s.comment.get("ownerAvatar","0"),fullName:o.get("ownerDisplayName","loading..."),isCommentOwner:n===i,commentOwner:t(a,{userId:i})}}};var se=a(138);class ie extends I.Component{constructor(e){super(e),this.buttonMenu=null,this.styles={author:{fontSize:"10px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"},textarea:{fontWeight:400,fontSize:"14px",border:"none",width:"100%",outline:"none",resize:"none"},cancel:{float:"right",clear:"both",zIndex:5,margin:"0px 5px 5px 0px",fontWeight:400}},this.textareaRef=void 0,this.divCommentRef=void 0,this.inputText=void 0,this.divComment=void 0,this.handleEditComment=()=>{this.setState({openMenu:!1});const e=this.props.openEditor;e&&e()},this.handleCancelEdit=()=>{const e=this.props.closeEditor,t=this.state.initialText;t&&this.setState({text:t}),e&&e()},this.handleUpdateComment=()=>{const e=this.props.comment.set("text",this.state.text),t=this.props.update;t&&t(e),this.setState({initialText:this.state.text})},this.handleOnChange=e=>{const t=e.target.value;0===t.length||""===t.trim()||t.trim()===this.state.initialText?this.setState({text:t,editDisabled:!0}):this.setState({text:t,editDisabled:!1})},this.handleDelete=(e,t,a)=>{this.props.delete&&this.props.delete(t,a)},this.handleCommentMenu=e=>{this.setState({openMenu:!0,anchorEl:e.currentTarget})},this.handleCloseCommentMenu=()=>{this.setState({openMenu:!1})},this.textareaRef=e=>{this.inputText=e},this.divCommentRef=e=>{this.divComment=e},this.state={text:this.props.comment.get("text",""),initialText:this.props.comment.get("text",""),editDisabled:!0,isPostOwner:!1,openMenu:!1,anchorEl:null},this.handleDelete=this.handleDelete.bind(this),this.handleUpdateComment=this.handleUpdateComment.bind(this),this.handleOnChange=this.handleOnChange.bind(this),this.handleCancelEdit=this.handleCancelEdit.bind(this),this.handleEditComment=this.handleEditComment.bind(this)}componentDidMount(){const e=this.props,t=e.commentOwner,a=e.isCommentOwner,s=e.getUserInfo;a||t||!s||s()}render(){const e=this.props,t=e.comment,a=e.classes,i=e.t,o=e.editorStatus,l=this.state,r=l.openMenu,c=l.anchorEl;if(!i||!t)return N.a.createElement("div",null);const d=N.a.createElement("div",{className:a.menuRoot},this.props.isCommentOwner&&N.a.createElement(h.a,{buttonRef:e=>{this.buttonMenu=e},"aria-owns":Object(se.a)(r,!1)?"comment-menu":"","aria-haspopup":"false",onClick:this.handleCommentMenu},N.a.createElement(E.a,{className:a.moreIcon})),N.a.createElement(z.a,{open:Object(se.a)(r,!1),anchorEl:c,anchorReference:"anchorEl",anchorPosition:{top:0,left:0},onClose:this.handleCloseCommentMenu,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},N.a.createElement(j.a,{role:"menu"},this.props.isCommentOwner?N.a.createElement(p.a,{className:a.rightIconMenuItem,onClick:this.handleEditComment},i("comment.editButton")):"",this.props.isCommentOwner||this.props.isPostOwner?N.a.createElement(p.a,{className:a.rightIconMenuItem,onClick:e=>this.handleDelete(e,t.get("id","0"),t.get("postId","0"))},i("comment.deleteButton")):""))),m=()=>N.a.createElement("div",null,N.a.createElement(H.a,{to:"/".concat(g)}," ",N.a.createElement("span",{style:this.styles.author},t.get("ownerDisplayName","Loading..."))),N.a.createElement("span",{style:{fontWeight:400,fontSize:"8px"}},q()(t.get("creationDate",0)).local().fromNow())),g=t.get("ownerUserId"),u=N.a.createElement("div",{style:{outline:"none",flex:"auto",flexGrow:1}},o?N.a.createElement(B.a,{placeholder:i("comment.updateCommentPlaceholder"),autoFocus:!0,rowsMax:"4",value:this.state.text,onChange:this.handleOnChange,className:a.textField}):N.a.createElement("div",{className:O()("animate2-top10",a.commentBody)},this.state.text),N.a.createElement("div",{style:{display:o?"flex":"none",flexDirection:"row-reverse"}},N.a.createElement(T.a,{color:"primary",disabled:this.state.editDisabled,style:{float:"right",clear:"both",zIndex:5,margin:"0px 5px 5px 0px",fontWeight:400},onClick:this.handleUpdateComment}," ",i("comment.updateButton")," "),N.a.createElement(T.a,{color:"primary",style:this.styles.cancel,onClick:this.handleCancelEdit}," ",i("comment.cancelButton")," ")));return N.a.createElement("div",{className:"animate-top",key:t.get("id","0")},N.a.createElement(W.a,{elevation:0,className:"animate2-top10",style:{position:"relative",padding:"",display:this.state.display?"none":"block"}},N.a.createElement(s.a,{elevation:0},N.a.createElement(n.a,{className:a.header,title:o?"":N.a.createElement(m,null),subheader:u,avatar:N.a.createElement(H.a,{to:"/".concat(g)},N.a.createElement(G.a,{fullName:t.get("ownerDisplayName",""),fileName:t.get("ownerAvatar",""),size:24})),action:!this.props.isCommentOwner&&!this.props.isPostOwner&&this.props.disableComments||o?"":d}))))}}var oe=(e=>{const t=Object(Y.c)("translations")(e);return Object(X.connect)(ae,te)(Z()($)(t))})(ie);class ne extends I.Component{constructor(e){super(e),this.commentList=()=>{const e=Object(L.Map)(this.props.comments),t=Object(L.Map)(this.props.commentsEditorStatus);if(!e.isEmpty()){const a=U.c(e.valueSeq()),s=[];return a.forEach((e=>{s.push(N.a.createElement(oe,{key:e.get("id"),comment:e,isPostOwner:this.props.isPostOwner,disableComments:this.props.disableComments,editorStatus:t.get(e.get("id","0"),!1)}))})),s}},this.state={}}render(){const e=this.props,t=e.classes,a=e.postId;return N.a.createElement(V.a,{key:"comment-list-".concat(a),className:t.list},this.commentList())}}var le=Object(X.connect)(((e,t)=>({commentsEditorStatus:e.getIn(["comment","editorStatus",t.postId],{})})),(()=>({})))(Object(m.a)((()=>({list:{width:"100%",maxHeight:290,overflowY:"auto",overflowX:"visible"}})))(ne)),re=a(17),he=a(122);class ce extends he.a{constructor(...e){super(...e),this.id=void 0,this.postId=void 0,this.text=void 0,this.score=void 0,this.creationDate=void 0,this.ownerDisplayName=void 0,this.ownerAvatar=void 0,this.ownerUserId=void 0}}var de=a(519),pe=a(43),me=a(32);const ge=()=>({textField:{fontWeight:400,fontSize:"14px"},header:{padding:"2px 3px 3px 10px"},commentBody:{color:"black",fontWeight:400,fontSize:"12px",height:"100%",border:"none",width:"100%",outline:"none",resize:"none",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},author:{fontSize:"10px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"},noUnderline:{display:"none"},postButton:{flexDirection:"row-reverse"},cardHeaderContent:{flex:"1 1 auto",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),ue=e=>({send:t=>{e(_.e(t))}}),be=()=>{const e=ee.a.selectCurrentUser(),t=de.a.selectRequest();return(a,s)=>{const i=s.postId,o=pe.a.createServerRequestId(me.a.CommentGetComments,i),n=e(a),l=t(a,{requestId:o});return{commentsRequestStatus:l?l.status:re.a.NoAction,uid:n.get("userId",""),avatar:n.get("avatar",""),fullName:n.get("fullName","")}}};class fe extends I.Component{constructor(e){super(e),this.styles={commentItem:{height:"60px",position:"",zIndex:""},toggleShowList:{height:"60px",zIndex:5},writeCommentTextField:{width:"100%",fontWeight:400,fontSize:"14px"},progressbar:{height:"1.5px",backgroundColor:"rgb(245, 243, 243)",color:D.a.A400},secondaryText:{fontSize:"13px",lineHeight:"20px",color:"rgba(0,0,0,0.87)",fontWeight:300,whiteSpace:"pre-wrap"},primaryText:{fontSize:"13px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"}},this.clearCommentWrite=()=>{this.setState({commentText:"",postDisable:!0})},this.handlePostComment=()=>{const e=this.props,t=e.postId,a=e.fullName,s=e.avatar,i=e.uid,o=e.send,n=new ce;n.postId=t,n.text=this.state.commentText,n.ownerAvatar=s,n.ownerDisplayName=a,n.ownerUserId=i,o&&o(Object(L.Map)(n)),this.clearCommentWrite()},this.handleChange=e=>{const t=e.target.value;this.setState({commentText:t}),0===t.length||""===t.trim()?this.setState({commentText:"",postDisable:!0}):this.setState({commentText:t,postDisable:!1})},this.commentWriteBox=()=>{const e=this.props,t=e.classes,a=e.postId,o=e.fullName,l=e.avatar,r=e.t;return r?N.a.createElement("div",null,N.a.createElement(A.a,null),N.a.createElement(W.a,{key:a+"-commentwrite",elevation:0,className:"animate2-top10"},N.a.createElement(s.a,{elevation:0},N.a.createElement(n.a,{className:t.header,avatar:N.a.createElement(G.a,{fullName:o,fileName:l,size:24}),subheader:N.a.createElement(M.a,{autoFocus:!0,placeholder:r("comment.addCommentPlaceholder"),multiline:!0,rowsMax:"4",InputProps:{disableUnderline:!0,autoFocus:!0,fullWidth:!0},value:this.state.commentText,onChange:this.handleChange,className:t.textField,fullWidth:!0})}),N.a.createElement(i.a,{className:t.postButton},N.a.createElement(T.a,{color:"primary",disabled:this.state.postDisable,onClick:this.handlePostComment},r("comment.postButton")))))):N.a.createElement("div",null)},this.loadCommentsList=()=>{const e=this.props,t=e.postId,a=e.open,s=this.props.comments||Object(L.Map)({});return s&&s.size>0?N.a.createElement(W.a,{elevation:0,style:a?{display:"block",padding:"0px 0px"}:{display:"none",padding:"12px 16px"}},N.a.createElement(le,{comments:s,isPostOwner:this.props.isPostOwner,disableComments:this.props.disableComments,postId:t})):""},this.state={commentText:"",postDisable:!0},this.handlePostComment=this.handlePostComment.bind(this),this.clearCommentWrite=this.clearCommentWrite.bind(this),this.commentWriteBox=this.commentWriteBox.bind(this),this.loadCommentsList=this.loadCommentsList.bind(this)}shouldComponentUpdate(e,t){let a=!1;return R.a(this.state,t)?(e.open!==this.props.open||e.disableComments!==this.props.disableComments||e.commentsRequestStatus!==this.props.commentsRequestStatus||e.comments!==this.props.comments)&&(a=!0):a=!0,a}render(){const e=this.props,t=e.postId,a=e.open,s=e.comments,i=e.commentsRequestStatus,o=N.a.createElement(c.a,{style:this.styles.progressbar,variant:"indeterminate"});return N.a.createElement("div",{key:t+"-comments-group"},s&&s.size>0&&N.a.createElement(A.a,null),N.a.createElement("div",{style:a?{display:"block"}:{display:"none"}},N.a.createElement(W.a,{elevation:0,className:"animate-top",style:a?{display:"none"}:{display:"block"}},N.a.createElement("div",{style:{position:"relative",height:"60px"}},N.a.createElement(T.a,{style:this.styles.toggleShowList,fullWidth:!0,onClick:this.props.onToggleRequest}," ")))),a?i===re.a.Sent?o:this.loadCommentsList():"",!this.props.disableComments&&a?this.commentWriteBox():"")}}var ve=(e=>{const t=Object(Y.c)("translations")(e);return Object(X.connect)(be,ue)(Z()(ge)(t))})(fe),ye=a(524),Ce=a(553),Ee=a(961),xe=a(295),we=a.n(xe),Se=a(29);class ke extends I.Component{constructor(e){super(e),this.state={expanded:!1,truncated:!1},this.toggleLines=this.toggleLines.bind(this)}toggleLines(e){e.preventDefault(),this.setState({expanded:!this.state.expanded})}render(){const e=this.props,t=e.children,a=e.lines,s=e.classes,i=e.body;if(void 0===a)return Se.a.error("render/undefineProps/lines"),N.a.createElement("div",null);const o=this.state.expanded,n=N.a.createElement("div",{onClick:this.toggleLines,className:O()(s.root,{[s.expanded]:!o})},N.a.createElement(Ee.a,{in:o,collapsedHeight:"173px"},t));return(pe.a.isEmpty(i)?0:pe.a.getNumberOfLines(i))>a?n:t}}ke.defaultProps={lines:3,more:"Read more",less:"Show less"};var Pe=we()((()=>({root:{position:"relative"},expanded:{"&:before":{content:"",float:"left",width:5,height:"100%"},"&:after":{content:'"\\002026"',fontSize:34,fontWeight:500,color:"#4285f4",boxSizing:"content-box",float:"right",position:"absolute",top:150,left:"100%",height:20,width:"2em",marginLeft:"-2em",paddingRight:5,textAlign:"right",background:"linear-gradient(to right,rgba(255,255,255,0),white 50%,white)",cursor:"pointer"}}})))(ke),Oe=a(1138),Ie=a(1137),Ne=a(510),Le=a(176),Re=a(663),Te=a.n(Re),De=a(1161),Ae=a(1162),We=a(1163),Me=a(1164),Ve=a(1165),Ue=a(1166),je=a(1167),ze=a(1168);class Be extends I.Component{constructor(e){super(e),this.state={}}render(){const e=this.props,t=e.classes,a=e.t,s=e.shareOpen,i=e.onClose,o=e.openCopyLink,n=e.post,l=e.onCopyLink;return N.a.createElement(Oe.a,{className:t.fullPageXs,title:"Share On",open:s,onClose:i},N.a.createElement(W.a,{className:t.shareLinkPaper},o?N.a.createElement("div",null,N.a.createElement(M.a,{autoFocus:!0,fullWidth:!0,id:"text-field-default",defaultValue:"".concat(window.location.origin,"/").concat(n.get("ownerUserId"),"/posts/").concat(n.get("id"))}),N.a.createElement(Le.a,{className:O()("animate-top",t.clipboard),variant:"h5",component:"h2"},"Link has been copied to clipboard ...")):N.a.createElement(j.a,null,N.a.createElement("div",null,N.a.createElement(De.a,{onShareWindowClose:i,url:"".concat(window.location.origin,"/").concat(n.get("ownerUserId"),"/posts/").concat(n.get("id")),quote:n.get("body"),hashtag:n.get("tags",Object(L.List)([])).count()>0?"#".concat(n.getIn(["tags",0],"hashtag")):null},N.a.createElement(p.a,null,N.a.createElement(Ie.a,{classes:{root:t.networkShare}},N.a.createElement(Ae.a,{size:32,round:!0})),N.a.createElement(Ne.a,{inset:!0,primary:a("post.facebookButton")})))),N.a.createElement("div",null,N.a.createElement(We.a,{onShareWindowClose:i,url:"".concat(window.location.origin,"/").concat(n.get("ownerUserId"),"/posts/").concat(n.get("id")),quote:n.get("body"),hashtag:"#".concat(n.getIn(["tags",0],""))},N.a.createElement(p.a,null,N.a.createElement(Ie.a,{classes:{root:t.networkShare}},N.a.createElement(Me.a,{size:32,round:!0})),N.a.createElement(Ne.a,{inset:!0,primary:a("post.twitterButton")})))),N.a.createElement("div",null,N.a.createElement(Ve.a,{onShareWindowClose:i,url:"".concat(window.location.origin,"/").concat(n.get("ownerUserId"),"/posts/").concat(n.get("id")),quote:n.get("body"),hashtag:"#".concat(n.getIn(["tags",0],""))},N.a.createElement(p.a,null,N.a.createElement(Ie.a,{classes:{root:t.networkShare}},N.a.createElement(Ue.a,{size:32,round:!0})),N.a.createElement(Ne.a,{inset:!0,primary:a("post.linkedinButton")})))),N.a.createElement("div",null,N.a.createElement(je.a,{onShareWindowClose:i,url:"".concat(window.location.origin,"/").concat(n.get("ownerUserId"),"/posts/").concat(n.get("id")),quote:n.get("body"),hashtag:"#".concat(n.getIn(["tags",0],""))},N.a.createElement(p.a,null,N.a.createElement(Ie.a,{classes:{root:t.networkShare}},N.a.createElement(ze.a,{size:32,round:!0})),N.a.createElement(Ne.a,{inset:!0,primary:a("post.googlePlusButton")})))),N.a.createElement(p.a,{onClick:l},N.a.createElement(Ie.a,null,N.a.createElement(Te.a,null)),N.a.createElement(Ne.a,{inset:!0,primary:a("post.copyLinkButton")})))))}}const Ge=Object(Y.c)("translations")(Be);var Fe=Object(X.connect)((()=>({})),(()=>({})))(Object(m.a)((e=>({image:{verticalAlign:"top",maxWidth:"100%",minWidth:"100%",width:"100%"},clipboard:{fontSize:"18px",textAlign:"center",marginTop:"10px",color:"#1e882d",fontWeight:400},networkShare:{width:"100%",height:"100%"},fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},shareLinkPaper:{minHeight:80,padding:10,minWidth:460}})))(Ge)),qe=a(664),He=a.n(qe),Xe=a(75),Ye=a(206),Je=a(665),Ze=a.n(Je);class _e extends I.Component{constructor(e){super(e),this.handleClick=(e,t)=>{const a=this.props.onClick;a&&a(e,t)},this.state={}}getData(){const e=this.props,t=e.classes,a=e.images,s=Math.floor(2*Math.random()+1);return a.length>1?N.a.createElement("div",{className:t.container},N.a.createElement("div",{className:O()({[t.firstColumn]:1===s},{[t.firstRow]:2===s})},N.a.createElement(l.a,{image:a[0].url,onClick:e=>this.handleClick(e,0),className:O()(t.mediaCard,t.featureCard)})),N.a.createElement("div",{className:O()({[t.column]:1===s},{[t.row]:2===s})},a.map(((e,a)=>0!==a?N.a.createElement(l.a,{key:a,onClick:e=>this.handleClick(e,a),image:e.url,className:t.mediaCard}):"")))):N.a.createElement(ye.a,{fileName:a[0].url,onClick:e=>this.handleClick(e,0)})}render(){const e=this.props.classes;return N.a.createElement("div",{className:e.mainContainer},this.getData())}}var Ke=Object(m.a)((()=>({mainContainer:{width:"100%"},container:{display:"flex",flexWrap:"wrap",marginTop:20,width:"100%",height:415,position:"relative"},firstRow:{flex:"100%",display:"flex",paddingBottom:1},row:{flex:"100%",display:"flex",marginTop:1,marginBottom:1},firstColumn:{flex:"50%",display:"flex",flexDirection:"column",paddingRight:1},column:{flex:"50%",display:"flex",flexDirection:"column",paddingLeft:1,paddingRight:2},mediaCard:{height:"100%",width:"100%",backgroundSize:"cover",margin:1}})))(_e),Qe=a(589),$e=a.n(Qe);class et extends I.Component{constructor(e){super(e),this.handleImageClick=(e,t)=>{t(e)},this.state={},this.handleImageClick=this.handleImageClick.bind(this)}shouldComponentUpdate(e){return!R.a(e.images,this.props.images)}render(){const e=this.props,t=e.classes,a=e.images,s=e.currentAlbum;if(a&&a.size>0){const e=[];a.valueSeq().forEach((t=>{e.push({src:t,url:t,id:t})}));const i=e.slice(0,4);return N.a.createElement($e.a,{images:e,renderImageFunc:e=>N.a.createElement("div",{className:t.root},N.a.createElement(Ke,{images:i,onClick:(t,a)=>this.handleImageClick(a,e)}),N.a.createElement("div",{className:O()(t.titleContainer,{[t.noDisplay]:!(s&&s.get("album").get("title"))})},N.a.createElement("div",{className:t.aboveContainer}),N.a.createElement("div",{className:t.bottomContainer}),N.a.createElement(H.a,{to:"/u/".concat(s&&s.get("ownerUserId"),"/album/").concat(s&&s.get("id"))},N.a.createElement(Le.a,{className:t.title},s&&s.get("album").get("title")))))})}return N.a.createElement("div",{className:t.noAlbum},N.a.createElement(Ze.a,{className:t.noAlbumIcon}))}}var tt=we()((e=>({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",position:"relative",backgroundColor:e.palette.background.paper},gridList:{width:500,height:450},subheader:{width:"100%"},descRoot:{bottom:0,left:0,position:"absolute",right:0,zIndex:1},topGradiant:{background:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.6))",height:32},shadow:{backgroundColor:"rgba(0,0,0,.6)",padding:24,textAlign:"center",verticalAlign:"middle"},albumTitle:{color:"white"},noDisplay:{display:"none"},noAlbum:{display:"flex",justifyContent:"center",alignItems:"center"},noAlbumIcon:{fontSize:50},aboveContainer:{background:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.6))",height:30},bottomContainer:{backgroundColor:"rgba(0,0,0,.6)",height:70},titleContainer:{position:"absolute",bottom:0,left:1,right:1,height:100},title:{textAlign:"center",fontSize:22,fontWeight:400,color:"white",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})))(et),at=a(666),st=a.n(at),it=a(667),ot=a.n(it),nt=a(673),lt=a.n(nt),rt=a(25),ht=a(177),ct=a(5),dt=a(37),pt=a(143),mt=a(26);const gt=(e,t)=>e.getIn(["comment","postComments",t.postId],Object(L.Map)({})),ut=()=>Object(mt.a)([gt],(e=>e)),bt=(e,t)=>{const a=t.post;return{vote:()=>e(pt.c(a.get("id"),a.get("ownerUserId"))),unvote:()=>e(pt.d(a.get("id"),a.get("ownerUserId"))),delete:t=>e(dt.h(t)),toggleDisableComments:t=>{e(dt.m(a.set("disableComments",t),(e=>e)))},toggleSharingComments:t=>{e(dt.m(a.set("disableSharing",t),(e=>e)))},goTo:t=>e(Object(ht.a)(t)),setHomeTitle:t=>e(ct.q(t||"")),getPostComments:(t,a,s,i)=>e(_.g(t,a,s,i))}},ft=()=>{const e=ee.a.selectCurrentUser(),t=ut();return(a,s)=>{const i=t(a,{postId:s.post.get("id")}),o=e(a).get("userId"),n=s.post.get("score",0),l=s.post.getIn(["votes",o],!1);return{commentList:i,avatar:s.post.get("ownerAvatar",""),fullName:s.post.get("ownerDisplayName",""),voteCount:n,currentUserVote:l,isPostOwner:o===s.post.get("ownerUserId")}}};class vt extends I.Component{constructor(e){super(e),this.styles={dialog:{width:"",maxWidth:"530px",borderRadius:"4px"}},this.handleOpenComments=()=>{const e=this.props,t=e.getPostComments,a=e.post;if(!a||!t)return;t(a.get("ownerUserId"),a.get("id"),0,10),this.setState({openComments:!this.state.openComments})},this.handleOpenPostWrite=()=>{this.closePostMenu(),this.setState({openPostWrite:!0})},this.handleClosePostWrite=()=>{this.setState({openPostWrite:!1})},this.handleDelete=()=>{const e=this.props.post;this.closePostMenu(),this.props.delete&&this.props.delete(e.get("id"))},this.openPostMenu=e=>{this.setState({postMenuAnchorEl:e.currentTarget,isPostMenuOpen:!0})},this.closePostMenu=()=>{this.setState({postMenuAnchorEl:null,isPostMenuOpen:!1})},this.handleCopyLink=()=>{const e=this.props.t;this.setState({openCopyLink:!0,shareTitle:e("post.copyLinkButton")})},this.handleOpenShare=()=>{const e=this.props.post;He()("".concat(window.location.origin,"/").concat(e.get("ownerUserId"),"/posts/").concat(e.get("id"))),this.setState({shareOpen:!0})},this.handleCloseShare=()=>{this.setState({shareOpen:!1,shareTitle:"Share On",openCopyLink:!1})},this.handleVote=()=>{const e=this.props,t=e.unvote,a=e.vote,s=e.currentUserVote;a&&t&&(s?t():a())},this.getOpenCommentGroup=e=>{this.setState({openCommentGroup:e})},this.onShowVideo=()=>{this.setState({showVideo:!0})},this.getPermissionLabel=()=>{const e=this.props,t=e.t,a=e.post.get("permission");let s="";return a===Xe.a.Public?s=t("permission.public"):a===Xe.a.Circles?s=t("permission.circles"):a===Xe.a.OnlyMe&&(s=t("permission.onlyMe")),s},this.rightIconMenu=()=>{const e=this.props,t=e.post,a=e.t,s=e.toggleDisableComments,i=e.toggleSharingComments,o=this.state,n=o.postMenuAnchorEl,l=o.isPostMenuOpen;return s&&i?N.a.createElement("div",null,N.a.createElement(h.a,{onClick:this.openPostMenu.bind(this)},N.a.createElement(E.a,null)),N.a.createElement(d.a,{open:l||!1,anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.closePostMenu},t.get("postTypeId")!==Ye.a.Album&&N.a.createElement(p.a,{onClick:this.handleOpenPostWrite}," ",a("post.edit")," "),N.a.createElement(p.a,{onClick:this.handleDelete}," ",a("post.delete")," "),N.a.createElement(p.a,{onClick:()=>s(!t.get("disableComments"))},t.get("disableComments")?a("post.enableComments"):a("post.disableComments")),N.a.createElement(p.a,{onClick:()=>i(!t.get("disableSharing"))},t.get("disableSharing")?a("post.enableSharing"):a("post.disableSharing")))):N.a.createElement("div",null)};const t=e.post;this.state={text:t.get("body",""),readMoreState:!1,openComments:!1,shareOpen:!1,disableComments:t.get("disableComments"),disableSharing:t.get("disableSharing"),shareTitle:"Share On",openCopyLink:!1,openPostWrite:!1,postMenuAnchorEl:null,isPostMenuOpen:!1,showVideo:!1},this.handleReadMore=this.handleReadMore.bind(this),this.getOpenCommentGroup=this.getOpenCommentGroup.bind(this),this.handleVote=this.handleVote.bind(this),this.handleOpenShare=this.handleOpenShare.bind(this),this.handleCloseShare=this.handleCloseShare.bind(this),this.handleCopyLink=this.handleCopyLink.bind(this),this.handleDelete=this.handleDelete.bind(this),this.handleOpenPostWrite=this.handleOpenPostWrite.bind(this),this.handleClosePostWrite=this.handleClosePostWrite.bind(this),this.handleOpenComments=this.handleOpenComments.bind(this),this.rightIconMenu=this.rightIconMenu.bind(this)}handleReadMore(){this.setState({readMoreState:!this.state.readMoreState})}shouldComponentUpdate(e,t){let a=!1;return e.post.equals(this.props.post)?e.commentList!==this.props.commentList||this.props.getPostComments!==e.getPostComments?a=!0:R.a(this.state,t)||(a=!0):a=!0,a}getAlbum(){const e=this.props.post,t=e.get("album"),a=e.get("id"),s=e.get("postTypeId");return t&&t.get("photos")&&(s===Ye.a.Album||s===Ye.a.PhotoGallery)?N.a.createElement(tt,{key:"post-album-grid-".concat(a),currentAlbum:e,images:t.get("photos")}):""}render(){const e=this.props,t=e.post,a=e.setHomeTitle,d=e.goTo,p=e.isPostOwner,m=e.commentList,g=e.classes,b=this.state.showVideo;if(!d||!a)return N.a.createElement("div",null);const v=t.get("ownerUserId"),C=t.get("ownerDisplayName"),E=t.get("creationDate"),x=t.get("ownerAvatar"),S=t.get("image"),P=t.get("body"),I=t.get("video"),L=t.get("thumbnail"),R=t.get("postTypeId"),T=t.get("id"),D=t.get("disableComments"),A=t.get("commentCounter"),W=t.get("disableSharing"),M=t.get("score");t.get("version");return N.a.createElement(s.a,{key:T+"post-card",className:"animate-top"},N.a.createElement(n.a,{title:N.a.createElement(H.a,{to:"/".concat(v)},C),subheader:E?(rt.a.dataFormat.postVersion,q()(E).local().fromNow()+" | ".concat(this.getPermissionLabel())):N.a.createElement(c.a,{color:"primary"}),avatar:N.a.createElement(H.a,{to:"/".concat(v)},N.a.createElement(G.a,{fullName:C,fileName:x,size:36})),action:p?this.rightIconMenu():""}),S&&""!==S&&R===Ye.a.Photo||L&&""!==L&&I&&""!==I&&R===Ye.a.Video?N.a.createElement(l.a,{className:g.cardMedia,image:R===Ye.a.Photo?S:L},b?N.a.createElement("div",{className:"player-wrapper"},N.a.createElement(ot.a,{controls:!0,className:"react-player",width:"100%",height:"100%",url:I,playing:!0})):N.a.createElement(N.a.Fragment,null,N.a.createElement(ye.a,{fileName:R===Ye.a.Photo?S:L}),N.a.createElement("span",{className:O()(g.playVideo,{[g.noDisplay]:R!==Ye.a.Video})},N.a.createElement(h.a,{className:g.playIconButtonRoot,onClick:this.onShowVideo},N.a.createElement(w.a,{className:g.playIcon}))))):"",this.getAlbum(),N.a.createElement(o.a,{className:g.postBody},N.a.createElement(Pe,{body:P},N.a.createElement(st.a,{properties:{target:"_blank",style:{color:"blue"},onClick:e=>e.stopPropagation()}},lt()(P,/#(\w+)/g,((e,t)=>N.a.createElement(H.a,{style:{color:"green"},key:e+t,to:"/tag/".concat(e),onClick:t=>{t.preventDefault(),t.stopPropagation(),d("/tag/".concat(e)),a("#".concat(e))}},"#",e)))))),N.a.createElement(i.a,null,N.a.createElement("div",{className:g.vote},N.a.createElement(h.a,{className:g.iconButton,onClick:this.handleVote,"aria-label":"Love"},N.a.createElement(r.a,{className:g.iconButton,checkedIcon:N.a.createElement(f.a,{style:{fill:"#4CAF50"}}),icon:N.a.createElement(y.a,{style:{fill:"#757575"}}),checked:this.props.currentUserVote})),N.a.createElement("div",{className:g.voteCounter}," ",M>0?M:""," ")),N.a.createElement("div",{style:{display:"inherit"}},N.a.createElement(h.a,{className:g.iconButton,onClick:this.handleOpenComments,"aria-label":"Comment"},N.a.createElement(u.a,null)),N.a.createElement("div",{className:g.commentCounter},A>0?A:""," ")),W?"":N.a.createElement(h.a,{className:g.iconButton,onClick:this.handleOpenShare,"aria-label":"Comment"},N.a.createElement(k.a,null))),N.a.createElement(ve,{open:this.state.openComments,comments:m,ownerPostUserId:v,onToggleRequest:this.handleOpenComments,isPostOwner:this.props.isPostOwner,disableComments:D,postId:T}),N.a.createElement(Fe,{onClose:this.handleCloseShare,shareOpen:this.state.shareOpen,onCopyLink:this.handleCopyLink,openCopyLink:this.state.openCopyLink,post:t}),this.state.openPostWrite&&N.a.createElement(Ce.a,{key:"post-component-post-write-".concat(T),open:this.state.openPostWrite,onRequestClose:this.handleClosePostWrite,edit:!0,postModel:t}))}}const yt=Object(Y.c)("translations")(vt);var Ct;t.a=(Ct=Object(m.a)((e=>({iconButton:{},vote:{display:"flex",flex:1},voteCounter:{color:"#777",fontSize:12,fontWeight:500,marginTop:25,marginLeft:-18,marginRight:6},commentCounter:{fontWeight:400,color:"#777",fontSize:12,lineHeight:"48px",marginLeft:-2},popperOpen:{zIndex:10},popperClose:{pointerEvents:"none",zIndex:0},postBody:{wordWrap:"break-word",color:"rgba(0, 0, 0, 0.87)",fontSize:"0.875rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.46429em",whiteSpace:"pre-line"},image:{width:"100%",height:500},playVideo:{position:"absolute",right:"45%",top:"45%",cursor:"pointer",backgroundColor:"#f1efeca3",borderRadius:"50%",height:60,padding:0},playIcon:{width:60,height:60,marginTop:"-12px",fill:"red"},noDisplay:{display:"none"},playIconButtonRoot:{width:60,height:60},cardMedia:{position:"relative"},fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}}})))(yt),Object(X.connect)(ft,bt)(Ct))}}]);