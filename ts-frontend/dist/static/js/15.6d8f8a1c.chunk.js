(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[15,3,7],{1146:function(e,t,n){"use strict";n.r(t);var a=n(8),o=n(43),i=n(49),r=n(45),s=n(48),l=n(292),c=n.n(l),u=n(50),d=n(690),p=n(86),m=n(800),h=n(524),f=n(474),g=n(528),b=n(1113),v=n(530),y=n(308),E=n(16),C=n(178),O=n(629),w=n.n(O),x=n(1034),j=n.n(x),k=n(1033),P=n.n(k),S=n(1035),N=n.n(S),I=n(630),T=n.n(I),L=n(154),R=n.n(L),A=n(1122),D=n(1114),M=n(1125),W=n(1123),z=n(580),U=n.n(z),_=n(202),B=n(58),V=n.n(B),F=n(0),q=n.n(F),H=n(106),G=n(61),Y=n(39),X=n(15),Z=n(547),J=n.n(Z);function K(e){return q.a.createElement(M.a,Object.assign({direction:"up"},e))}var $=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).closeDialog=function(){var e=n.props.onClose;e&&e()},n.infoRender=function(e,t){var a=n.props.classes;return q.a.createElement("div",{className:a.infoItem},q.a.createElement("div",{className:a.subtitleInfo},e),q.a.createElement("div",{className:a.contentInfo},t))},n.state={},n.closeDialog=n.closeDialog.bind(Object(p.a)(n)),n.infoRender=n.infoRender.bind(Object(p.a)(n)),n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.classes,a=e.open,o=e.onClose,i=e.targetUser,r=q.a.createElement("div",{className:n.rootInfo},q.a.createElement(C.a,{variant:"h6",color:"inherit",className:n.title},t("profile.about")," "," ","  ",i.fullName),q.a.createElement(y.a,{className:n.paperInfo},!u.a.isEmpty(i.tagLine)&&this.infoRender(t("profile.tagline"),i.tagLine),i.birthday&&i.birthday>0&&this.infoRender(t("profile.birthday"),V.a.unix(i.birthday).local().format("LL")),!u.a.isEmpty(i.companyName)&&this.infoRender(t("profile.companyName"),i.companyName))),s=q.a.createElement("div",{className:n.rootInfo},q.a.createElement(C.a,{variant:"h6",color:"inherit",className:n.title},t("profile.otherSocial")),q.a.createElement(y.a,{className:n.paperInfo},!u.a.isEmpty(i.twitterId)&&this.infoRender(t("profile.twitterId"),i.twitterId),!u.a.isEmpty(i.facebookId)&&this.infoRender(t("profile.facebookId"),i.facebookId),!u.a.isEmpty(i.instagramId)&&this.infoRender(t("profile.instagramId"),i.instagramId)));return q.a.createElement("div",null,q.a.createElement(D.a,{id:"album-dialog-",open:a,classes:{paper:n.paper},onClose:o,TransitionComponent:K},q.a.createElement("div",{className:n.root},q.a.createElement(A.a,{position:"sticky",color:"primary"},q.a.createElement(W.a,null,q.a.createElement(h.a,{onClick:o},q.a.createElement(U.a,null)),q.a.createElement(C.a,{variant:"h6",color:"inherit",className:n.flex},i.fullName),q.a.createElement(_.a,{fullName:i.fullName,fileName:i.avatar,size:32,style:n.avatar}))),q.a.createElement("div",{className:n.content},(u.a.isEmpty(i.tagLine)||i.birthday&&i.birthday>0||!u.a.isEmpty(i.companyName))&&r,(!u.a.isEmpty(i.twitterId)||!u.a.isEmpty(i.facebookId)||!u.a.isEmpty(i.instagramId))&&s))))}}]),t}(F.Component),Q=Object(H.c)("translations")($),ee=Object(E.a)((function(e){return{fullPageXs:{},root:{flexGrow:1,overflow:"hidden"},gridTileRoot:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,maxHeight:380},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(8),marginBottom:20,backgroundColor:e.palette.background.default},flex:{flexGrow:1},paper:Object(X.a)({minHeight:"500px",minWidth:"500px",maxWidth:"500px"},e.breakpoints.down("xs"),{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",minWidth:"100%",borderRadius:0,margin:0}),information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:J.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"},title:{color:"rgba(0,0,0,.87)",font:"400 14px/20px Roboto,RobotoDraft,Helvetica,Arial,sans-serif",fontWeight:500,margin:"0 0 12px 14px"},rootInfo:{flexDirection:"column",padding:"22px 20px 0",display:"flex",backgroundColor:"#f9f9f9",alignItems:"flex-start"},subtitleInfo:{color:"rgba(0,0,0,.54)",font:"400 12px Roboto,RobotoDraft,Helvetica,Arial,sans-serif",fontWeight:500},contentInfo:{marginTop:10,color:"rgba(0,0,0,.87)",font:"400 14px/20px Roboto,RobotoDraft,Helvetica,Arial,sans-serif"},paperInfo:{width:"100%",flex:"1 1 auto",overflow:"hidden",padding:"16px 14px"},infoItem:{paddingBottom:10},content:{maxHeight:436,overflowY:"auto",paddingBottom:15}}}),{withTheme:!0})(Q),te=Object(G.connect)((function(){var e=Y.a.selectCurrentUser();return function(t,n){return{currentUser:e(t).toJS()}}}),(function(e,t){return{}}))(ee),ne=n(1014),ae=n.n(ne),oe=n(1012),ie=n.n(oe),re=n(1013),se=n.n(re),le=n(77),ce=n.n(le),ue=n(1016),de=n.n(ue),pe=n(1015),me=n.n(pe),he=n(1017),fe=n.n(he),ge=n(552),be=n.n(ge),ve=n(525),ye=n(1129),Ee=n(780),Ce=n(532),Oe=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).state={},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.caption,a=e.value;return q.a.createElement("div",{className:t.progressLineContainer},q.a.createElement(C.a,{variant:"caption",className:t.progressLineText},n),q.a.createElement(Ce.a,{variant:"determinate",className:t.progressLine,value:a}))}}]),t}(F.Component),we=Object(E.a)((function(e){return{progressLineContainer:{maxWidth:200,position:"relative",marginBottom:10},progressLine:{height:24,borderRadius:4},progressLineText:{position:"absolute",zIndex:2,left:"10%",top:"20%"}}}))(Oe),xe=n(5),je=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).state={},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.caption,a=e.text,o=e.image,i=e.subheader,r=e.value;return q.a.createElement(Ee.a,{item:!0,xs:12,sm:6,md:4},q.a.createElement(g.a,{button:!0},q.a.createElement(y.a,{className:t.paper,elevation:4},q.a.createElement(we,{caption:n,value:r}),q.a.createElement(C.a,{className:t.text},a),q.a.createElement(ye.a,{className:t.cardHeader,avatar:q.a.createElement(ve.a,{src:o,className:t.bigAvatar}),subheader:q.a.createElement(C.a,{variant:"caption"},i)}))))}}]),t}(F.Component),ke=Object(H.c)("translations")(je),Pe=Object(G.connect)((function(){return{}}),(function(e){return{setHeaderTitle:function(t){return e(xe.setHeaderTitle(t))}}}))(Object(E.a)((function(e){return{paper:e.mixins.gutters({padding:20,height:160,position:"relative",width:"100%",minWidth:200}),bigAvatar:{width:30,height:30},cardHeader:{padding:"15px 0px 0px 0px",position:"absolute",bottom:15,left:30},text:{fontSize:" 0.750rem"}}}))(ke)),Se="https://i.stack.imgur.com/rp3Cv.png",Ne="https://i.stack.imgur.com/EN0AX.png",Ie="https://i.stack.imgur.com/SqKnG.png",Te=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).handleClickOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.Transition=function(e){return q.a.createElement(M.a,Object.assign({direction:"up"},e))},n.state={completed:50,open:!1},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.text;return q.a.createElement("div",null,q.a.createElement(ie.a,{onClick:this.handleClickOpen,classes:{root:t.buttonBounties}},n),q.a.createElement(se.a,{maxWidth:"md",open:this.state.open,onClose:this.handleClose,TransitionComponent:this.Transition},q.a.createElement(ae.a,{className:t.appBar},q.a.createElement(me.a,null,q.a.createElement(de.a,{color:"inherit",onClick:this.handleClose,"aria-label":"Close",className:t.iconClose},q.a.createElement(be.a,null)),q.a.createElement(fe.a,{variant:"h6",color:"inherit",className:R()(t.flex,t.dialogTitle)},"All Your Bounties"))),q.a.createElement(ce.a,{container:!0,spacing:8,justify:"center",className:t.gridContainer},q.a.createElement(Pe,{value:20,caption:"Cinema Ticket 10/50",text:"Visit the site each day for 100 consecutive days (Days are counted in UTC",image:Se,subheader:"Cooperation"}),q.a.createElement(Pe,{value:70,caption:"Voucher $100 14/20",text:"Take part in at least 100 surveys of company",image:Ne,subheader:"Joint Stock Company"}),q.a.createElement(Pe,{value:40,caption:"A trip to Asia 32/80",text:"Have bills with total amount of $5000",image:Ie,subheader:"Limited Company"}),q.a.createElement(Pe,{value:20,caption:"Cinema Ticket 10/50",text:"Visit the site each day for 100 consecutive days (Days are counted in UTC",image:Se,subheader:"Cooperation"}),q.a.createElement(Pe,{value:70,caption:"Voucher $100 14/20",text:"Take part in at least 100 surveys of company",image:Ne,subheader:"Joint Stock Company"}),q.a.createElement(Pe,{value:40,caption:"A trip to Asia 32/80",text:"Have bills with total amount of $5000",image:Ie,subheader:"Limited Company"}),q.a.createElement(Pe,{value:20,caption:"Cinema Ticket 10/50",text:"Visit the site each day for 100 consecutive days (Days are counted in UTC",image:Se,subheader:"Cooperation"}),q.a.createElement(Pe,{value:70,caption:"Voucher $100 14/20",text:"Take part in at least 100 surveys of company",image:Ne,subheader:"Joint Stock Company"}),q.a.createElement(Pe,{value:40,caption:"A trip to Asia 32/80",text:"Have bills with total amount of $5000",image:Ie,subheader:"Limited Company"}),q.a.createElement(Pe,{value:20,caption:"Cinema Ticket 10/50",text:"Visit the site each day for 100 consecutive days (Days are counted in UTC",image:Se,subheader:"Cooperation"}),q.a.createElement(Pe,{value:70,caption:"Voucher $100 14/20",text:"Take part in at least 100 surveys of company",image:Ne,subheader:"Joint Stock Company"}),q.a.createElement(Pe,{value:40,caption:"A trip to Asia 32/80",text:"Have bills with total amount of $5000",image:Ie,subheader:"Limited Company"}))))}}]),t}(F.Component),Le=Object(H.c)("translations")(Te),Re=c()((function(e){return{appBar:{position:"relative",backgroundColor:e.palette.secondary.light},iconClose:{position:"absolute",right:20,top:5},gridContainer:{padding:20,marginBottom:40,maxHeight:400,overflowY:"auto"},buttonBounties:{minWidth:0,minHeight:0,textTransform:"capitalize",padding:0,color:"rgba(0, 0, 0, 0.54)",fontSize:"0.75rem",fontWeight:400,lineHeight:"1.375em",display:"block"},dialogTitle:{color:"white"}}}))(Le),Ae=n(759),De=n(610),Me=n(521),We=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).state={},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.value,a=e.percent,o=e.title,i=e.guideline;return q.a.createElement("div",null,q.a.createElement("div",{className:t.progressContainer},q.a.createElement(Me.a,{className:t.progress,variant:"static",value:100,size:120,thickness:3,classes:{circle:t.circle}}),q.a.createElement(Me.a,{className:t.progress,variant:"static",value:n,size:120,thickness:3}),q.a.createElement("div",{className:t.textProgress},q.a.createElement(C.a,{variant:"h5",color:"secondary"},a),q.a.createElement(C.a,{variant:"caption",color:"secondary"},o))),q.a.createElement(C.a,{variant:"caption",className:t.guideline},i))}}]),t}(F.Component),ze=Object(E.a)((function(e){return{progressContainer:{position:"relative",width:122,height:127,margin:"auto"},progress:{position:"absolute",left:"0",bottom:"0"},circle:{color:e.palette.primary.light},textProgress:{position:"absolute",textAlign:"center",left:25,width:72,bottom:26,height:63},guideline:{paddingTop:"3px",textAlign:"center"}}}))(We),Ue=n(1019),_e=n.n(Ue),Be=n(1020),Ve=n.n(Be),Fe=n(1022),qe=n.n(Fe),He=n(1021),Ge=n.n(He),Ye=n(1023),Xe=n.n(Ye),Ze=n(1018),Je=n.n(Ze);function Ke(e){return q.a.createElement(M.a,Object.assign({direction:"up"},e))}var $e=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).state={open:!1},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.title,a=e.onClose,o=e.open,i=0;function r(e,t,n,a){return{id:i+=1,rep:e,status:t,info:n,isActive:a}}var s=[r(50,"Trusted User","Creat more vote per day ",!1),r(15,"Verified User","Able to vote",!1),r(5,"Approved User","Creat more analysis",!1),r(1,"Read Only","View a certain of polis result",!0)];return q.a.createElement(D.a,{fullScreen:!0,open:o,onClose:a,TransitionComponent:Ke},q.a.createElement(A.a,{className:t.appBar},q.a.createElement(W.a,null,q.a.createElement(h.a,{color:"inherit",onClick:a,"aria-label":"Close"},q.a.createElement(Je.a,null)),q.a.createElement(C.a,{variant:"h6",color:"inherit",className:t.flex},n),q.a.createElement(h.a,{color:"inherit",onClick:a,"aria-label":"Close"},q.a.createElement(be.a,null)))),q.a.createElement(C.a,{variant:"body1",color:"inherit",className:t.description},"Privileges manage your accessibility on features and what you can do on Poll Social . Following privileges guidline gaining more reputation and privileges."),q.a.createElement(_e.a,{classes:{root:this.props.classes.table}},q.a.createElement(Ve.a,null,s.map((function(e){return q.a.createElement(Ge.a,{className:t.row,key:e.id},q.a.createElement(qe.a,{className:t.cell,align:"right"},e.isActive?q.a.createElement(Xe.a,{className:t.doneIcon}):null),q.a.createElement(qe.a,{className:R()(t.cell,Object(X.a)({},t.notactiveColor,!e.isActive),Object(X.a)({},t.activeColor,e.isActive))},e.rep),q.a.createElement(qe.a,{className:R()(t.cell,Object(X.a)({},t.notactiveColor,!e.isActive),Object(X.a)({},t.activeColor,e.isActive))},e.status),q.a.createElement(qe.a,{className:R()(t.cell,Object(X.a)({},t.notactiveColor,!e.isActive),Object(X.a)({},t.activeColor,e.isActive))},e.info))})))))}}]),t}(F.Component),Qe=Object(E.a)((function(e){return{appBar:{position:"relative"},doneIcon:{color:"green"},flex:{flex:1},paper:e.mixins.gutters({maxWidth:670,minWidth:350,margin:"30px auto",padding:20}),table:{marginTop:10,marginBottom:10},cell:{border:"none","&:nth-of-type(even)":{fontWeight:"bold"},padding:"4px 1px 3px 20px"},row:{"&:hover":{backgroundColor:e.palette.background.default,cursor:"pointer"}},activeColor:{color:"rgb(202, 204, 206)"},notactiveColor:{color:e.palette.secondary.main},description:{maxWidth:1080,margin:"0 auto",padding:"25px",marginTop:"15px",marginBottom:"55px",backgroundColor:"#ece8b24a",border:"1px solid #d4d4d4",borderRadius:"2px"}}}))($e),et=n(597),tt=n.n(et),nt=n(1024),at=n.n(nt),ot=n(1104),it=n(22),rt=n(706),st=n(1025),lt=(q.a.PureComponent,function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).state={photoIndex:0},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){this.props.open}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.open,o=t.images,i=this.state.photoIndex;return q.a.createElement("div",null,a&&q.a.createElement(st.a,{mainSrc:o[i],nextSrc:o[(i+1)%o.length],prevSrc:o[(i+o.length-1)%o.length],onCloseRequest:n,onMovePrevRequest:function(){return e.setState({photoIndex:(i+o.length-1)%o.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(i+1)%o.length})}}))}}]),t}(F.Component)),ct=Object(E.a)((function(e){return{container:{margin:"auto",display:"block",width:"80%",maxWidth:700},close:{position:"absolute",top:15,right:35,transition:"0.3s"},closeIcon:{color:"white"},root:{paddingTop:100},iosDialog:{overflow:"auto",WebkitOverflowScrolling:"touch",width:"100%",height:"100%"}}}))(lt),ut=n(38),dt=n(17),pt=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).handleOpenPrivileges=function(){n.setState({privilegeOpen:!0})},n.handleClosePrivileges=function(){n.setState({privilegeOpen:!1})},n.openPictureDialog=function(e){u.a.isEmpty(e)||n.setState({pictureDialogURL:e,picutreDialogOpen:!0})},n.closePictureDialog=function(){n.setState({pictureDialogURL:"",picutreDialogOpen:!1})},n.handleResize=function(e){n.handleWidthChanged(e)},n.handleWidthChanged=function(e){n.transformBoxes(e,280,5)},n.transformBoxes=function(e,t,a){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,i=[],r=70,s=a,l=t*s+s*(2*o),c=l+2*r;c>e&&s>1;)c=(l=t*--s+s*(2*o))+2*r;for(var u=0,d=0,p=(e-l)/2,m=0;m<a;m++){d>s-1&&(d=0,++u);var h=p+d*(t+2*o),f=u*(t+2*o);i[m]={width:t,height:t,transform:"translate(".concat(h,"px, ").concat(f,"px)"),visibility:"visible"},++d}n.setState({boxesStyle:i,parentHeight:(u+1)*(t+2*o)})},n.handleSendMessage=function(){var e=n.props,t=e.chatRequest,a=e.profile;a.userId?t(a.userId):console.error("User id is null for chat request!")},n.handleWidthChanged=tt()(n.handleWidthChanged,200),n.state={boxesStyle:[],privilegeOpen:!1,storeOpen:!1,storeRepOpen:!1,picutreDialogOpen:!1,pictureDialogURL:"",aboutOpen:!1},n.handleOpenStore=n.handleOpenStore.bind(Object(p.a)(n)),n.handleCloseStore=n.handleCloseStore.bind(Object(p.a)(n)),n.handleOpenStoreRep=n.handleOpenStoreRep.bind(Object(p.a)(n)),n.handleCloseStoreRep=n.handleCloseStoreRep.bind(Object(p.a)(n)),n.closePictureDialog=n.closePictureDialog.bind(Object(p.a)(n)),n.openPictureDialog=n.openPictureDialog.bind(Object(p.a)(n)),n.handleCloseAbout=n.handleCloseAbout.bind(Object(p.a)(n)),n.handleOpenAbout=n.handleOpenAbout.bind(Object(p.a)(n)),n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"handleOpenStore",value:function(){this.setState({storeOpen:!0})}},{key:"handleCloseStore",value:function(){this.setState({storeOpen:!1})}},{key:"handleOpenAbout",value:function(){this.setState({aboutOpen:!0})}},{key:"handleCloseAbout",value:function(){this.setState({aboutOpen:!1})}},{key:"handleOpenStoreRep",value:function(){this.setState({storeRepOpen:!0})}},{key:"handleCloseStoreRep",value:function(){this.setState({storeRepOpen:!1})}},{key:"getReputation",value:function(){var e=this.props.profile,t=10*(e.postCount||0)+10*(e.voteCount||0)+10*(e.shareCount||0)+10*(e.followCount||0);return at()(t).format({spaceSeparated:!1,average:!0})}},{key:"componentDidMount",value:function(){this.handleWidthChanged(window.innerWidth)}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,a=t.classes,o=t.profile,i=t.isCurrentUser,r=t.editProfileOpen,s=t.openEditor,l=this.state,c=l.boxesStyle,u=l.parentHeight,d=l.privilegeOpen,p=l.pictureDialogURL,E=l.picutreDialogOpen,O=l.aboutOpen;return q.a.createElement(q.a.Fragment,null,q.a.createElement(ot.a,{handleWidth:!0,onResize:this.handleResize}),q.a.createElement("div",{className:a.container,style:{height:u}},q.a.createElement("div",{className:a.card,style:c?c[0]:{}},q.a.createElement(y.a,{className:R()(a.paperContainer,a.paperBackground)},q.a.createElement("div",{onClick:function(){return e.openPictureDialog(o.avatar)}},q.a.createElement(_.a,{className:a.userAvatar,fullName:o.fullName,fileName:o.avatar,size:110})),q.a.createElement(C.a,{variant:"h5",className:a.userNameText},o.fullName),q.a.createElement("div",{className:a.editButtonContainer},i?q.a.createElement(m.a,{color:"primary",onClick:s}," ",n("profile.editProfileButton")," "):q.a.createElement("div",null,q.a.createElement(De.a,{userId:o.userId,user:o}),q.a.createElement(h.a,{onClick:this.handleSendMessage},q.a.createElement(P.a,null)),q.a.createElement(m.a,{color:"primary",onClick:this.handleOpenAbout}," ",n("profile.aboutButton")," "))),i&&r?q.a.createElement(Ae.a,{avatar:o.avatar,banner:o.banner,fullName:o.fullName}):"")),q.a.createElement(te,{targetUser:o,open:O,onClose:this.handleCloseAbout}),q.a.createElement("div",{className:a.card,style:c?c[1]:{}},q.a.createElement(y.a,{className:R()(a.paperContainer,a.paperBackground1,a.disableComponent)},q.a.createElement(C.a,{variant:"h6",className:R()(a.title,a.titleSpecial)},n("userActivity.reputationTitle")),q.a.createElement(C.a,{className:a.repText},this.getReputation(),q.a.createElement("span",{className:a.repCaption},n("userActivity.reputationCaption"))))),q.a.createElement("div",{className:a.card,style:c?c[2]:{}},q.a.createElement(y.a,{className:R()(a.paperContainer,a.disableComponent)},q.a.createElement(C.a,{variant:"h6",className:a.title},n("userActivity.impactTitle")),q.a.createElement("div",{className:a.content},q.a.createElement(f.a,{component:"nav"},q.a.createElement(g.a,{button:!0,className:a.listItem},q.a.createElement(b.a,null,q.a.createElement(w.a,{className:a.impactIcon})),q.a.createElement(v.a,{primary:"".concat(o.voteCount||0," ").concat(n("userActivity.likeCaption"))})),q.a.createElement(g.a,{button:!0,className:a.listItem},q.a.createElement(b.a,null,q.a.createElement(T.a,{className:a.impactIcon})),q.a.createElement(v.a,{primary:"".concat(o.shareCount||0," ").concat(n("userActivity.shareCaption"))})),q.a.createElement(g.a,{button:!0,className:a.listItem},q.a.createElement(b.a,null,q.a.createElement(P.a,{className:a.impactIcon})),q.a.createElement(v.a,{primary:"".concat(o.postCount||0," ").concat(n("userActivity.publishCaption"))})),q.a.createElement(g.a,{button:!0,className:a.listItem},q.a.createElement(b.a,null,q.a.createElement(j.a,{className:a.impactIcon})),q.a.createElement(v.a,{primary:"".concat(o.followCount||0," ").concat(n("userActivity.followingCaption"))})),q.a.createElement(g.a,{button:!0,className:a.listItem},q.a.createElement(b.a,null,q.a.createElement(N.a,{className:a.impactIcon})),q.a.createElement(v.a,{primary:"".concat(o.followerCount||0," ").concat(n("userActivity.followersCaption"))})))))),q.a.createElement("div",{className:a.card,style:c?c[3]:{}},q.a.createElement(y.a,{className:R()(a.paperContainer,a.disableComponent)},q.a.createElement(C.a,{variant:"h6",className:a.title},n("userActivity.privilegesTitle")),q.a.createElement("div",{className:a.content},q.a.createElement(C.a,{variant:"caption"}),q.a.createElement(C.a,{variant:"caption"},n("userActivity.nextPrivilegeCaption"),"  : ",n("privilege.newUser")),q.a.createElement(ze,{value:20,percent:"20%",title:n("userActivity.goal",{rep:100}),guideline:n(" ")})),q.a.createElement(m.a,{color:"primary",className:a.allPrivilegesButton,disabled:!0,onClick:this.handleOpenPrivileges}," ",n("userActivity.allPrivilegesButton")))),q.a.createElement("div",{className:a.card,style:c?c[4]:{}},q.a.createElement(y.a,{className:R()(a.paperContainer,a.disableComponent)},q.a.createElement(C.a,{variant:"h6",className:a.title},n("userActivity.bountiesTitle")),q.a.createElement("div",{className:a.content},q.a.createElement(Re,{text:n("userActivity.allBounties")}),q.a.createElement(m.a,{classes:{root:a.buttonBounties}},n("userActivity.nextBountiesButton")),q.a.createElement(ze,{value:20,percent:"10/50",title:n("userActivity.bountyCommingSoon"),guideline:n(" ",{company:it.a.settings.companyName})}))))),q.a.createElement(Qe,{title:n("userActivity.privileges"),open:d,onClose:this.handleClosePrivileges}),q.a.createElement(ct,{open:E,onClose:this.closePictureDialog,images:[p]}))}}]),t}(F.Component),mt=Object(H.c)("translations")(pt),ht=Object(G.connect)((function(e,t){return{editProfileOpen:e.getIn(["user","openEditProfile"])}}),(function(e,t){return{setHeaderTitle:function(t){return e(xe.setHeaderTitle(t))},openEditor:function(){return e(ut.openEditProfile())},chatRequest:function(t){return e(dt.b.asyncCreateChatRequest(t))}}}))(Object(E.a)((function(e){return{paper:e.mixins.gutters({maxWith:900,minWidth:346,margin:"30px auto",padding:20}),userAvatar:{padding:0,margin:"auto",fontSize:60},userNameText:{textAlign:"center",padding:20},paperContainer:{height:"100%",position:"relative"},impactIcon:{fontSize:20},paperBackground:{padding:"17px 12px 15px 15px",backgroundColor:"white"},paperBackground1:{backgroundColor:e.palette.secondary.light},title:{fontSize:16,padding:8,fontWeight:400,backgroundColor:e.palette.secondary.light,color:"white"},titleSpecial:{color:"white"},repText:{color:"white",fontSize:90,textAlign:"center",verticalAlign:"middle",paddingTop:30,wordSpacing:-30,cursor:"pointer"},listItem:{padding:"8px 0px 4px 12px"},repLabel:{marginTop:50,textAlign:"center",color:"white"},repCaption:{fontSize:20,cursor:"pointer"},diamond:{marginLeft:5},facebookIcon:{marginLeft:5,width:30},twitterIcon:{marginLeft:5,width:30},content:{padding:"15px 15px 1px 15px"},buttonBounties:{minWidth:0,minHeight:0,textTransform:"capitalize",padding:0,color:"rgba(0, 0, 0, 0.54)",fontSize:"0.75rem",fontWeight:400,lineHeight:"1.375em",display:"block"},card:{visibility:"hidden",overflow:"hidden",position:"absolute",WebkitTransition:"all .218s cubic-bezier(0.4,0.0,0.2,1)",transition:"all .218s cubic-bezier(0.4,0.0,0.2,1)",margin:"5px",boxShadow:"0 2px 11px rgba(0,0,0,0.2)"},container:{top:"-61px",position:"relative",WebkitTransition:"all .218s cubic-bezier(0.4,0.0,0.2,1)",transition:"all .218s cubic-bezier(0.4,0.0,0.2,1)"},editButtonContainer:{textAlign:"center"},allPrivileges:{},allPrivilegesButton:{fontSize:"0.715rem"},borderAnimation:{WebkitAnimation:"pulse-shadow--collection 2s infinite",animation:"pulse-shadow--collection 2s infinite",borderColor:"#03a87c",color:"#03a87c",fill:"#03a87c"},facebookIconRoot:{width:35,height:35},twitterIconRoot:{width:35,height:35},disableComponent:{opacity:"0.2","pointer-events":"none"}}}))(mt)),ft=n(33),gt=n(47),bt=n(102),vt=n(52),yt=n(607),Et=n(95),Ct=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).historyUnlisten=null,n.state={},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.history,a=t.users;this.props.loadUserInfo(),!this.historyUnlisten&&a&&(this.historyUnlisten=n.listen((function(t,n){var o=t.pathname.replace("/",""),i=a.getIn([o,"fullName"],"");e.props.setHeaderTitle(i)}))),this.props.setHeaderTitle(this.props.name)}},{key:"componentWillUnmount",value:function(){this.historyUnlisten&&this.historyUnlisten()}},{key:"render",value:function(){var e=this.props,t=e.loadPosts,n=e.hasMorePosts,a=e.t,o=e.classes,i=e.profile,r=e.isCurrentUser,s=e.posts,l=e.postRequestId;e.userId;return q.a.createElement(q.a.Fragment,null,q.a.createElement("div",{className:o.bannerContainer},q.a.createElement(d.a,{height:"384px",width:"100%",className:o.banner,src:i&&i.banner?i.banner:it.a.settings.defaultProfileCover})),q.a.createElement(ht,{profile:i,isCurrentUser:r}),q.a.createElement("div",{style:{height:"24px"}}),q.a.createElement("div",null,s.isEmpty()?"":q.a.createElement("div",{className:"profile__title"},a("profile.headPostsLabel",{userName:this.props.name})),q.a.createElement("div",{style:{height:"24px"}}),q.a.createElement(yt.a,{posts:s,requestId:l,loadStream:t,hasMorePosts:n,displayWriting:!1})))}}]),t}(F.Component),Ot=Object(H.c)("translations")(Ct),wt=Object(Et.withRouter)(Object(G.connect)((function(e,t){var n=t.match.params.userId,a=u.a.createServerRequestId(ft.a.ProfileGetPosts,n),o=e.getIn(["authorize","uid"],0),i=e.getIn(["user","post",n,"hasMoreData"],!0),r=bt.b.selectProfilePosts()(e,{userId:n}),s=vt.a.getUserProfileById(e,{userId:n}).toJS(),l=vt.a.getUsers(e);return{avatar:s.avatar,name:s.fullName,banner:s.banner,tagLine:s.tagLine,userId:n,users:l,posts:r,hasMorePosts:i,postRequestId:a,profile:s,isCurrentUser:n===o}}),(function(e,t){var n=t.match.params.userId;return{loadPosts:function(t){return e(gt.dbGetPostsByUserId(n,t))},loadUserInfo:function(){return e(ut.dbGetUserInfoByUserId(n,"header"))},setHeaderTitle:function(t){return e(dt.d.setHeaderTitle(t))}}}))(c()((function(e){return{banner:Object(X.a)({backgroundAttachment:"scroll",borderRadius:"2px",backgroundRepeat:"unset !important",backgroundPosition:"center center !important"},e.breakpoints.down("xs"),{backgroundAttachment:"scroll",height:"220px !important"}),bannerContainer:Object(X.a)({height:384},e.breakpoints.down("xs"),{height:"260px !important"}),media:{height:0,paddingTop:"56.25%"}}}))(Ot)));t.default=wt},539:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(27),o=function(e,t){return e.getIn(["server","request",t.requestId])},i={getRequest:o,selectRequest:function(){return Object(a.a)([o],(function(e){return e&&e.toJS()}))}}},551:function(e,t,n){"use strict";var a=n(8),o=n(43),i=n(49),r=n(45),s=n(48),l=n(631),c=n(521),u=n(0),d=n.n(u),p=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.theme;return d.a.createElement("div",{key:"load-more-progress",className:"g-load-more"},d.a.createElement(c.a,{size:30,thickness:5,style:{color:e.palette.primary.light}}))}}]),t}(u.Component),m=Object(l.a)(p);t.a=m},569:function(e,t,n){"use strict";var a=n(559),o=n(15),i=n(8),r=n(43),s=n(49),l=n(45),c=n(86),u=n(48),d=n(800),p=n(1128),m=n(1135),h=n(1129),f=n(177),g=n(1114),b=n(1117),v=n(1116),y=n(1115),E=n(696),C=n(780),O=n(524),w=n(279),x=n(1112),j=n(16),k=n(522),P=n(534),S=n(178),N=n(552),I=n.n(N),T=n(546),L=n.n(T),R=n(571),A=n.n(R),D=n(585),M=n.n(D),W=n(655),z=n.n(W),U=n(656),_=n.n(U),B=n(657),V=n.n(B),F=n(553),q=n(53),H=n(50),G=n(154),Y=n.n(G),X=n(0),Z=n.n(X),J=n(61),K=n(22),$=n(106),Q=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).handleAddLink=function(){var e=n.props,t=e.onAddLink,a=e.onClose,o=n.state.link;o&&""!==o.trim()&&t(o,H.a.validateYoutubeUrl(o)?H.a.getYoutubetThumbnails(o):K.a.settings.defaultVideoThumbnails);a()},n.handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,i=t.name;"link"===i&&n.validateInputLink(a),n.setState(Object(o.a)({},i,a))},n.validateInputLink=function(e){var t=n.props.t;e&&""!==e.trim()?H.a.validateUrl(e.trim())?n.setState({linkInputError:"",disabledOk:!1}):n.setState({linkInputError:t("post.videoInputLinkInvalidError"),disabledOk:!0}):n.setState({linkInputError:t("post.videoInputLinkRequiredError"),disabledOk:!0})},n.state={link:"",linkInputError:"",disabledOk:!0},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.t,a=e.open,o=e.onClose,i=this.state,r=i.disabledOk,s=i.linkInputError;return Z.a.createElement(g.a,{PaperProps:{className:t.fullPageXs},open:a,onClose:o,maxWidth:"md"},Z.a.createElement(y.a,null,n("post.addVideoTitle")),Z.a.createElement(v.a,null,Z.a.createElement(k.a,{autoFocus:!0,margin:"dense",type:"link",name:"link",onChange:this.handleInputChange,helperText:s,error:""!==s,fullWidth:!0})),Z.a.createElement(b.a,null,Z.a.createElement(d.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:o,style:{color:f.a[800]}},n("post.cancelButton")),Z.a.createElement(d.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.handleAddLink,disabled:r},n("post.addVideoButton"))))}}]),t}(X.Component),ee=Object($.c)("translations")(Q),te=Object(J.connect)((function(e,t){return{}}),(function(e,t){return{}}))(Object(j.a)((function(e){return{fullPageXs:Object(o.a)({},e.breakpoints.down("xs"),{width:"100%",height:"100%",margin:0,overflowY:"auto"}),dialogTitle:{padding:0}}}))(ee)),ne=n(608),ae=n(544),oe=n(1120),ie=n(1118),re=n(1119),se=n(532),le=n(556),ce=n.n(le),ue=n(33),de=n(135),pe=n(1150),me=n(5),he=n(46),fe=n(19),ge=n(39),be=n(539),ve=n(547),ye=n.n(ve),Ee=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).saveAlbum=function(){var e=n.props,t=e.progress,o=e.t,i=e.currentUser,r=n.state,s=r.accessUserList,l=r.permission,c=(H.a.isEmpty(n.state.albumName)?o("album.defaultAlbumName"):n.state.albumName,Object(a.a)(n.state.selectedPhotos)),u=[];c.slice(0,4).map((function(e){var n=t.getIn([e.fileName,"meta"],{url:""}),a=e.fileName.split(".")[0],o=new de.a(a,0,0,n.url||URL.createObjectURL(e.src),n.url||URL.createObjectURL(e.src),e.fileName,"","",e.fileName,i.userId,0,"",0,0,"",!1,s,l);return u.push(o),{url:n.url,fileName:e.fileName,fileId:a}}))},n.deleteSelectedPhoto=function(e){var t=n.props.onDelete,o=Object(a.a)(n.state.selectedPhotos);o=o.filter((function(t){return t.fileName!==e})),n.setState({selectedPhotos:o}),t(e)},n.imageList=function(){var e=n.props,t=e.classes,a=e.progress;return n.state.selectedPhotos.map((function(e){var o=a.getIn([e.fileName,"percent"],0),i=a.getIn([e.fileName,"visible"],!1);return Z.a.createElement(ie.a,{key:"album-dialog-tile-".concat(e.fileName)},Z.a.createElement("img",{src:e.src,alt:"something"}),Z.a.createElement(re.a,{title:i?Z.a.createElement(se.a,{variant:"determinate",value:o,color:"secondary"}):"",actionIcon:i?"":Z.a.createElement(O.a,{className:t.icon,onClick:function(){return n.deleteSelectedPhoto(e.fileName)}},Z.a.createElement(ce.a,null))}))}))},n.gridTile=function(){var e=n.props.classes;return Z.a.createElement(oe.a,{cellHeight:100,className:e.gridList,cols:3},n.imageList())},n.state={selectedPhotos:[],prevPhotos:[]},n.imageList=n.imageList.bind(Object(c.a)(n)),n.deleteSelectedPhoto=n.deleteSelectedPhoto.bind(Object(c.a)(n)),n.saveAlbum=n.saveAlbum.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(r.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return pe.a(e.photos,t.prevPhotos)?null:{selectedPhotos:Object(a.a)(e.photos),prevPhotos:e.photos}}}]),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return Z.a.createElement("div",{className:e.root},this.gridTile())}}]),t}(X.Component),Ce=Object($.c)("translations")(Ee),Oe=Object(j.a)((function(e){return{fullPageXs:{},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginTop:30},gridList:{flexWrap:"nowrap",width:"100%",transform:"translateZ(0)"},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),marginBottom:20,backgroundColor:e.palette.background.default},paper:Object(o.a)({minHeight:"500px"},e.breakpoints.down("xs"),{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",borderRadius:0,margin:0}),information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:ye.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"}}}),{withTheme:!0})(Ce),we=Object(J.connect)((function(){var e=ge.a.selectCurrentUser(),t=be.a.selectRequest();return function(n,a){var o=e(n).toJS(),i=H.a.createServerRequestId(ue.a.GalleryCreateAlbum,o.userId),r=t(n,{requestId:i});return{currentUser:o,createAlbumRequestStatus:r?r.status:fe.a.NoAction}}}),(function(e,t){return{deleteImage:function(t,n){return e(he.dbDeleteImage(t,K.a.data.imageFolderPath,n))},progressChange:function(t,n){return e(me.progressChange(t,n))}}}))(Oe),xe=n(202),je=n(593),ke=n(1134),Pe=n(654),Se=n.n(Pe),Ne=n(4),Ie=n(52),Te=n(122),Le=n.n(Te),Re=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).styles={root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},uploadButton:{verticalAlign:"middle",fontWeight:400},uploadInput:{cursor:"pointer",position:"absolute",top:0,bottom:0,right:0,left:0,width:"100%",opacity:0},deleteVideo:{marginLeft:"5px",cursor:"pointer",color:"white"},addImage:{marginRight:"5px",cursor:"pointer",color:"white"}},n.fileInputRef=void 0,n.videoRef=void 0,n.blobFile=void 0,n.file=void 0,n.handleSetVideo=function(e,t,a){n.props.set(t,a),n.close()},n.togglePreview=function(){n.setState((function(e,t){return e.isPreview&&(n.fileInputRef.current.value=""),{isPreview:!e.isPreview}}))},n.handleDeleteVideo=function(e,t){n.props.deleteVideo(t)},n.onFileChange=function(e){var t=n.props,a=t.showError,o=t.t,i=F.a.getExtension(e.target.files[0].name),r=!1;F.a.checkMaxFileSize(e.target.files[0].size,K.a.settings.maxVideoFileSize)&&(r=!0,a(o("videGallery.maxExceedMessage")));var s="".concat(Le()(),".").concat(i);n.setState({isPreview:!0,fileName:s,isSaveDisabled:r}),n.file=e.currentTarget.files[0];var l=n.file.type,c=n.videoRef.current,u=c.canPlayType(l);""===u&&(u="no");var d=URL.createObjectURL(n.file);c.src=d},n.close=function(){n.props.close()},n.videoList=function(){return n.props.videos.map((function(e,t){return Z.a.createElement(ie.a,{key:e.id},Z.a.createElement("div",null,Z.a.createElement("div",{style:{overflowY:"hidden",overflowX:"auto"}},Z.a.createElement("ul",{style:{whiteSpace:"nowrap",padding:"0 6px",margin:"8px 0 0 0",verticalAlign:"bottom",flexShrink:0,listStyleType:"none"}},Z.a.createElement("div",{style:{display:"block"}},Z.a.createElement("div",{style:{display:"block",marginRight:"8px",transition:"transform .25s"}},Z.a.createElement("li",{style:{width:"100%",margin:0,verticalAlign:"bottom",position:"static",display:"inline-block"}},Z.a.createElement(ae.a,{fileName:e.thumbnail,style:{width:"100%",height:"auto"}}))))))),Z.a.createElement(re.a,{title:Z.a.createElement(ce.a,{style:n.styles.deleteVideo,onClick:function(t){return n.handleDeleteVideo(t,e.id)}}),titlePosition:"top",actionIcon:Z.a.createElement(Se.a,{style:n.styles.addImage,onClick:function(t){return n.handleSetVideo(t,e.URL,e.thumbnail)}}),actionPosition:"left"}))}))},n.handleUploadVideo=function(){var e=n.props.uploadVideo,t=n.state.fileName;F.a.captureVideo(n.videoRef.current,null).toBlob((function(a){e(n.file,t,a),n.togglePreview()}),"image/jpeg",.95)},n.state={fileName:"",isPreview:!1,isSaveDisabled:!1},n.fileInputRef=Z.a.createRef(),n.videoRef=Z.a.createRef(),n.close=n.close.bind(Object(c.a)(n)),n.onFileChange=n.onFileChange.bind(Object(c.a)(n)),n.handleSetVideo=n.handleSetVideo.bind(Object(c.a)(n)),n.handleDeleteVideo=n.handleDeleteVideo.bind(Object(c.a)(n)),n.videoList=n.videoList.bind(Object(c.a)(n)),n.handleUploadVideo=n.handleUploadVideo.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getVideoGallery;e&&e()}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.videos,a=e.classes,i=this.state,r=i.isPreview,s=i.isSaveDisabled,l=Z.a.createElement(oe.a,{cellHeight:180,className:Y()(a.gridList,Object(o.a)({},a.noDisplay,r))},Z.a.createElement(ie.a,{key:"upload-image-gallery"},Z.a.createElement("div",{style:{display:"flex",backgroundColor:"rgba(222, 222, 222, 0.52)",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},Z.a.createElement("input",{accept:"video/mp4,video/x-m4v,video/*",style:this.styles.uploadInput,id:"raised-button-file",onChange:this.onFileChange,ref:this.fileInputRef,type:"file"}),Z.a.createElement("label",{htmlFor:"raised-button-file"},Z.a.createElement(d.a,{variant:"contained",component:"span",style:this.styles.uploadButton},t("imageGallery.uploadButton"))))),n&&n.count()>0?this.videoList():""),c=Z.a.createElement("div",{className:Y()(a.videoRoot,Object(o.a)({},a.noDisplay,!r))},Z.a.createElement("video",{className:Y()(a.video),controls:!0,autoPlay:!1,ref:this.videoRef}));return Z.a.createElement("div",{style:this.styles.root},Z.a.createElement(ke.a,{in:!r},l),Z.a.createElement(ke.a,{in:r},c),Z.a.createElement("div",{className:Y()(a.previewActions,Object(o.a)({},a.noDisplay,!r))},Z.a.createElement(d.a,{disabled:s,color:"primary",onClick:this.handleUploadVideo}," ",t("videGallery.saveButton")," "),Z.a.createElement(d.a,{onClick:this.togglePreview}," ",t("videGallery.backButton")," ")))}}]),t}(X.Component),Ae=Object($.c)("translations")(Re),De=Object(J.connect)((function(e){var t=e.getIn(["authorize","uid"]),n=Ie.a.getUserProfileById(e,{userId:t}).toJS();return{videos:e.getIn(["imageGallery","videos"],Object(Ne.Map)({})),avatar:n?n.avatar:""}}),(function(e,t){return{uploadVideo:function(t,n,a){return e(he.dbUploadVideo(t,n,a))},deleteVideo:function(t){return e(he.dbDeletedVideo(t))},getVideoGallery:function(){return e(he.dbGetVideoGallery())},showError:function(t){return e(me.showMessage(t))}}}))(Object(j.a)((function(e){return{fullPageXs:Object(o.a)({},e.breakpoints.down("xs"),{width:"100%",height:"100%",margin:0,overflowY:"auto"}),gridList:{width:500,height:450,overflowY:"auto"},noDisplay:{display:"none !important"},video:{width:"100%",height:"100%",position:"absolute",top:0,left:0},videoRoot:{position:"relative",padding:"39.25%",width:"100%",height:"100%"},previewActions:{justifyContent:"space-between",display:"flex",marginTop:10,width:"100%",height:"100%"}}}))(Ae)),Me=n(80),We=n(584),ze=n(204),Ue=n(47),_e=n(181),Be=n(133),Ve=function(e,t){return{openAlbum:function(){return e(me.openDialog(_e.a.Album))},closeAlbum:function(){return e(me.closeDialog(_e.a.Album))},post:function(t,n){return e(Ue.dbAddPost(t,n))},update:function(t,n){return e(Ue.dbUpdatePost(t,n))},uploadImage:function(t,n){return e(he.dbUploadImage(t,n))}}},Fe=function(){var e=ge.a.selectCurrentUser(),t=Be.a.selectDialogState(),n=Be.a.selectProgress();return function(a,o){var i=e(a).toJS(),r=t(a,{type:_e.a.Album}),s=n(a);return{postImageState:a.getIn(["imageGallery","status"]),ownerAvatar:i.avatar||"",ownerDisplayName:i.fullName||"",albumDialogOpen:r,progress:s}}},qe=n(527);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye,Xe=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).selectedPhotos=[],n.handleToggleComments=function(){n.setState((function(e,t){return{disableSharing:!e.disableComments,disabledPost:!n.isPostChangeValid(e)}}))},n.handleToggleSharing=function(){n.setState((function(e,t){return{disableSharing:!e.disableSharing,disabledPost:!n.isPostChangeValid(e)}}))},n.handleTogglePermission=function(){n.setState((function(e,t){return{permissionOpen:!e.permissionOpen,disabledPost:!n.isPostChangeValid(e)}}))},n.handleRemoveImage=function(){n.setState((function(e,t){return{image:"",video:"",imageFullPath:"",postType:ze.a.Text,disabledPost:!n.isPostChangeValid(e)}}))},n.closeAlbumDialog=function(){var e=n.props.closeAlbum;e&&e()},n.openAlbumDialog=function(){var e=n.props.openAlbum;e&&e()},n.handlePost=function(){n.setState({disabledPost:!1});var e=n.state,t=e.image,a=e.imageFullPath,o=e.disableComments,i=e.disableSharing,r=e.postText,s=e.video,l=e.thumbnail,c=e.postType,u=e.accessUserList,d=e.permission,p=e.galleryOpen,m=e.selectedPhotos,h=n.props,f=h.ownerAvatar,g=h.ownerDisplayName,b=h.edit,v=h.onRequestClose,y=h.post,E=h.update,C=h.postModel,O=h.progress;if(n.isPostChangeValid(n.state)){var w=q.b(r),x=new We.a;p&&m.forEach((function(e){var t=O.getIn([e.fileName,"meta"]),n=(e.fileName.split(".")[0],e.fileName,"");n=t?t.url:e.src,x.photos.push(n)}));var j={body:r,tags:w,image:t,video:s,thumbnail:l,imageFullPath:a,ownerAvatar:f,ownerDisplayName:g,disableComments:o,disableSharing:i,postTypeId:c,score:0,album:Ge({},x),viewCount:0,accessUserList:u,permission:d};if(b)E(C.set("body",r).set("tags",Object(Ne.List)(w)).set("image",t).set("imageFullPath",a).set("video",s).set("album",Object(Ne.fromJS)(Ge({},x))).set("thumbnail",l).set("disableComments",o).set("disableSharing",i).set("postTypeId",c).set("accessUserList",Object(Ne.List)(u)).set("permission",d),v);else y(j,v)}else n.setState({disabledPost:!0})},n.onRequestSetImage=function(e){n.setState({image:e,video:"",postType:ze.a.Photo,disabledPost:!1})},n.onSetVideo=function(e,t){n.setState({image:"",thumbnail:t,video:e,postType:ze.a.Video,disabledPost:!1})},n.handleOnChange=function(e){var t=e.target.value;n.setState({postText:t}),0===t.length||""===t.trim()||n.props.edit&&t.trim()===n.props.text?n.setState({postText:t,disabledPost:!0}):n.setState({postText:t,disabledPost:!1})},n.handleCloseGallery=function(){n.setState({galleryOpen:!1})},n.handleOpenGallery=function(){n.setState({galleryOpen:!0})},n.handleOpenVideoLink=function(){n.setState({videoLinkOpen:!0})},n.handleCloseVideoLink=function(){n.setState({videoLinkOpen:!1})},n.handleOpenVideoGallery=function(){n.setState({videoGalleryOpen:!0})},n.handleCloseVideoGallery=function(){n.setState({videoGalleryOpen:!1})},n.handleOpenMenu=function(e){n.setState({menuOpen:!0,menuAnchorEl:e.currentTarget})},n.handleCloseMenu=function(){n.setState({menuOpen:!1,menuAnchorEl:null})},n.handleAccessList=function(e,t){n.setState({accessUserList:e,permission:t,permissionOpen:!1})},n.handleDeletePhoto=function(e){var t=n.state,a=t.selectedPhotos,o=t.postText,i=[];a.forEach((function(t){e!==t.fileName&&i.push(t)}));var r=!0,s=0===o.length||""===o.trim()||n.props.edit&&o.trim()===n.props.text;(i&&i.length>0||!s)&&(r=!1),n.setState({selectedPhotos:[].concat(i),disabledPost:r})},n.onUploadAlbumChange=function(e){var t=n.props.uploadImage,o=n.state,i=o.galleryOpen,r=o.selectedPhotos;if(t){for(var s=e.currentTarget.files,l=[],c=0;c<s.length;c++){var u=s[c],d=F.a.getExtension(u.name),p="".concat(Le()(),".").concat(d);l.push({src:URL.createObjectURL(u),fileName:p}),t(u,p)}var m=[].concat(Object(a.a)(r),l);s.length>3&&!i?(n.selectedPhotos=m.map((function(e){return{file:e.src,fileName:e.fileName}})),n.openAlbumDialog()):n.setState({selectedPhotos:Object(a.a)(m),galleryOpen:!0,disabledPost:!1,postType:ze.a.PhotoGallery}),e.currentTarget.value=null}},n.isPostChangeValid=function(e){var t=e.image,n=e.video,a=e.postText,o=e.selectedPhotos;return!H.a.isEmpty(t)||!H.a.isEmpty(n)||!H.a.isEmpty(a)||o&&o.length>0},n.getPermissionLabel=function(){var e=n.props.t,t=n.state.permission,a="";return t===Me.a.Public?a=e("permission.public"):t===Me.a.Circles?a=e("permission.circles"):t===Me.a.OnlyMe&&(a=e("permission.onlyMe")),a};var o=e.postModel,r=o&&o.getIn(["album","photos"],Object(Ne.List)([])),u=e.edit&&o&&o.get("postTypeId",0)===ze.a.PhotoGallery?r.map((function(e){return Object(Ne.Map)({src:e,fileName:e,loaded:!0})})).toJS():[],d=!!(n.props.edit&&u&&u.length>0);return n.state={postText:n.props.edit&&o?o.get("body",""):"",image:n.props.edit&&o?o.get("image",""):"",imageFullPath:n.props.edit&&o?o.get("imageFullPath",""):"",galleryOpen:d,menuOpen:!1,disabledPost:!0,disableComments:!(!n.props.edit||!o)&&o.get("disableComments",!1),disableSharing:!(!n.props.edit||!o)&&o.get("disableSharing",!1),videoLinkOpen:!1,videoGalleryOpen:!1,permissionOpen:!1,video:n.props.edit&&o?o.get("video",""):"",thumbnail:n.props.edit&&o?o.get("thumbnail",""):"",postType:n.props.edit&&o?o.get("postTypeId",ze.a.Text):ze.a.Text,accessUserList:n.props.edit&&o?o.get("accessUserList",[]):[],permission:n.props.edit&&o?o.get("permission",Me.a.Public):Me.a.Public,selectedPhotos:u,album:n.props.edit&&o?o.get("album",Object(Ne.Map)({photos:Object(Ne.List)([])})):Object(Ne.Map)({photos:Object(Ne.List)([])})},n.handleOnChange=n.handleOnChange.bind(Object(c.a)(n)),n.handleCloseGallery=n.handleCloseGallery.bind(Object(c.a)(n)),n.handleOpenGallery=n.handleOpenGallery.bind(Object(c.a)(n)),n.onRequestSetImage=n.onRequestSetImage.bind(Object(c.a)(n)),n.handlePost=n.handlePost.bind(Object(c.a)(n)),n.handleRemoveImage=n.handleRemoveImage.bind(Object(c.a)(n)),n.handleToggleComments=n.handleToggleComments.bind(Object(c.a)(n)),n.handleToggleSharing=n.handleToggleSharing.bind(Object(c.a)(n)),n.handleTogglePermission=n.handleTogglePermission.bind(Object(c.a)(n)),n.isPostChangeValid=n.isPostChangeValid.bind(Object(c.a)(n)),n.getPermissionLabel=n.getPermissionLabel.bind(Object(c.a)(n)),n.onUploadAlbumChange=n.onUploadAlbumChange.bind(Object(c.a)(n)),n.handleDeletePhoto=n.handleDeletePhoto.bind(Object(c.a)(n)),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.t,a=e.progress,i=e.albumDialogOpen,r=this.state,s=r.menuOpen,l=r.videoLinkOpen,c=r.image,u=r.postType,j=r.galleryOpen,N=r.selectedPhotos,T=r.thumbnail,R=r.permissionOpen,D=r.permission,W=r.menuAnchorEl,U=void 0!==i&&i,B=Z.a.createElement("div",null,Z.a.createElement(P.a,{id:"tooltip-icon",title:n("post.moreTooltip"),placement:"bottom-start"},Z.a.createElement(O.a,{onClick:this.handleOpenMenu},Z.a.createElement(L.a,null))),Z.a.createElement(w.a,{open:s,anchorEl:W,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleCloseMenu},Z.a.createElement(x.a,{onClick:this.handleToggleComments,style:{fontSize:"14px"}},this.state.disableComments?n("post.enableComments"):n("post.disableComments")," "),Z.a.createElement(x.a,{onClick:this.handleToggleSharing,style:{fontSize:"14px"}},(this.state.disableSharing,n("post.disableSharing"))))),F=Z.a.createElement(xe.a,{fullName:this.props.ownerDisplayName,fileName:this.props.ownerAvatar,size:36}),q=Z.a.createElement("div",{className:t.author},Z.a.createElement("span",{style:{fontSize:"14px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"25px"}},"".concat(this.props.ownerDisplayName," |")),Z.a.createElement("span",{onClick:this.handleTogglePermission,className:Y()(t.permission,t.disableComponent)},"".concat(this.getPermissionLabel()))),H=c&&""!==c&&u===ze.a.Photo||T&&""!==T&&u===ze.a.Video?Z.a.createElement("div",null,Z.a.createElement("div",{style:{position:"relative",overflowY:"hidden",overflowX:"auto"}},Z.a.createElement("ul",{style:{position:"relative",whiteSpace:"nowrap",padding:"0 0 0 16px",margin:"8px 0 0 0",paddingRight:"16px",verticalAlign:"bottom",flexShrink:0,listStyleType:"none"}},Z.a.createElement("div",{style:{display:"flex",position:"relative"}},Z.a.createElement("span",{onClick:this.handleRemoveImage,style:{position:"absolute",width:"28px",backgroundColor:"rgba(6, 6, 6, 0.82)",height:"28px",right:12,top:4,cursor:"pointer",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"}},Z.a.createElement(z.a,{style:{color:"rgba(239, 235, 235, 0.83)"}})),Z.a.createElement("span",{className:Y()(t.playVideo,Object(o.a)({},t.noDisplay,u!==ze.a.Video)),style:{}},Z.a.createElement(M.a,{className:t.playIcon})),Z.a.createElement("div",{style:{display:"inline-block",width:"100%",marginRight:"8px",transition:"transform .25s"}},Z.a.createElement("li",{style:{width:"100%",margin:0,verticalAlign:"bottom",position:"static"}},Z.a.createElement(ae.a,{fileName:u===ze.a.Photo?c:T,style:{width:"100%",height:"auto"}}))))))):"";return Z.a.createElement("div",{style:this.props.style},this.props.children,Z.a.createElement(g.a,{BackdropProps:{className:t.backdrop},PaperProps:{className:t.fullPageXs},key:this.props.id||0,open:this.props.open,onClose:this.props.onRequestClose},Z.a.createElement(y.a,{className:t.dialogTitle},Z.a.createElement(h.a,{title:q,avatar:F,action:B})),Z.a.createElement(v.a,{className:t.content,style:{paddingTop:0}},Z.a.createElement(p.a,{elevation:0},Z.a.createElement(m.a,null,Z.a.createElement(C.a,{item:!0,xs:12},Z.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},Z.a.createElement("div",{style:{position:"relative",flexDirection:"column",display:"flex",flexGrow:1,overflowY:"auto",maxHeight:"300px"}},Z.a.createElement(k.a,{autoFocus:!0,value:this.state.postText,onChange:this.handleOnChange,placeholder:n("post.textareaPlaceholder"),multiline:!0,rows:2,rowsMax:4,style:{fontWeight:400,fontSize:"14px",margin:"0 16px",flexShrink:0,width:"initial",flexGrow:1}}),H,j&&Z.a.createElement(we,{photos:N,progress:a,onDelete:this.handleDeletePhoto}))))))),Z.a.createElement(b.a,{className:t.iconButtonsRoot},Z.a.createElement("div",{style:{flexShrink:0,boxFlex:0,flexGrow:0,maxHeight:"48px",width:"100%"}},Z.a.createElement("div",{style:{flexDirection:"row",display:"flex"}},Z.a.createElement("input",{accept:"image/*",className:t.input,id:"album-button-file",multiple:!0,onChange:this.onUploadAlbumChange,type:"file"}),Z.a.createElement("div",{style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},Z.a.createElement("span",{style:{top:"15px",display:"block",position:"relative",cursor:"pointer"}},Z.a.createElement("label",{htmlFor:"album-button-file"},Z.a.createElement(A.a,{style:{color:"grey"}})))),Z.a.createElement("div",{onClick:this.handleOpenVideoLink,style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},Z.a.createElement("span",{style:{top:"12px",display:"block",position:"relative",cursor:"pointer"}},Z.a.createElement(_.a,{style:{color:"grey",width:30,height:30}}))),Z.a.createElement("div",{className:t.disableComponent,onClick:this.handleOpenVideoGallery,style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},Z.a.createElement("span",{style:{top:"14px",display:"block",position:"relative",cursor:"pointer"}},Z.a.createElement(V.a,{style:{color:"grey",width:24,height:24}})))))),Z.a.createElement(b.a,null,Z.a.createElement(d.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.props.onRequestClose,style:{color:f.a[800]}},n("post.cancelButton")),Z.a.createElement(d.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.handlePost,disabled:this.state.disabledPost},this.props.edit?n("post.updateButton"):n("post.postButton")))),U?Z.a.createElement(ne.a,{open:U,progress:a,photos:this.selectedPhotos,onClose:this.closeAlbumDialog}):"",Z.a.createElement(g.a,{PaperProps:{className:Y()(t.fullPageXs,t.videoGallery)},open:this.state.videoGalleryOpen,onClose:this.handleCloseVideoGallery},Z.a.createElement(b.a,{className:t.galleryActions},Z.a.createElement(S.a,{variant:"h6",component:"div",className:t.galleryDialogTitle},Z.a.createElement(V.a,{style:{color:"rgb(230, 35, 35)",margin:"0 10px",width:24,height:24}}),n("post.videoGalleryLabel")),Z.a.createElement(O.a,{onClick:this.handleCloseVideoGallery},Z.a.createElement(I.a,null))),Z.a.createElement(E.a,{className:t.devider}),Z.a.createElement(v.a,null,Z.a.createElement(De,{set:this.onSetVideo,close:this.handleCloseVideoGallery}))),Z.a.createElement(te,{open:l,onClose:this.handleCloseVideoLink,onAddLink:this.onSetVideo}),Z.a.createElement(je.a,{onClose:this.handleTogglePermission,open:R,onAddAccessList:this.handleAccessList,access:D}))}}]),t}(X.Component),Ze=Object($.c)("translations")(Xe),Je=(Ye=Object(j.a)((function(e){return Object(qe.a)({fullPageXs:Object(o.a)({minWidth:500,maxWidth:500,maxHeight:540},e.breakpoints.down("xs"),{minWidth:"100%",maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",margin:0,overflowY:"auto"}),backdrop:{top:0,left:0,width:"100%",height:"100%",position:"fixed",willChange:"opacity",backgroundColor:"rgba(251, 249, 249, 0.5)",WebkitTapHighlightColor:"transparent"},input:{},content:{padding:0,paddingTop:0},dialogRoot:{paddingTop:0},popperOpen:{zIndex:10},popperClose:{pointerEvents:"none",zIndex:0},author:{paddingRight:70},dialogTitle:{padding:0},iconButtonsRoot:{justifyContent:"flex-start",margin:"0px 4px"},playVideo:{position:"absolute",right:"45%",top:"45%",cursor:"pointer",backgroundColor:"#f1efeca3",borderRadius:"50%",height:60,padding:0},playIcon:{width:60,height:60,fill:"red"},noDisplay:{display:"none"},playIconButtonRoot:{width:60,height:60},galleryActions:{margin:0,background:"#fff",WebkitBoxSizing:"border-box",boxSizing:"border-box",height:56,textAlign:"center",padding:4,minWidth:0,display:"flex",flexDirection:"row",justifyContent:"space-between"},galleryDialogTitle:{color:"#676767"},galleryDialogIcon:{},galleryAction:{margin:0,padding:0,minWidth:0},devider:{marginBottom:10},videoGallery:{},permission:{fontWeight:400,fontSize:"14px",cursor:"pointer",color:"blue"},disableComponent:{opacity:"0.2","pointer-events":"none"}})}))(Ze),Object(J.connect)(Fe,Ve)(Ye));t.a=Je},584:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(8),o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"00000000-0000-0000-0000-000000000000",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(a.a)(this,e),this.photos=t,this.cover=n,this.coverId=o,this.count=i,this.title=r}},592:function(e,t,n){"use strict";var a=n(15),o=n(8),i=n(43),r=n(49),s=n(45),l=n(86),c=n(48),u=n(1128),d=n(824),p=n(1135),m=n(1129),h=n(1144),f=n(760),g=n(524),b=n(532),v=n(279),y=n(1112),E=n(16),C=n(684),O=n.n(C),w=n(629),x=n.n(w),j=n(683),k=n.n(j),P=n(546),S=n.n(P),N=n(585),I=n.n(N),T=n(630),L=n.n(T),R=n(154),A=n.n(R),D=n(0),M=n.n(D),W=n(4),z=n(1150),U=n(800),_=n(1130),B=n(696),V=n(308),F=n(522),q=n(474),H=n(53),G=n(473),Y=n(471),X=n(470),Z=n(202),J=n(58),K=n.n(J),$=n(36),Q=n(180),ee=n(61),te=n(106),ne=n(583),ae=n.n(ne),oe=n(155),ie=n(38),re=n(52),se=function(e){return{textField:{fontWeight:400,fontSize:"14px ",width:"100%",margin:0,WebkitBoxShadow:"none",boxShadow:"none",borderColor:"transparent",height:38,border:"1px solid #000",resize:"none"},header:{padding:"2px 3px 3px 10px"},popperOpen:{zIndex:11},popperClose:{pointerEvents:"none",zIndex:0},iconButton:{top:0,display:"flex",right:4,flexDirection:"row-reverse",position:"absolute"},commentBody:{color:"black",fontWeight:400,fontSize:"12px",height:"100%",border:"none",width:"100%",outline:"none",resize:"none"},rightIconMenuItem:{fontSize:12,fontWeight:300,paddingLeft:6,paddingRight:6,paddingTop:0,paddingBottom:0},moreIcon:{width:"0.6em",height:"0.6em"},menuRoot:{marginTop:7,marginRight:7}}},le=n(39),ce=function(e,t){return{delete:function(t,n){return e(oe.dbDeleteComment(t,n))},update:function(t){e(oe.dbUpdateComment(t))},openEditor:function(){return e(oe.openCommentEditor({id:t.comment.get("id","0"),postId:t.comment.get("postId")}))},closeEditor:function(){return e(oe.closeCommentEditor(t.comment.get("postId"),t.comment.get("id","0")))},getUserInfo:function(){return e(ie.dbGetUserInfoByUserId(t.comment.get("ownerUserId","0"),""))}}},ue=function(){var e=le.a.selectCurrentUser(),t=re.a.selectUserProfileById();return function(n,a){var o=a.comment.get("ownerUserId","0"),i=e(n),r=i.get("userId","0");return{uid:r,avatar:a.comment.get("ownerAvatar","0"),fullName:i.get("ownerDisplayName","loading..."),isCommentOwner:r===o,commentOwner:t(n,{userId:o})}}},de=function(e){var t=Object(te.c)("translations")(e);return Object(ee.connect)(ue,ce)(ae()(se)(t))}(function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).buttonMenu=null,n.styles={author:{fontSize:"10px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"},textarea:{fontWeight:400,fontSize:"14px",border:"none",width:"100%",outline:"none",resize:"none"},cancel:{float:"right",clear:"both",zIndex:5,margin:"0px 5px 5px 0px",fontWeight:400}},n.textareaRef=void 0,n.divCommentRef=void 0,n.inputText=void 0,n.divComment=void 0,n.handleEditComment=function(e){n.setState({openMenu:!1}),n.props.openEditor()},n.handleCancelEdit=function(e){n.setState({text:n.state.initialText}),n.props.closeEditor()},n.handleUpdateComment=function(e){var t=n.props.comment.set("text",n.state.text);n.props.update(t),n.setState({initialText:n.state.text})},n.handleOnChange=function(e){var t=e.target.value;0===t.length||""===t.trim()||t.trim()===n.state.initialText?n.setState({text:t,editDisabled:!0}):n.setState({text:t,editDisabled:!1})},n.handleDelete=function(e,t,a){n.props.delete(t,a)},n.handleCommentMenu=function(e){n.setState({openMenu:!0,anchorEl:Object($.findDOMNode)(n.buttonMenu)})},n.handleCloseCommentMenu=function(){n.setState({openMenu:!1})},n.textareaRef=function(e){n.inputText=e},n.divCommentRef=function(e){n.divComment=e},n.state={text:n.props.comment.get("text",""),initialText:n.props.comment.get("text",""),editDisabled:!0,isPostOwner:!1,openMenu:!1,anchorEl:null},n.handleDelete=n.handleDelete.bind(Object(l.a)(n)),n.handleUpdateComment=n.handleUpdateComment.bind(Object(l.a)(n)),n.handleOnChange=n.handleOnChange.bind(Object(l.a)(n)),n.handleCancelEdit=n.handleCancelEdit.bind(Object(l.a)(n)),n.handleEditComment=n.handleEditComment.bind(Object(l.a)(n)),n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.commentOwner;this.props.isCommentOwner||e||this.props.getUserInfo()}},{key:"render",value:function(){var e=this,t=this.props,n=t.comment,a=t.classes,o=(t.fullName,t.avatar,t.t),i=t.editorStatus,r=this.state,s=r.openMenu,l=r.anchorEl,c=M.a.createElement("div",{className:a.menuRoot},this.props.isCommentOwner&&M.a.createElement(g.a,{buttonRef:function(t){e.buttonMenu=t},"aria-owns":s?"comment-menu":"","aria-haspopup":"false",onClick:this.handleCommentMenu},M.a.createElement(S.a,{className:a.moreIcon})),M.a.createElement(Y.a,{open:s,anchorEl:l,anchorReference:"anchorEl",anchorPosition:{top:0,left:0},onClose:this.handleCloseCommentMenu,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},M.a.createElement(G.a,{role:"menu"},this.props.isCommentOwner?M.a.createElement(y.a,{className:a.rightIconMenuItem,onClick:this.handleEditComment},o("comment.editButton")):"",this.props.isCommentOwner||this.props.isPostOwner?M.a.createElement(y.a,{className:a.rightIconMenuItem,onClick:function(t){return e.handleDelete(t,n.get("id","0"),n.get("postId","0"))}},o("comment.deleteButton")):""))),d=n.get("ownerUserId"),p=M.a.createElement("div",{style:{outline:"none",flex:"auto",flexGrow:1}},i?M.a.createElement(X.a,{placeholder:o("comment.updateCommentPlaceholder"),autoFocus:!0,rowsMax:"4",value:this.state.text,onChange:this.handleOnChange,className:a.textField}):M.a.createElement("div",{className:A()("animate2-top10",a.commentBody)},this.state.text),M.a.createElement("div",{style:{display:i?"flex":"none",flexDirection:"row-reverse"}},M.a.createElement(U.a,{color:"primary",disabled:this.state.editDisabled,style:{float:"right",clear:"both",zIndex:5,margin:"0px 5px 5px 0px",fontWeight:400},onClick:this.handleUpdateComment}," ",o("comment.updateButton")," "),M.a.createElement(U.a,{color:"primary",style:this.styles.cancel,onClick:this.handleCancelEdit}," ",o("comment.cancelButton")," ")));return M.a.createElement("div",{className:"animate-top",key:n.get("id","0")},M.a.createElement(V.a,{elevation:0,className:"animate2-top10",style:{position:"relative",padding:"",display:this.state.display?"none":"block"}},M.a.createElement(u.a,{elevation:0},M.a.createElement(m.a,{className:a.header,title:i?"":M.a.createElement((function(){return M.a.createElement("div",null,M.a.createElement(Q.a,{to:"/".concat(d)}," ",M.a.createElement("span",{style:e.styles.author},n.get("ownerDisplayName","Loading..."))),M.a.createElement("span",{style:{fontWeight:400,fontSize:"8px"}},K()(n.get("creationDate",0)).local().fromNow()))}),null),subheader:p,avatar:M.a.createElement(Q.a,{to:"/".concat(d)},M.a.createElement(Z.a,{fullName:n.get("ownerDisplayName",""),fileName:n.get("ownerAvatar",""),size:24})),action:!this.props.isCommentOwner&&!this.props.isPostOwner&&this.props.disableComments||i?"":c}))))}}]),t}(D.Component)),pe=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).commentList=function(){var e=Object(W.Map)(n.props.comments),t=Object(W.Map)(n.props.commentsEditorStatus);if(!e.isEmpty()){var a=H.c(e.valueSeq()),o=[];return a.forEach((function(e){o.push(M.a.createElement(de,{key:e.get("id"),comment:e,isPostOwner:n.props.isPostOwner,disableComments:n.props.disableComments,editorStatus:t.get(e.get("id","0"),!1)}))})),o}},n.state={},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.postId;return M.a.createElement(q.a,{key:"comment-list-".concat(n),className:t.list},this.commentList())}}]),t}(D.Component),me=Object(ee.connect)((function(e,t){return{commentsEditorStatus:e.getIn(["comment","editorStatus",t.postId],{})}}),(function(e,t){return{}}))(Object(E.a)((function(e){return{list:{width:"100%",maxHeight:290,overflowY:"auto",overflowX:"visible"}}}))(pe)),he=n(19),fe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).id=void 0,n.postId=void 0,n.text=void 0,n.score=void 0,n.creationDate=void 0,n.ownerDisplayName=void 0,n.ownerAvatar=void 0,n.ownerUserId=void 0,n}return Object(c.a)(t,e),t}(n(14).a),ge=n(539),be=n(17),ve=n(50),ye=n(33),Ee=function(e){return{textField:{fontWeight:400,fontSize:"14px"},header:{padding:"2px 3px 3px 10px"},commentBody:{color:"black",fontWeight:400,fontSize:"12px",height:"100%",border:"none",width:"100%",outline:"none",resize:"none",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},author:{fontSize:"10px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"},noUnderline:{display:"none"},postButton:{flexDirection:"row-reverse"},cardHeaderContent:{flex:"1 1 auto",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}},Ce=function(e,t){return{send:function(t){e(be.c.dbAddComment(t))}}},Oe=function(){var e=le.a.selectCurrentUser(),t=ge.a.selectRequest();return function(n,a){var o=a.postId,i=ve.a.createServerRequestId(ye.a.CommentGetComments,o),r=e(n),s=t(n,{requestId:i});return{commentsRequestStatus:s?s.status:he.a.NoAction,uid:r.get("userId",""),avatar:r.get("avatar",""),fullName:r.get("fullName","")}}},we=function(e){var t=Object(te.c)("translations")(e);return Object(ee.connect)(Oe,Ce)(ae()(Ee)(t))}(function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).styles={commentItem:{height:"60px",position:"",zIndex:""},toggleShowList:{height:"60px",zIndex:5},writeCommentTextField:{width:"100%",fontWeight:400,fontSize:"14px"},progressbar:{height:"1.5px",backgroundColor:"rgb(245, 243, 243)",color:_.a.A400},secondaryText:{fontSize:"13px",lineHeight:"20px",color:"rgba(0,0,0,0.87)",fontWeight:300,whiteSpace:"pre-wrap"},primaryText:{fontSize:"13px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"}},n.clearCommentWrite=function(){n.setState({commentText:"",postDisable:!0})},n.handlePostComment=function(){var e=n.props,t=e.postId,a=e.fullName,o=e.avatar,i=e.uid,r=new fe;r.postId=t,r.text=n.state.commentText,r.ownerAvatar=o,r.ownerDisplayName=a,r.ownerUserId=i,n.props.send(Object(W.Map)(r)),n.clearCommentWrite()},n.handleChange=function(e){var t=e.target.value;n.setState({commentText:t}),0===t.length||""===t.trim()?n.setState({commentText:"",postDisable:!0}):n.setState({commentText:t,postDisable:!1})},n.commentWriteBox=function(){var e=n.props,t=e.classes,a=e.postId,o=e.fullName,i=e.avatar,r=e.t;return M.a.createElement("div",null,M.a.createElement(B.a,null),M.a.createElement(V.a,{key:a+"-commentwrite",elevation:0,className:"animate2-top10"},M.a.createElement(u.a,{elevation:0},M.a.createElement(m.a,{className:t.header,avatar:M.a.createElement(Z.a,{fullName:o,fileName:i,size:24}),subheader:M.a.createElement(F.a,{autoFocus:!0,placeholder:r("comment.addCommentPlaceholder"),multiline:!0,rowsMax:"4",InputProps:{disableUnderline:!0,autoFocus:!0,fullWidth:!0},value:n.state.commentText,onChange:n.handleChange,className:t.textField,fullWidth:!0})}),M.a.createElement(d.a,{className:t.postButton},M.a.createElement(U.a,{color:"primary",disabled:n.state.postDisable,onClick:n.handlePostComment},r("comment.postButton"))))))},n.loadCommentsList=function(){var e=n.props,t=e.postId,a=e.open,o=n.props.comments||Object(W.Map)({});return o&&o.size>0?M.a.createElement(V.a,{elevation:0,style:a?{display:"block",padding:"0px 0px"}:{display:"none",padding:"12px 16px"}},M.a.createElement(me,{comments:o,isPostOwner:n.props.isPostOwner,disableComments:n.props.disableComments,postId:t})):""},n.state={commentText:"",postDisable:!0},n.handlePostComment=n.handlePostComment.bind(Object(l.a)(n)),n.clearCommentWrite=n.clearCommentWrite.bind(Object(l.a)(n)),n.commentWriteBox=n.commentWriteBox.bind(Object(l.a)(n)),n.loadCommentsList=n.loadCommentsList.bind(Object(l.a)(n)),n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=!1;return z.a(this.state,t)?e.open!==this.props.open?n=!0:e.disableComments!==this.props.disableComments?n=!0:e.commentsRequestStatus!==this.props.commentsRequestStatus?n=!0:e.comments!==this.props.comments&&(n=!0):n=!0,n}},{key:"render",value:function(){var e=this.props,t=e.postId,n=e.open,a=e.comments,o=e.commentsRequestStatus,i=M.a.createElement(b.a,{style:this.styles.progressbar,variant:"indeterminate"});return M.a.createElement("div",{key:t+"-comments-group"},a&&a.size>0&&M.a.createElement(B.a,null),M.a.createElement("div",{style:n?{display:"block"}:{display:"none"}},M.a.createElement(V.a,{elevation:0,className:"animate-top",style:n?{display:"none"}:{display:"block"}},M.a.createElement("div",{style:{position:"relative",height:"60px"}},M.a.createElement(U.a,{style:this.styles.toggleShowList,fullWidth:!0,onClick:this.props.onToggleRequest}," "," ")))),n?o===he.a.Sent?i:this.loadCommentsList():"",!this.props.disableComments&&n?this.commentWriteBox():"")}}]),t}(D.Component)),xe=n(544),je=n(569),ke=n(931),Pe=n(292),Se=n.n(Pe),Ne=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={expanded:!1,truncated:!1},n.toggleLines=n.toggleLines.bind(Object(l.a)(n)),n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"toggleLines",value:function(e){e.preventDefault(),this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.lines,o=e.classes,i=e.body,r=this.state.expanded,s=M.a.createElement("div",{onClick:this.toggleLines,className:A()(o.root,Object(a.a)({},o.expanded,!r))},M.a.createElement(ke.a,{in:r,collapsedHeight:"173px"},t));return(ve.a.isEmpty(i)?0:ve.a.getNumberOfLines(i))>n?s:t}}]),t}(D.Component);Ne.defaultProps={lines:3,more:"Read more",less:"Show less"};var Ie,Te=Se()((function(e){return{root:{position:"relative"},expanded:{"&:before":{content:"",float:"left",width:5,height:"100%"},"&:after":{content:'"\\002026"',fontSize:34,fontWeight:500,color:"#4285f4",boxSizing:"content-box",float:"right",position:"absolute",top:150,left:"100%",height:20,width:"2em",marginLeft:"-2em",paddingRight:5,textAlign:"right",background:"linear-gradient(to right,rgba(255,255,255,0),white 50%,white)",cursor:"pointer"}}}}))(Ne),Le=n(1114),Re=n(1113),Ae=n(530),De=n(178),Me=n(671),We=n.n(Me),ze=n(1136),Ue=n(1137),_e=n(1138),Be=n(1139),Ve=n(1140),Fe=n(1141),qe=n(1142),He=n(1143),Ge=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.t,a=e.shareOpen,o=e.onClose,i=e.openCopyLink,r=e.post,s=e.onCopyLink;return M.a.createElement(Le.a,{className:t.fullPageXs,title:"Share On",open:a,onClose:o},M.a.createElement(V.a,{className:t.shareLinkPaper},i?M.a.createElement("div",null,M.a.createElement(F.a,{autoFocus:!0,fullWidth:!0,id:"text-field-default",defaultValue:"".concat(window.location.origin,"/").concat(r.get("ownerUserId"),"/posts/").concat(r.get("id"))}),M.a.createElement(De.a,{className:A()("animate-top",t.clipboard),variant:"h5",component:"h2"},"Link has been copied to clipboard ...")):M.a.createElement(G.a,null,M.a.createElement("div",null,M.a.createElement(ze.a,{onShareWindowClose:o,url:"".concat(window.location.origin,"/").concat(r.get("ownerUserId"),"/posts/").concat(r.get("id")),quote:r.get("body"),hashtag:r.get("tags",Object(W.List)([])).count()>0?"#".concat(r.getIn(["tags",0],"hashtag")):null},M.a.createElement(y.a,null,M.a.createElement(Re.a,{classes:{root:t.networkShare}},M.a.createElement(Ue.a,{size:32,round:!0})),M.a.createElement(Ae.a,{inset:!0,primary:n("post.facebookButton")})))),M.a.createElement("div",null,M.a.createElement(_e.a,{onShareWindowClose:o,url:"".concat(window.location.origin,"/").concat(r.get("ownerUserId"),"/posts/").concat(r.get("id")),quote:r.get("body"),hashtag:"#".concat(r.getIn(["tags",0],""))},M.a.createElement(y.a,null,M.a.createElement(Re.a,{classes:{root:t.networkShare}},M.a.createElement(Be.a,{size:32,round:!0})),M.a.createElement(Ae.a,{inset:!0,primary:n("post.twitterButton")})))),M.a.createElement("div",null,M.a.createElement(Ve.a,{onShareWindowClose:o,url:"".concat(window.location.origin,"/").concat(r.get("ownerUserId"),"/posts/").concat(r.get("id")),quote:r.get("body"),hashtag:"#".concat(r.getIn(["tags",0],""))},M.a.createElement(y.a,null,M.a.createElement(Re.a,{classes:{root:t.networkShare}},M.a.createElement(Fe.a,{size:32,round:!0})),M.a.createElement(Ae.a,{inset:!0,primary:n("post.linkedinButton")})))),M.a.createElement("div",null,M.a.createElement(qe.a,{onShareWindowClose:o,url:"".concat(window.location.origin,"/").concat(r.get("ownerUserId"),"/posts/").concat(r.get("id")),quote:r.get("body"),hashtag:"#".concat(r.getIn(["tags",0],""))},M.a.createElement(y.a,null,M.a.createElement(Re.a,{classes:{root:t.networkShare}},M.a.createElement(He.a,{size:32,round:!0})),M.a.createElement(Ae.a,{inset:!0,primary:n("post.googlePlusButton")})))),M.a.createElement(y.a,{onClick:s},M.a.createElement(Re.a,null,M.a.createElement(We.a,null)),M.a.createElement(Ae.a,{inset:!0,primary:n("post.copyLinkButton")})))))}}]),t}(D.Component),Ye=Object(te.c)("translations")(Ge),Xe=Object(ee.connect)((function(e,t){return{}}),(function(e,t){return{}}))(Object(E.a)((function(e){return{image:{verticalAlign:"top",maxWidth:"100%",minWidth:"100%",width:"100%"},clipboard:{fontSize:"18px",textAlign:"center",marginTop:"10px",color:"#1e882d",fontWeight:400},networkShare:{width:"100%",height:"100%"},fullPageXs:Object(a.a)({},e.breakpoints.down("xs"),{width:"100%",height:"100%",margin:0,overflowY:"auto"}),shareLinkPaper:{minHeight:80,padding:10,minWidth:460}}}))(Ye)),Ze=n(672),Je=n.n(Ze),Ke=n(80),$e=n(204),Qe=n(673),et=n.n(Qe),tt=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleClick=function(e,t){var a=n.props.onClick;a&&a(e,t)},n.state={},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"getData",value:function(){var e=this,t=this.props,n=t.classes,o=t.images,i=Math.floor(2*Math.random()+1);return o.length>1?M.a.createElement("div",{className:n.container},M.a.createElement("div",{className:A()(Object(a.a)({},n.firstColumn,1===i),Object(a.a)({},n.firstRow,2===i))},M.a.createElement(h.a,{image:o[0].url,onClick:function(t){return e.handleClick(t,0)},className:A()(n.mediaCard,n.featureCard)})),M.a.createElement("div",{className:A()(Object(a.a)({},n.column,1===i),Object(a.a)({},n.row,2===i))},o.map((function(t,a){return 0!==a?M.a.createElement(h.a,{key:a,onClick:function(t){return e.handleClick(t,a)},image:t.url,className:n.mediaCard}):""})))):M.a.createElement(xe.a,{fileName:o[0].url,onClick:function(t){return e.handleClick(t,0)}})}},{key:"render",value:function(){var e=this.props.classes;return M.a.createElement("div",{className:e.mainContainer},this.getData())}}]),t}(D.Component),nt=Object(E.a)((function(e){return{mainContainer:{width:"100%"},container:{display:"flex",flexWrap:"wrap",marginTop:20,width:"100%",height:415,position:"relative"},firstRow:{flex:"100%",display:"flex",paddingBottom:1},row:{flex:"100%",display:"flex",marginTop:1,marginBottom:1},firstColumn:{flex:"50%",display:"flex",flexDirection:"column",paddingRight:1},column:{flex:"50%",display:"flex",flexDirection:"column",paddingLeft:1,paddingRight:2},mediaCard:{height:"100%",width:"100%",backgroundSize:"cover",margin:1}}}))(tt),at=n(604),ot=n.n(at),it=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleImageClick=function(e,t){t(e)},n.state={},n.handleImageClick=n.handleImageClick.bind(Object(l.a)(n)),n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!z.a(e.images,this.props.images)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=t.images,i=t.currentAlbum;if(o&&o.size>0){var r=[];o.valueSeq().forEach((function(e){r.push({src:e,url:e,id:e})}));var s=r.slice(0,4);return M.a.createElement(ot.a,{images:r,renderImageFunc:function(t){return M.a.createElement("div",{className:n.root},M.a.createElement(nt,{images:s,onClick:function(n,a){return e.handleImageClick(a,t)}}),M.a.createElement("div",{className:A()(n.titleContainer,Object(a.a)({},n.noDisplay,!(i&&i.get("album").get("title"))))},M.a.createElement("div",{className:n.aboveContainer}),M.a.createElement("div",{className:n.bottomContainer}),M.a.createElement(Q.a,{to:"/u/".concat(i&&i.get("ownerUserId"),"/album/").concat(i&&i.get("id"))},M.a.createElement(De.a,{className:n.title},i&&i.get("album").get("title")))))}})}return M.a.createElement("div",{className:n.noAlbum},M.a.createElement(et.a,{className:n.noAlbumIcon}))}}]),t}(D.Component),rt=Se()((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",position:"relative",backgroundColor:e.palette.background.paper},gridList:{width:500,height:450},subheader:{width:"100%"},descRoot:{bottom:0,left:0,position:"absolute",right:0,zIndex:1},topGradiant:{background:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.6))",height:32},shadow:{backgroundColor:"rgba(0,0,0,.6)",padding:24,textAlign:"center",verticalAlign:"middle"},albumTitle:{color:"white"},noDisplay:{display:"none"},noAlbum:{display:"flex",justifyContent:"center",alignItems:"center"},noAlbumIcon:{fontSize:50},aboveContainer:{background:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.6))",height:30},bottomContainer:{backgroundColor:"rgba(0,0,0,.6)",height:70},titleContainer:{position:"absolute",bottom:0,left:1,right:1,height:100},title:{textAlign:"center",fontSize:22,fontWeight:400,color:"white",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}))(it),st=n(674),lt=n.n(st),ct=n(675),ut=n.n(ct),dt=n(681),pt=n.n(dt),mt=n(22),ht=n(179),ft=n(5),gt=n(47),bt=n(156),vt=n(27),yt=function(e,t){return e.getIn(["comment","postComments",t.postId],Object(W.Map)({}))},Et=function(){return Object(vt.a)([yt],(function(e){return e}))},Ct=n(30),Ot=function(e,t){var n=t.post;return{vote:function(){return e(bt.dbAddVote(n.get("id"),n.get("ownerUserId")))},unvote:function(){return e(bt.dbDeleteVote(n.get("id"),n.get("ownerUserId")))},delete:function(t){return e(gt.dbDeletePost(t))},toggleDisableComments:function(t){e(gt.dbUpdatePost(n.set("disableComments",t),(function(e){return e})))},toggleSharingComments:function(t){e(gt.dbUpdatePost(n.set("disableSharing",t),(function(e){return e})))},goTo:function(t){return e(Object(ht.a)(t))},setHomeTitle:function(t){return e(ft.setHeaderTitle(t||""))},getPostComments:function(t,n,a,o){return e(oe.dbFetchComments(t,n,a,o))}}},wt=function(){var e=Ct.b.selectCurrentUser(),t=Et();return function(n,a){var o=t(n,{postId:a.post.get("id")}),i=e(n).get("userId"),r=a.post.get("score",0),s=a.post.getIn(["votes",i],!1);return{commentList:o,avatar:a.post.get("ownerAvatar",""),fullName:a.post.get("ownerDisplayName",""),voteCount:r,currentUserVote:s,isPostOwner:i===a.post.get("ownerUserId")}}},xt=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).styles={dialog:{width:"",maxWidth:"530px",borderRadius:"4px"}},n.handleOpenComments=function(){var e=n.props,t=e.getPostComments,a=e.post;t(a.get("ownerUserId"),a.get("id"),0,10),n.setState({openComments:!n.state.openComments})},n.handleOpenPostWrite=function(){n.closePostMenu(),n.setState({openPostWrite:!0})},n.handleClosePostWrite=function(){n.setState({openPostWrite:!1})},n.handleDelete=function(){var e=n.props.post;n.closePostMenu(),n.props.delete(e.get("id"))},n.openPostMenu=function(e){n.setState({postMenuAnchorEl:e.currentTarget,isPostMenuOpen:!0})},n.closePostMenu=function(){n.setState({postMenuAnchorEl:null,isPostMenuOpen:!1})},n.handleCopyLink=function(){var e=n.props.t;n.setState({openCopyLink:!0,shareTitle:e("post.copyLinkButton")})},n.handleOpenShare=function(){var e=n.props.post;Je()("".concat(window.location.origin,"/").concat(e.get("ownerUserId"),"/posts/").concat(e.get("id"))),n.setState({shareOpen:!0})},n.handleCloseShare=function(){n.setState({shareOpen:!1,shareTitle:"Share On",openCopyLink:!1})},n.handleVote=function(){n.props.currentUserVote?n.props.unvote():n.props.vote()},n.getOpenCommentGroup=function(e){n.setState({openCommentGroup:e})},n.onShowVideo=function(){n.setState({showVideo:!0})},n.getPermissionLabel=function(){var e=n.props,t=e.t,a=e.post.get("permission"),o="";return a===Ke.a.Public?o=t("permission.public"):a===Ke.a.Circles?o=t("permission.circles"):a===Ke.a.OnlyMe&&(o=t("permission.onlyMe")),o},n.rightIconMenu=function(){var e=n.props,t=e.post,a=e.t,o=n.state,i=o.postMenuAnchorEl,r=o.isPostMenuOpen;return M.a.createElement("div",null,M.a.createElement(g.a,{onClick:n.openPostMenu.bind(Object(l.a)(n))},M.a.createElement(S.a,null)),M.a.createElement(v.a,{open:r,anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:n.closePostMenu},t.get("postTypeId")!==$e.a.Album&&M.a.createElement(y.a,{onClick:n.handleOpenPostWrite}," ",a("post.edit")," "),M.a.createElement(y.a,{onClick:n.handleDelete}," ",a("post.delete")," "),M.a.createElement(y.a,{onClick:function(){return n.props.toggleDisableComments(!t.get("disableComments"))}},t.get("disableComments")?a("post.enableComments"):a("post.disableComments")),M.a.createElement(y.a,{onClick:function(){return n.props.toggleSharingComments(!t.get("disableSharing"))}},t.get("disableSharing")?a("post.enableSharing"):a("post.disableSharing"))))};var a=e.post;return n.state={text:a.get("body",""),readMoreState:!1,openComments:!1,shareOpen:!1,disableComments:a.get("disableComments"),disableSharing:a.get("disableSharing"),shareTitle:"Share On",openCopyLink:!1,openPostWrite:!1,postMenuAnchorEl:null,isPostMenuOpen:!1,showVideo:!1},n.handleReadMore=n.handleReadMore.bind(Object(l.a)(n)),n.getOpenCommentGroup=n.getOpenCommentGroup.bind(Object(l.a)(n)),n.handleVote=n.handleVote.bind(Object(l.a)(n)),n.handleOpenShare=n.handleOpenShare.bind(Object(l.a)(n)),n.handleCloseShare=n.handleCloseShare.bind(Object(l.a)(n)),n.handleCopyLink=n.handleCopyLink.bind(Object(l.a)(n)),n.handleDelete=n.handleDelete.bind(Object(l.a)(n)),n.handleOpenPostWrite=n.handleOpenPostWrite.bind(Object(l.a)(n)),n.handleClosePostWrite=n.handleClosePostWrite.bind(Object(l.a)(n)),n.handleOpenComments=n.handleOpenComments.bind(Object(l.a)(n)),n.rightIconMenu=n.rightIconMenu.bind(Object(l.a)(n)),n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"handleReadMore",value:function(e){this.setState({readMoreState:!this.state.readMoreState})}},{key:"shouldComponentUpdate",value:function(e,t){var n=!1;return e.post.equals(this.props.post)?e.commentList!==this.props.commentList?n=!0:this.props.getPostComments!==e.getPostComments?n=!0:z.a(this.state,t)||(n=!0):n=!0,n}},{key:"getAlbum",value:function(){var e=this.props.post,t=e.get("album"),n=e.get("id"),a=e.get("postTypeId");return t&&t.get("photos")&&(a===$e.a.Album||a===$e.a.PhotoGallery)?M.a.createElement(rt,{key:"post-album-grid-".concat(n),currentAlbum:e,images:t.get("photos")}):""}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.setHomeTitle,o=e.goTo,i=e.isPostOwner,r=e.commentList,s=e.classes,l=this.state.showVideo,c=t.get("ownerUserId"),v=t.get("ownerDisplayName"),y=t.get("creationDate"),E=t.get("ownerAvatar"),C=t.get("image"),w=t.get("body"),j=t.get("video"),P=t.get("thumbnail"),S=t.get("postTypeId"),N=t.get("id"),T=t.get("disableComments"),R=t.get("commentCounter"),D=t.get("disableSharing"),W=t.get("score");t.get("version");return M.a.createElement(u.a,{key:N+"post-card",className:"animate-top"},M.a.createElement(m.a,{title:M.a.createElement(Q.a,{to:"/".concat(c)},v),subheader:y?(mt.a.dataFormat.postVersion,K()(y).local().fromNow()+" | ".concat(this.getPermissionLabel())):M.a.createElement(b.a,{color:"primary"}),avatar:M.a.createElement(Q.a,{to:"/".concat(c)},M.a.createElement(Z.a,{fullName:v,fileName:E,size:36})),action:i?this.rightIconMenu():""}),C&&""!==C&&S===$e.a.Photo||P&&""!==P&&j&&""!==j&&S===$e.a.Video?M.a.createElement(h.a,{className:s.cardMedia,image:S===$e.a.Photo?C:P},l?M.a.createElement("div",{className:"player-wrapper"},M.a.createElement(ut.a,{controls:!0,className:"react-player",width:"100%",height:"100%",url:j,playing:!0})):M.a.createElement(M.a.Fragment,null,M.a.createElement(xe.a,{fileName:S===$e.a.Photo?C:P}),M.a.createElement("span",{className:A()(s.playVideo,Object(a.a)({},s.noDisplay,S!==$e.a.Video))},M.a.createElement(g.a,{className:s.playIconButtonRoot,onClick:this.onShowVideo},M.a.createElement(I.a,{className:s.playIcon}))))):"",this.getAlbum(),M.a.createElement(p.a,{className:s.postBody},M.a.createElement(Te,{body:w},M.a.createElement(lt.a,{properties:{target:"_blank",style:{color:"blue"},onClick:function(e){return e.stopPropagation()}}},pt()(w,/#(\w+)/g,(function(e,t){return M.a.createElement(Q.a,{style:{color:"green"},key:e+t,to:"/tag/".concat(e),onClick:function(t){t.preventDefault(),t.stopPropagation(),o("/tag/".concat(e)),n("#".concat(e))}},"#",e)}))))),M.a.createElement(d.a,null,M.a.createElement("div",{className:s.vote},M.a.createElement(g.a,{className:s.iconButton,onClick:this.handleVote,"aria-label":"Love"},M.a.createElement(f.a,{className:s.iconButton,checkedIcon:M.a.createElement(x.a,{style:{fill:"#4CAF50"}}),icon:M.a.createElement(k.a,{style:{fill:"#757575"}}),checked:this.props.currentUserVote})),M.a.createElement("div",{className:s.voteCounter}," ",W>0?W:""," ")),M.a.createElement("div",{style:{display:"inherit"}},M.a.createElement(g.a,{className:s.iconButton,onClick:this.handleOpenComments,"aria-label":"Comment"},M.a.createElement(O.a,null)),M.a.createElement("div",{className:s.commentCounter},R>0?R:""," ")),D?"":M.a.createElement(g.a,{className:s.iconButton,onClick:this.handleOpenShare,"aria-label":"Comment"},M.a.createElement(L.a,null))),M.a.createElement(we,{open:this.state.openComments,comments:r,ownerPostUserId:c,onToggleRequest:this.handleOpenComments,isPostOwner:this.props.isPostOwner,disableComments:T,postId:N}),M.a.createElement(Xe,{onClose:this.handleCloseShare,shareOpen:this.state.shareOpen,onCopyLink:this.handleCopyLink,openCopyLink:this.state.openCopyLink,post:t}),this.state.openPostWrite&&M.a.createElement(je.a,{key:"post-component-post-write-".concat(N),open:this.state.openPostWrite,onRequestClose:this.handleClosePostWrite,edit:!0,postModel:t}))}}]),t}(D.Component),jt=Object(te.c)("translations")(xt),kt=(Ie=Object(E.a)((function(e){return{iconButton:{},vote:{display:"flex",flex:1},voteCounter:{color:"#777",fontSize:12,fontWeight:500,marginTop:25,marginLeft:-18,marginRight:6},commentCounter:{fontWeight:400,color:"#777",fontSize:12,lineHeight:"48px",marginLeft:-2},popperOpen:{zIndex:10},popperClose:{pointerEvents:"none",zIndex:0},postBody:{wordWrap:"break-word",color:"rgba(0, 0, 0, 0.87)",fontSize:"0.875rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.46429em",whiteSpace:"pre-line"},image:{width:"100%",height:500},playVideo:{position:"absolute",right:"45%",top:"45%",cursor:"pointer",backgroundColor:"#f1efeca3",borderRadius:"50%",height:60,padding:0},playIcon:{width:60,height:60,marginTop:"-12px",fill:"red"},noDisplay:{display:"none"},playIconButtonRoot:{width:60,height:60},cardMedia:{position:"relative"},fullPageXs:Object(a.a)({},e.breakpoints.down("xs"),{width:"100%",height:"100%",margin:0,overflowY:"auto"})}}))(jt),Object(ee.connect)(wt,Ot)(Ie));t.a=kt},593:function(e,t,n){"use strict";var a=n(15),o=n(8),i=n(43),r=n(49),s=n(45),l=n(48),c=n(1114),u=n(1117),d=n(1116),p=n(307),m=n(1131),h=n(524),f=n(1151),g=n(1160),b=n(16),v=n(178),y=n(580),E=n.n(y),C=n(80),O=n(0),w=n.n(O),x=n(106),j=n(61),k=n(30),P=n(152),S=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleSetPermission=function(e){var t=n.props,a=t.onAddAccessList,o=t.followingIds,i=t.currentUser,r=[];e===C.a.Circles&&o&&i&&i.userId&&(r=o).push(i.userId),a(r,e)},n.handleInputChange=function(e){var t=e.target,o="checkbox"===t.type?t.checked:t.value,i=t.name;n.setState(Object(a.a)({},i,o))};var i=e.access;return n.state={selectedValue:i,disabledOk:!0},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.t,o=t.open,i=t.onClose,r=this.state.selectedValue;return w.a.createElement(c.a,{PaperProps:{className:n.fullPageXs},open:o,onClose:i,maxWidth:"md"},w.a.createElement(u.a,{className:n.dialogAction},w.a.createElement(v.a,{variant:"h6",component:"div",className:n.galleryDialogTitle},w.a.createElement(h.a,{className:n.header,onClick:i},w.a.createElement(E.a,null)),a("permission.titleLabel"))),w.a.createElement(d.a,{className:n.dialogContent},w.a.createElement(p.a,{component:"div",required:!0,className:n.formControl},w.a.createElement(g.a,{"aria-label":"selectedValue",name:"selectedValue",className:n.group,value:r,onChange:this.handleInputChange},w.a.createElement(m.a,{className:n.permissionItem,onClick:function(){return e.handleSetPermission(C.a.OnlyMe)},value:C.a.OnlyMe,control:w.a.createElement(f.a,null),label:a("permission.onlyMe")}),w.a.createElement(m.a,{className:n.permissionItem,onClick:function(){return e.handleSetPermission(C.a.Public)},value:C.a.Public,control:w.a.createElement(f.a,null),label:a("permission.public")}),w.a.createElement(m.a,{className:n.permissionItem,onClick:function(){return e.handleSetPermission(C.a.Circles)},value:C.a.Circles,control:w.a.createElement(f.a,null),label:a("permission.circles")}),w.a.createElement(m.a,{className:n.permissionItem,value:C.a.Custom,disabled:!0,control:w.a.createElement(f.a,null),label:a("permission.custom")})))))}}]),t}(O.Component),N=Object(x.c)("translations")(S);t.a=Object(j.connect)((function(){var e=P.a.selectFollowingIds(),t=k.b.selectCurrentUser();return function(n){return{followingIds:e(n),currentUser:t(n).toJS()}}}),(function(e,t){return{}}))(Object(b.a)((function(e){return{fullPageXs:Object(a.a)({minWidth:400},e.breakpoints.down("xs"),{width:"100%",height:"100%",margin:0,overflowY:"auto"}),dialogTitle:{padding:0},root:{display:"flex"},formControl:{margin:e.spacing(3)},group:{margin:"".concat(e.spacing(1),"px 0")},dialogContent:{padding:0},dialogAction:{display:"flex",flexDirection:"row",justifyContent:"space-between"},permissionItem:{fontSize:15}}}))(N))},604:function(e,t,n){var a,o;e.exports=(a=n(0),o=n(36),function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t){e.exports=a},function(e,t,n){e.exports=n(12)()},function(e,t){e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=a(n(17)),r=a(n(0)),s=a(n(1)),l=(a(n(18)),n(19)),c=(s.default.any,s.default.func,s.default.node,{component:"span",childFactory:function(e){return e}}),u=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,a));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=(0,l.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=(0,l.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=(0,l.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)?i.keysToEnter.push(e):i.setState((function(t){var n=o({},t.children);return delete n[e],{children:n}}))},i.childRefs=Object.create(null),i.state={children:(0,l.getChildMapping)(n.children)},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,l.getChildMapping)(e.children),n=this.state.children;for(var a in this.setState({children:(0,l.mergeChildMappings)(n,t)}),t){var o=n&&n.hasOwnProperty(a);!t[a]||o||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(var i in n){var r=t&&t.hasOwnProperty(i);!n[i]||r||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[];for(var n in this.state.children)!function(n){var a=e.state.children[n];if(a){var o="string"!==typeof a.ref,s=e.props.childFactory(a),l=function(t){e.childRefs[n]=t};s===a&&o&&(l=(0,i.default)(a.ref,l)),t.push(r.default.cloneElement(s,{key:n,ref:l}))}}(n);var a=o({},this.props);return delete a.transitionLeave,delete a.transitionName,delete a.transitionAppear,delete a.transitionEnter,delete a.childFactory,delete a.transitionLeaveTimeout,delete a.transitionEnterTimeout,delete a.transitionAppearTimeout,delete a.component,r.default.createElement(this.props.component,a,t)},t}(r.default.Component);u.displayName="TransitionGroup",u.propTypes={},u.defaultProps=c,t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"===typeof window||!window.document||!window.document.createElement),e.exports=t.default},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};var o=(a(n(0)),n(1)),i=a(o);t.nameShape=i.default.oneOfType([i.default.string,i.default.shape({enter:i.default.string,leave:i.default.string,active:i.default.string}),i.default.shape({enter:i.default.string,enterActive:i.default.string,leave:i.default.string,leaveActive:i.default.string,appear:i.default.string,appearActive:i.default.string})])},function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(1),r=n.n(i),s=n(7),l=n(29),c=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=void 0;return e.hasRipple&&(t=o.a.createElement("circle",{cx:"12",cy:"12",r:"6"})),o.a.createElement("button",{className:"lightbox-btn "+(e.hasRipple?"lightbox-btn--ripple":""),onClick:e.onClick.bind(this)},o.a.createElement(s.a,{icon:e.icon,size:e.size},t))}}]),t}(o.a.Component);t.a=u,u.defaultProps={selectedImage:0,hasRipple:!1,size:24},u.propTypes={onClick:r.a.func.isRequired,icon:r.a.string.isRequired,hasRipple:r.a.bool,size:r.a.number}},function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(1),r=n.n(i),s=n(28),l=function(e){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"-6 -6 36 36"},e.children,s.a[e.icon].map((function(e){return o.a.createElement("path",{key:e,d:e})})))};l.propTypes={icon:r.a.string.isRequired,size:r.a.number.isRequired},t.a=l},function(e,t,n){"use strict";function a(e){return"string"!==typeof e.className?[]:e.className.split(/\s+/)}function o(e,t){t=[].concat(t);var n=a(e);for(var o in t)if(n.indexOf(t[o])>-1)return!0;return!1}function i(e,t){o(e,t)||(e.className=[e.className,t].join(" "))}function r(e,t){var n=a(e);e.className=n.filter((function(e){return e!==t})).join(" ")}t.c=o,t.a=i,t.d=r,t.b=function(e,t){o(e,t)?r(e,t):i(e,t)}},function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(11);t.default=a.a},function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(1),r=n.n(i),s=n(14),l=n(32),c=n(33),u=(n.n(c),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleLightbox=n.toggleLightbox.bind(n),n.state={showLightbox:!1,selectedImage:0},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"toggleLightbox",value:function(e){this.setState({showLightbox:!this.state.showLightbox,selectedImage:e})}},{key:"render",value:function(){var e=this.props,t=e.renderImageFunc.call(this,this.toggleLightbox,e.thumbnailWidth,e.thumbnailHeight),n=void 0;return this.state.showLightbox&&(n=o.a.createElement(l.a,null,o.a.createElement(s.a,Object.assign({},this.props,{toggleLightbox:this.toggleLightbox,selectedImage:this.state.selectedImage})))),console.log("Iamhere"),o.a.createElement(o.a.Fragment,null,t,n)}}]),t}(o.a.Component);t.a=d,d.defaultProps={showImageModifiers:!0,thumbnailWidth:"80px",thumbnailHeight:"80px",renderImageFunc:function(e,t,n,a,i){return o.a.createElement("div",null)}},d.propTypes={showImageModifiers:r.a.bool,thumbnailWidth:r.a.string,thumbnailHeight:r.a.string,renderImageFunc:r.a.func,renderDescriptionFunc:r.a.func}},function(e,t,n){"use strict";function a(){}var o=n(13);e.exports=function(){function e(e,t,n,a,i,r){if(r!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(15),r=(n.n(i),n(1)),s=n.n(r),l=n(26),c=n(6),u=n(8),d=n(31),p=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLeftClick=n.handleLeftClick.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.canMoveToLeft=n.canMoveToLeft.bind(n),n.canMoveToRight=n.canMoveToRight.bind(n),n.toggleControls=n.toggleControls.bind(n),n.handleKeyboard=n.handleKeyboard.bind(n),n.getDescriptions=n.getDescriptions.bind(n),n.state={selectedImageIndex:e.selectedImage,direction:"none",imagesDescriptions:{}},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),p(t,[{key:"getDescriptions",value:function(){var e=this,t=this.state.imagesDescriptions;this.props.images.forEach((function(n,a){if(n.description){if(n.description.then)return void n.description.then((function(n){t[a]=n,e.setState({imagesDescriptions:t})}));t[a]=n.description,e.setState({imagesDescriptions:t})}}))}},{key:"componentDidMount",value:function(){this.getDescriptions(),document.addEventListener("keydown",this.handleKeyboard),document.body.scrollTop,Object(u.a)(document.documentElement,"lightbox-open"),document.body.style.paddingRight="0px",document.body.style.overflowY="hidden"}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyboard),Math.abs(parseInt(document.documentElement.style.top,10)),Object(u.d)(document.documentElement,"lightbox-open"),document.body.style.paddingRight=null,document.body.style.overflowY=null}},{key:"handleKeyboard",value:function(e){var t=e.keyCode?e.keyCode:e.which;if(!(this.timeLastTransition&&new Date-this.timeLastTransition<350))switch(this.timeLastTransition=new Date,t){case 37:return this.handleLeftClick();case 39:return this.handleRightClick();case 27:return this.props.toggleLightbox()}}},{key:"handleLeftClick",value:function(){this.canMoveToLeft()&&this.setState({selectedImageIndex:this.state.selectedImageIndex-1,direction:"left"})}},{key:"handleRightClick",value:function(){this.canMoveToRight()&&this.setState({selectedImageIndex:this.state.selectedImageIndex+1,direction:"right"})}},{key:"canMoveToLeft",value:function(){return this.state.selectedImageIndex>0}},{key:"canMoveToRight",value:function(){return this.state.selectedImageIndex<this.props.images.length-1}},{key:"toggleControls",value:function(){Object(u.b)(this.refs.container,"hide-controls")}},{key:"render",value:function(){var e=[this.props,this.state],t=e[0],n=e[1],a=t.images[n.selectedImageIndex];if(!a)return console.error("Light box; ",t.images,n.selectedImageIndex),o.a.createElement("div",null);var r=void 0,s=void 0,u=n.imagesDescriptions[n.selectedImageIndex],d=(t.renderDescriptionFunc.call(this,u),"lightbox-transition-image");return this.canMoveToLeft()&&(r=o.a.createElement("div",{className:"lightbox-btn-left"},o.a.createElement(c.a,{icon:"left-arrow",onClick:this.handleLeftClick,size:56,hasRipple:!0}))),this.canMoveToRight()&&(s=o.a.createElement("div",{className:"lightbox-btn-right"},o.a.createElement(c.a,{icon:"right-arrow",onClick:this.handleRightClick,size:56,hasRipple:!0}))),o.a.createElement("div",{className:"lightbox-backdrop",ref:"container"},o.a.createElement("div",{className:"lightbox-btn-close"},o.a.createElement(c.a,{icon:"back-arrow",onClick:t.toggleLightbox,size:34,hasRipple:!0})),o.a.createElement("div",{className:"lightbox-title-content"},o.a.createElement("div",{className:"lightbox-title"},a.title)),o.a.createElement(i.CSSTransitionGroup,{transitionAppear:!0,transitionAppearTimeout:300,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:{enter:d+"-enter-"+n.direction,enterActive:d+"-enter-"+n.direction+"-active",leave:d+"-leave-"+n.direction,leaveActive:d+"-leave-"+n.direction+"-active",appear:d+"-appear",appearActive:d+"-appear-active"}},o.a.createElement(l.a,{key:a.src,src:a.src,showImageModifiers:t.showImageModifiers,toggleControls:this.toggleControls})),r,s)}}]),t}(o.a.Component);t.a=m,m.defaultProps={selectedImage:0,renderDescriptionFunc:function(e){return o.a.createElement("div",null,String(e))}},m.propTypes={selectedImage:s.a.number,images:s.a.array.isRequired,toggleLightbox:s.a.func.isRequired,showImageModifiers:s.a.bool,renderDescriptionFunc:s.a.func}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=a(n(16)),i=a(n(3));e.exports={TransitionGroup:i.default,CSSTransitionGroup:o.default}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=a(n(0)),s=a(n(1)),l=a(n(3)),c=a(n(20)),u=n(5),d=(u.nameShape.isRequired,s.default.bool,s.default.bool,s.default.bool,(0,u.transitionTimeout)("Appear"),(0,u.transitionTimeout)("Enter"),(0,u.transitionTimeout)("Leave"),{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),p=function(e){function t(){var n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=a=o(this,e.call.apply(e,[this].concat(s))),a._wrapChild=function(e){return r.default.createElement(c.default,{name:a.props.transitionName,appear:a.props.transitionAppear,enter:a.props.transitionEnter,leave:a.props.transitionLeave,appearTimeout:a.props.transitionAppearTimeout,enterTimeout:a.props.transitionEnterTimeout,leaveTimeout:a.props.transitionLeaveTimeout},e)},o(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return r.default.createElement(l.default,i({},this.props,{childFactory:this._wrapChild}))},t}(r.default.Component);p.displayName="CSSTransitionGroup",p.propTypes={},p.defaultProps=d,t.default=p,e.exports=t.default},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return a.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(a[i]=o,o=[]):o.push(i);var r=void 0,s={};for(var l in t){if(a.hasOwnProperty(l))for(r=0;r<a[l].length;r++){var c=a[l][r];s[a[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s};var a=n(0)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=a(n(21)),s=a(n(23)),l=a(n(24)),c=n(25),u=a(n(0)),d=a(n(1)),p=n(2),m=n(5),h=[];c.transitionEnd&&h.push(c.transitionEnd),c.animationEnd&&h.push(c.animationEnd);var f=(d.default.node,m.nameShape.isRequired,d.default.bool,d.default.bool,d.default.bool,d.default.number,d.default.number,d.default.number,function(e){function t(){var n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,r=Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=a=o(this,e.call.apply(e,[this].concat(r))),a.componentWillAppear=function(e){a.props.appear?a.transition("appear",e,a.props.appearTimeout):e()},a.componentWillEnter=function(e){a.props.enter?a.transition("enter",e,a.props.enterTimeout):e()},a.componentWillLeave=function(e){a.props.leave?a.transition("leave",e,a.props.leaveTimeout):e()},o(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var a=(0,p.findDOMNode)(this);if(a){var o=this.props.name[e]||this.props.name+"-"+e,i=this.props.name[e+"Active"]||o+"-active",l=null,u=void 0;(0,r.default)(a,o),this.queueClassAndNode(i,a);var d=function(e){e&&e.target!==a||(clearTimeout(l),u&&u(),(0,s.default)(a,o),(0,s.default)(a,i),u&&u(),t&&t())};n?(l=setTimeout(d,n),this.transitionTimeouts.push(l)):c.transitionEnd&&(u=function(e,t){return h.length?h.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){h.length&&h.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(a,d))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,l.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,r.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=i({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,u.default.cloneElement(u.default.Children.only(this.props.children),e)},t}(u.default.Component));f.displayName="CSSTransitionGroupChild",f.propTypes={},t.default=f,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(22));e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t,n){"use strict";function a(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=a(e.className,t):e.setAttribute("class",a(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=function(e){return e&&e.__esModule?e:{default:e}}(n(4)),i="clearTimeout",r=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),a=setTimeout(e,n);return l=t,a},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&["","webkit","moz","o","ms"].some((function(e){var t=s(e,"request");if(t in window)return i=s(e,"cancel"),r=function(e){return window[t](e)}}));var l=(new Date).getTime();(a=function(e){return r(e)}).cancel=function(e){window[i]&&"function"===typeof window[i]&&window[i](e)},t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a="transform",o=void 0,i=void 0,r=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=void 0,p=void 0,m=void 0,h=void 0;if(function(e){return e&&e.__esModule?e:{default:e}}(n(4)).default){var f=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),a=void 0,o=void 0,i="",r=0;r<n.length;r++){var s=n[r];if(s+"TransitionProperty"in e){i="-"+s.toLowerCase(),a=t[s]("TransitionEnd"),o=t[s]("AnimationEnd");break}}return!a&&"transitionProperty"in e&&(a="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:a,prefix:i}}();o=f.prefix,t.transitionEnd=i=f.transitionEnd,t.animationEnd=r=f.animationEnd,t.transform=a=o+"-"+a,t.transitionProperty=s=o+"-transition-property",t.transitionDuration=l=o+"-transition-duration",t.transitionDelay=u=o+"-transition-delay",t.transitionTiming=c=o+"-transition-timing-function",t.animationName=d=o+"-animation-name",t.animationDuration=p=o+"-animation-duration",t.animationTiming=m=o+"-animation-delay",t.animationDelay=h=o+"-animation-timing-function"}t.transform=a,t.transitionProperty=s,t.transitionTiming=c,t.transitionDelay=u,t.transitionDuration=l,t.transitionEnd=i,t.animationName=d,t.animationDuration=p,t.animationTiming=m,t.animationDelay=h,t.animationEnd=r,t.default={transform:a,end:i,property:s,timing:c,delay:u,duration:l}},function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(2),r=n.n(i),s=n(1),l=n.n(s),c=n(27),u=n(7),d=n(8),p=n(30),m=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),h=[Math.pow(1.1,30),Math.pow(1/1.1,10)],f=h[0],g=h[1],b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resetImageInitialState=n.resetImageInitialState.bind(n),n.handleWindowResize=n.handleWindowResize.bind(n),n.handleRotate=n.handleRotate.bind(n),n.handleZoom=n.handleZoom.bind(n),n.setZoomLimits=n.setZoomLimits.bind(n),n.handleWheel=n.handleWheel.bind(n),n.handleMove=n.handleMove.bind(n),n.handleMoveEnd=n.handleMoveEnd.bind(n),n.handleMoveStart=n.handleMoveStart.bind(n),n.isInsideImage=n.isInsideImage.bind(n),n.state={loader:!0,ratio:1,positionX:0,positionY:0,rotate:0,width:0,height:0,boxWidth:0,boxHeight:0},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),m(t,[{key:"componentDidMount",value:function(){this.resetImageInitialState(this.props),this.startPoints=null,window.addEventListener("resize",this.handleWindowResize),document.addEventListener("mousedown",this.handleMoveStart),document.addEventListener("mouseup",this.handleMoveEnd),document.addEventListener("touchstart",this.handleMoveStart),document.addEventListener("touchend",this.handleMoveEnd),window.setTimeout(this.props.toggleControls,500),this.props.showImageModifiers&&(document.addEventListener("mousemove",this.handleMove),document.addEventListener("touchmove",this.handleMove),document.addEventListener("wheel",this.handleWheel))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize),document.removeEventListener("mousedown",this.handleMoveStart),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleMoveEnd),document.removeEventListener("touchstart",this.handleMoveStart),document.removeEventListener("touchmove",this.handleMove),document.removeEventListener("touchend",this.handleMoveEnd),document.removeEventListener("wheel",this.handleWheel)}},{key:"resetImageInitialState",value:function(e){var t=new Image,n=this;t.onload=function(){var e=[this.width,this.height],t=e[0],a=e[1],o=r.a.findDOMNode(n.refs.container),i=[o.offsetWidth,o.offsetHeight],s=i[0],l=i[1],c=Math.min(s/t,l/a);isNaN(c)&&(c=1),n.setState({loader:!1,ratio:c,rotate:0,positionX:(s-t*c)/2,positionY:(l-a*c)/2,width:this.width,height:this.height,boxWidth:s,boxHeight:l,moving:!1})},t.src=e.src}},{key:"handleWindowResize",value:function(){this.resetImageInitialState(this.props)}},{key:"handleRotate",value:function(e){this.setState({rotate:(360+this.state.rotate+e)%360})}},{key:"handleZoom",value:function(e,t){t||(t=1);var n=e>0?Math.pow(1.1,t):Math.pow(1/1.1,t),a=this.setZoomLimits(this.state.ratio*n),o=this.state,i=void 0,r=void 0;if(Math.min(o.boxWidth/o.width,o.boxHeight/o.height)>=a-.05)i=(o.boxWidth-o.width*a)/2,r=(o.boxHeight-o.height*a)/2;else{var s=o.boxWidth/2,l=o.boxHeight/2,c=s-o.positionX,u=l-o.positionY,d=c/(o.width*o.ratio),p=u/(o.height*o.ratio);i=s-o.width*a*d,r=l-o.height*a*p}this.setState({ratio:a,positionX:i,positionY:r})}},{key:"setZoomLimits",value:function(e){var t=this.state,n=Math.min(t.boxWidth/t.width,t.boxHeight/t.height);return e/n>f?f*n:e/n<g?g*n:e}},{key:"handleWheel",value:function(e){this.isInsideImage(e)&&this.handleZoom(e.deltaY)}},{key:"handleMove",value:function(e){e=this.getEv(e);var t=this.state;if(t.moving){var n=void 0,a=void 0;switch(t.rotate){case 90:a=this.startPoints[0]-e.pageX,n=e.pageY-this.startPoints[1];break;case 180:n=this.startPoints[0]-e.pageX,a=this.startPoints[1]-e.pageY;break;case 270:a=e.pageX-this.startPoints[0],n=this.startPoints[1]-e.pageY;break;default:n=e.pageX-this.startPoints[0],a=e.pageY-this.startPoints[1]}this.startPoints=[e.pageX,e.pageY],(t.positionX+n>=0||t.positionX+n<=t.boxWidth-t.width*t.ratio)&&(n=0),(t.positionY+a>=0||t.positionY+a<=t.boxHeight-t.height*t.ratio)&&(a=0),this.setState({positionX:t.positionX+n,positionY:t.positionY+a})}}},{key:"handleMoveEnd",value:function(e){this.setState({moving:!1})}},{key:"handleMoveStart",value:function(e){if(e=this.getEv(e),this.isInsideImage(e)&&1===e.which){this.startPoints=[e.pageX,e.pageY],this.setState({moving:!0});var t=this;window.setTimeout((function(){!t.state.moving&&t.startPoints&&t.startPoints[0]===e.pageX&&t.startPoints[1]===e.pageY&&Object(d.c)(e.target,["lightbox-backdrop","lightbox-image"])&&t.props.toggleControls()}),200)}}},{key:"isInsideImage",value:function(e){var t=r.a.findDOMNode(this.refs.container).getBoundingClientRect();return!(e.pageY<t.top||e.pageY>t.bottom||e.pageX<t.left||e.pageX>t.right)}},{key:"getEv",value:function(e){return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type?{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,which:1,target:e.target}:e}},{key:"render",value:function(){var e=[this.props,this.state],t=e[0],n=e[1],a="url("+t.src+")",i=void 0,r=void 0;t.showImageModifiers&&(i=o.a.createElement(c.a,{handleRotate:this.handleRotate,handleZoom:this.handleZoom,currentImage:t.src})),n.loader&&(a="none",r=o.a.createElement("div",{className:"lightbox-loader"},o.a.createElement(u.a,{icon:"spinner",size:58})));var s="rotate("+n.rotate+"deg)",l={height:"100%",backgroundImage:a,backgroundRepeat:"no-repeat",backgroundSize:n.width*n.ratio+"px "+n.height*n.ratio+"px",backgroundPosition:n.positionX+"px "+n.positionY+"px",MsTransform:s,WebkitTransform:s,transform:s};return o.a.createElement("div",{className:"lightbox-content-center"},i,o.a.createElement("div",{className:"lightbox-image-container",ref:"container"},o.a.createElement("div",{className:"lightbox-image"+(n.moving?" moving":""),style:l},r)))}}]),t}(o.a.Component);t.a=b,Image.propTypes={src:l.a.string.isRequired,showImageModifiers:l.a.bool.isRequired}},function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(1),r=n.n(i),s=n(6),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRotateClockwise=n.handleRotateClockwise.bind(n),n.handleRotateCounterclockwise=n.handleRotateCounterclockwise.bind(n),n.handleZoomIn=n.handleZoomIn.bind(n),n.handleZoomOut=n.handleZoomOut.bind(n),n.handleDownload=n.handleDownload.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"handleRotateClockwise",value:function(){this.props.handleRotate.call(this,90)}},{key:"handleRotateCounterclockwise",value:function(){this.props.handleRotate.call(this,-90)}},{key:"handleZoomIn",value:function(){this.props.handleZoom.call(this,1,10)}},{key:"handleZoomOut",value:function(){this.props.handleZoom.call(this,-1,10)}},{key:"handleDownload",value:function(){console.log(this.props.currentImage),window.open(this.props.currentImage)}},{key:"render",value:function(){return o.a.createElement("div",{className:"lightbox-modifiers-box"},o.a.createElement(s.a,{icon:"zoom-in",onClick:this.handleZoomIn,size:34,hasRipple:!0}),o.a.createElement(s.a,{icon:"zoom-out",onClick:this.handleZoomOut,size:34,hasRipple:!0}),o.a.createElement(s.a,{icon:"rotate-left",onClick:this.handleRotateCounterclockwise,size:34,hasRipple:!0}),o.a.createElement(s.a,{icon:"rotate-right",onClick:this.handleRotateClockwise,size:34,hasRipple:!0}),o.a.createElement(s.a,{icon:"download",onClick:this.handleDownload,size:34,hasRipple:!0}))}}]),t}(o.a.Component);t.a=c,c.propTypes={handleRotate:r.a.func.isRequired,handleZoom:r.a.func.isRequired,currentImage:r.a.string.isRequired}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={"zoom-out":["M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"],"zoom-in":["M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"],download:["M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"],"rotate-left":["M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"],"rotate-right":["M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"],"left-arrow":["M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],"right-arrow":["M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],"back-arrow":["M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],spinner:["M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"]}},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(2),r=n.n(i),s=n(1),l=n.n(s),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"componentDidMount",value:function(){this._popup=document.createElement("div"),document.body.appendChild(this._popup),this._render()}},{key:"componentDidUpdate",value:function(){this._render()}},{key:"componentWillUnmount",value:function(){r.a.unmountComponentAtNode(this._popup),document.body.removeChild(this._popup)}},{key:"_render",value:function(){r.a.render(this.props.children,this._popup)}},{key:"render",value:function(){return null}}]),t}(o.a.PureComponent);t.a=u,u.propTypes={children:l.a.node}},function(e,t){}]))},607:function(e,t,n){"use strict";var a,o=n(8),i=n(49),r=n(45),s=n(86),l=n(43),c=n(48),u=n(177),d=n(528),p=n(1113),m=n(530),h=n(308),f=n(292),g=n.n(f),b=n(571),v=n.n(b),y=function(e){return e.reduce((function(e,t,n,a){return t<a[e]?n:e}),0)},E=function(e){for(var t=[],n=0;n<e;n++)t.push(0);return t},C=n(50),O=n(154),w=n.n(O),x=n(204),j=n(4),k=n(597),P=n.n(k),S=n(0),N=n.n(S),I=n(599),T=n.n(I),L=n(106),R=n(554),A=n(95),D=n(592),M=n(569),W=n(202),z=n(551),U=n(19),_=n(181),B=n(61),V=n(5),F=n(39),q=n(133),H=n(539),G=function(e,t){return{openPostWrite:function(){return e(V.openDialog(_.a.PostWrite))},closePostWrite:function(){return e(V.closeDialog(_.a.PostWrite))},showTopLoading:function(){return e(V.showTopLoading())},hideTopLoading:function(){return e(V.hideTopLoading())}}},Y=function(){var e=F.a.selectCurrentUser(),t=q.a.selectDialogState(),n=q.a.selectProgress(),a=H.a.selectRequest();return function(o,i){var r=e(o),s=t(o,{type:_.a.PostWrite}),l=a(o,{requestId:i.requestId}),c=n(o);return{streamRequestStatus:l?l.status:U.a.NoAction,avatar:r.get("avatar",""),fullName:r.get("fullName"),postWriteDilogOpen:s,progress:c}}},X=n(15),Z=function(e,t){return e>1400?J(3,t):e<867?J(1,t):e<1400?J(2,t):[]},J=function(e,t){var n=[],a=0,o=E(e);return t.forEach((function(e,t){n[a]||(n[a]=[]),n[a].push(e),++o[a],e.get("postTypeId")!==x.a.Text&&++o[a];var i=e.get("body");o[a]+=Number(C.a.getNumberOfLines(i)/10),a=y(o)})),n},K=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).nextPage=0,n.styles={postWritePrimaryText:{color:u.a[400],cursor:"text"},postWtireItem:{fontWeight:"200"}},n.loader=function(){var e=n.props.streamRequestStatus;e&&e!==U.a.Sent&&((0,n.props.loadStream)(n.nextPage),n.nextPage++)},n.handleResize=function(e){var t=n.props.posts,a=Z(e.target.innerWidth,t);n.setState({posts:a})},n.handleOpenPostWrite=function(){var e=n.props.openPostWrite;e&&e()},n.handleClosePostWrite=function(){var e=n.props.closePostWrite;e&&e()},n.writePostElement=function(){var e=n.props,t=e.tag,a=e.displayWriting,o=e.classes,i=e.t,r=e.postWriteDilogOpen;return N.a.createElement("div",{className:w()("grid-cell animate-top",o.gridCell),style:{maxWidth:"530px",minWidth:"280px"}},r&&N.a.createElement(M.a,{open:r,onRequestClose:n.handleClosePostWrite,edit:!1}),a&&!t?N.a.createElement(N.a.Fragment,null,N.a.createElement(h.a,{elevation:2},N.a.createElement(d.a,{button:!0,style:n.styles.postWtireItem,onClick:n.handleOpenPostWrite},N.a.createElement(W.a,{fullName:n.props.fullName,fileName:n.props.avatar,size:36}),N.a.createElement(m.a,{inset:!0,primary:N.a.createElement("span",{style:n.styles.postWritePrimaryText}," ",i("home.postWriteButtonText"))}),N.a.createElement(p.a,null,N.a.createElement(v.a,null)))),N.a.createElement("div",{style:{height:"16px"}})):"")},n.getpostList=function(){var e=n.props.classes,t=n.state.posts,a=[];return(t||[]).forEach((function(t,o){var i=N.a.createElement("div",{className:e.postBox,key:"post-stream-column-".concat(o)},0===o?n.writePostElement():"",t.map((function(t,n){return N.a.createElement(S.Fragment,{key:"post-container-".concat(t.get("id"))},n>0?N.a.createElement("div",{className:e.spaceBox}," "):"",N.a.createElement(D.a,{key:"".concat(t.get("id"),"-stream-div-post"),post:t})," ")})));a.push(i)})),a},n.state={divided:!1,disableComments:n.props.disableComments,disableSharing:n.props.disableSharing,openPostWrite:!1,homeTitle:e.homeTitle,hasMorePosts:!0,posts:[],prevPosts:Object(j.Map)({})},n.handleResize=P()(n.handleResize,300),n.handleResize=n.handleResize.bind(Object(s.a)(n)),n.loader=n.loader.bind(Object(s.a)(n)),n.handleOpenPostWrite=n.handleOpenPostWrite.bind(Object(s.a)(n)),n.handleClosePostWrite=n.handleClosePostWrite.bind(Object(s.a)(n)),n}return Object(c.a)(t,e),Object(l.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return e.posts&&e.posts.count()>0&&!e.posts.equals(t.prevPosts)?{posts:Z(window.innerWidth,e.posts),prevPosts:e.posts.count()}:null}}]),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.loader()}),500)}},{key:"render",value:function(){var e=this.props,t=e.hasMorePosts,n=e.classes,a=e.posts;return N.a.createElement(R.a,{dataLength:a?a.size:0,next:this.loader,hasMore:t,endMessage:"",loader:N.a.createElement(z.a,{key:"stream-load-more-progress"})},N.a.createElement(T.a,{target:"window",onResize:this.handleResize}),!a||a.count()>0?"":this.writePostElement(),N.a.createElement("div",{className:n.container},a&&a.count()>0&&this.getpostList()))}}]),t}(S.Component),$=Object(L.c)("translations")(K),Q=Object(A.withRouter)((a=g()((function(e){var t;return{root:{position:"relative"},container:(t={maxWidth:1200,textAlign:"center",whiteSpace:"nowrap",lineHeight:0,position:"relative",boxPack:"center",WebkitJustifyContent:"center",justifyContent:"center",display:"flex",margin:"0 auto",padding:"10px 0",width:"100%"},Object(X.a)(t,"@media (min-width: 440px)",{width:"90%"}),Object(X.a)(t,"@media only screen and (min-width: 860px)",{width:"90%"}),Object(X.a)(t,"@media (min-width: 1600px)",{width:"94%"}),Object(X.a)(t,"@media (max-width: 440px)",{width:"calc(100% - 16px)",margin:"0 8px"}),t),postBox:Object(X.a)({flexGrow:1,WebkitBoxFlex:1,flex:"0 1 auto",maxWidth:530,minWidth:140,width:"100%",display:"inline-block",verticalAlign:"top",textAlign:"left",whiteSpace:"normal",lineHeight:"normal"},"& + &",{marginLeft:24}),spaceBox:{height:24},gridCell:Object(X.a)({},e.breakpoints.down("sm"),{maxWidth:"100% !important",width:"100%"})}}))($),Object(B.connect)(Y,G)(a)));t.a=Q},608:function(e,t,n){"use strict";var a=n(559),o=n(15),i=n(8),r=n(49),s=n(45),l=n(86),c=n(43),u=n(48),d=n(800),p=n(521),m=n(1114),h=n(1120),f=n(1132),g=n(1118),b=n(1119),v=n(524),y=n(532),E=n(1133),C=n(308),O=n(1125),w=n(16),x=n(522),j=n(178),k=n(721),P=n.n(k),S=n(552),N=n.n(S),I=n(556),T=n.n(I),L=n(723),R=n.n(L),A=n(724),D=n.n(A),M=n(722),W=n.n(M),z=n(553),U=n(50),_=n(547),B=n.n(_),V=n(593),F=n(33),q=n(80),H=n(584),G=n(135),Y=function(e){function t(e,n,a,o,l,c,u,d,p,m,h,f,g,b,v,y,E,C,O,w,x,j,k){var P,S=arguments.length>23&&void 0!==arguments[23]?arguments[23]:[],N=arguments.length>24&&void 0!==arguments[24]?arguments[24]:q.a.Public,I=arguments.length>25?arguments[25]:void 0;return Object(i.a)(this,t),(P=Object(r.a)(this,Object(s.a)(t).call(this))).id=e,P.postTypeId=n,P.creationDate=a,P.deleteDate=o,P.score=l,P.votes=c,P.viewCount=u,P.comments=d,P.body=p,P.ownerUserId=m,P.ownerDisplayName=h,P.ownerAvatar=f,P.lastEditDate=g,P.tags=b,P.commentCounter=v,P.image=y,P.imageFullPath=E,P.video=C,P.thumbnail=O,P.album=w,P.disableComments=x,P.disableSharing=j,P.deleted=k,P.accessUserList=S,P.permission=N,P.version=I,P}return Object(u.a)(t,e),t}(n(14).a),X=n(204),Z=n(58),J=n.n(Z),K=n(0),$=n.n(K),Q=n(106),ee=n(61),te=n(718),ne=n.n(te),ae=n(22),oe=n(5),ie=n(46),re=n(19),se=n(39),le=n(539),ce=n(122),ue=n.n(ce);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var pe=[{label:""},{label:""}];function me(e){return $.a.createElement(O.a,Object.assign({direction:"up"},e))}var he=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).handleSetImage=function(e,t){n.close()},n.getPermissionLabel=function(){var e=n.props.t,t=n.state.permission,a="";return t===q.a.Public?a=e("permission.public"):t===q.a.Circles?a=e("permission.circles"):t===q.a.OnlyMe&&(a=e("permission.onlyMe")),a},n.handleChange=function(e){return function(t){var a=n.props.t,i=t.target.value,r=null;U.a.isEmpty(i)&&(r=a("album.".concat(e,"Error"))),n.setState((function(t,n){var a;return a={},Object(o.a)(a,e,i),Object(o.a)(a,"".concat(e,"Error"),r),Object(o.a)(a,"saveDisabled",!U.a.isEmpty(r)),a}))}},n.handleNext=function(){n.setState((function(e){return{activeStep:e.activeStep+1}}))},n.handleBack=function(){n.setState((function(e){return{activeStep:e.activeStep-1}}))},n.handleTogglePermission=function(){n.setState((function(e,t){return{permissionOpen:!e.permissionOpen}}))},n.handleAccessList=function(e,t){n.setState({accessUserList:e,permission:t,permissionOpen:!1})},n.closeDialog=function(){var e=n.props.onClose;e&&e()},n.saveAlbum=function(){var e=n.props,t=e.progress,i=e.post,r=e.t,s=e.currentUser,l=e.currentAlbum,c=n.state,u=c.accessUserList,d=c.permission,p=U.a.isEmpty(n.state.description)?"":n.state.description,m=U.a.isEmpty(n.state.albumName)?r("album.defaultAlbumName"):n.state.albumName,h=Object(a.a)(n.state.selectedPhotos),f=[],g=h.map((function(e){var n=t.getIn([e.fileName,"meta"],{url:""}),a=e.fileName.split(".")[0],o=new G.a(a,0,0,n.url||URL.createObjectURL(e.file),n.url||URL.createObjectURL(e.file),e.fileName,"","",e.fileName,s.userId,0,"",0,0,"",!1,u,d);return f.push(o),{url:n.url,fileName:e.fileName,fileId:a}}));if(i&&s){var b={photos:g.slice(0,4),cover:g[0].url,coverId:g[0].fileId,count:g.length,title:m},v=b.photos.map((function(e){return e.url})),y=new H.a(v,b.cover,b.coverId,b.count,b.title);l?n.updateAlbum(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l),s,p,g[0].url,y,u,d,f):n.createAlbum(s,p,g[0].url,y,u,d,f)}},n.createAlbum=function(e,t,a,o,i,r,s){var l=n.props.post,c=new Y("0",X.a.Album,J()().utc().valueOf(),0,0,{},0,{},t,e.userId,e.fullName,e.avatar,0,[],0,a,"","","",o,!1,!1,!1,i,r,ae.a.dataFormat.postVersion);l&&l(c,s)},n.updateAlbum=function(e,t,a,o,i,r,s,l){var c=n.props.post;e.body=a,e.image=o,e.album=i,e.accessUserList=r,e.permission=s,c&&c(e,l)},n.handleStepChange=function(e){n.setState({activeStep:e})},n.onFileChange=function(e){var t=n.props.uploadImage,o=Object(a.a)(n.state.selectedPhotos);if(t){for(var i=e.currentTarget.files,r=[],s=0;s<i.length;s++){var l=i[s],c=z.a.getExtension(l.name),u="".concat(ue()(),".").concat(c);r.push({file:URL.createObjectURL(l),fileName:u}),t(l,u)}var d=[].concat(Object(a.a)(o),r);n.setState({selectedPhotos:d}),e.currentTarget.value=null}},n.deleteSelectedPhoto=function(e){var t=Object(a.a)(n.state.selectedPhotos);t=t.filter((function(t){return t.fileName!==e})),n.setState({selectedPhotos:t})},n.close=function(){n.props.onClose()},n.imageList=function(){var e=n.props,t=e.classes,a=e.progress;return n.state.selectedPhotos.map((function(e){var o=a.getIn([e.fileName,"percent"],0),i=a.getIn([e.fileName,"visible"],!0);return $.a.createElement(g.a,{key:"album-dialog-tile-".concat(e.fileName)},$.a.createElement("img",{src:e.file,alt:"something"}),$.a.createElement(b.a,{title:i?$.a.createElement(y.a,{variant:"determinate",value:o,color:"secondary"}):"",actionIcon:i?"":$.a.createElement(v.a,{className:t.icon,onClick:function(){return n.deleteSelectedPhoto(e.fileName)}},$.a.createElement(T.a,null))}))}))},n.gridTile=function(){var e=n.props.classes;return $.a.createElement("div",{className:e.gridTileRoot},$.a.createElement(h.a,{cellHeight:180,className:e.gridList},$.a.createElement(g.a,{key:"Subheader",cols:2,style:{height:"auto"}}),n.imageList()))},n.state={acceptedFiles:[],rejectedFiles:[],activeStep:0,selectedPhotos:Object(a.a)(e.photos),nextDisabled:!0,description:e.currentAlbum&&e.currentAlbum.body?e.currentAlbum.body:"",descriptionError:"",albumName:e.currentAlbum&&e.currentAlbum.album&&e.currentAlbum.album.title?e.currentAlbum.album.title:"",saveDisabled:void 0===e.currentAlbum,albumNameError:"",accessUserList:e.currentAlbum&&e.currentAlbum.accessUserList?e.currentAlbum.accessUserList:[],permission:e.currentAlbum&&e.currentAlbum.permission?e.currentAlbum.permission:q.a.Public,permissionOpen:!1},n.close=n.close.bind(Object(l.a)(n)),n.onFileChange=n.onFileChange.bind(Object(l.a)(n)),n.handleSetImage=n.handleSetImage.bind(Object(l.a)(n)),n.imageList=n.imageList.bind(Object(l.a)(n)),n.deleteSelectedPhoto=n.deleteSelectedPhoto.bind(Object(l.a)(n)),n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.saveAlbum=n.saveAlbum.bind(Object(l.a)(n)),n.handleTogglePermission=n.handleTogglePermission.bind(Object(l.a)(n)),n.getPermissionLabel=n.getPermissionLabel.bind(Object(l.a)(n)),n.handleAccessList=n.handleAccessList.bind(Object(l.a)(n)),n.closeDialog=n.closeDialog.bind(Object(l.a)(n)),n.createAlbum=n.createAlbum.bind(Object(l.a)(n)),n.updateAlbum=n.updateAlbum.bind(Object(l.a)(n)),n}return Object(u.a)(t,e),Object(c.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){if(e.progress){for(var n=0;n<t.selectedPhotos.length;n++){var a=t.selectedPhotos[n];if(100!==e.progress.getIn([a.fileName,"percent"],0))return{nextDisabled:!0}}return{nextDisabled:!1}}return null}}]),Object(c.a)(t,[{key:"onDrop",value:function(e,t){this.setState({acceptedFiles:e,rejectedFiles:t})}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.classes,a=e.theme,o=e.open,i=e.onClose,r=e.createAlbumRequestStatus,s=this.state,l=s.activeStep,c=s.nextDisabled,u=s.selectedPhotos,h=s.description,g=s.descriptionError,b=s.albumNameError,y=s.albumName,O=s.permissionOpen,w=s.permission,k=s.saveDisabled,S=pe.length,I=r===re.a.Sent;return $.a.createElement(m.a,{id:"album-dialog-",open:o,classes:{paper:n.paper},onClose:i,TransitionComponent:me},$.a.createElement("input",{accept:"image/*",className:n.input,id:"album-dialog-button-file",multiple:!0,onChange:this.onFileChange,type:"file"}),$.a.createElement("div",{className:n.root},$.a.createElement(C.a,{square:!0,elevation:0,className:n.header},$.a.createElement(j.a,null,pe[l].label),$.a.createElement(v.a,{color:"inherit",onClick:i,"aria-label":"Close"},$.a.createElement(N.a,null)),0===l?$.a.createElement("label",{htmlFor:"album-dialog-button-file"},$.a.createElement(d.a,{component:"span",color:"primary"},$.a.createElement(P.a,null),t("album.addPhotos"))):$.a.createElement(j.a,{variant:"h6"}," ",t("album.saveAlbum")," ")),$.a.createElement(ne.a,{axis:"rtl"===a.direction?"x-reverse":"x",index:this.state.activeStep,onChangeIndex:this.handleStepChange,enableMouseEvents:!0},this.gridTile(),$.a.createElement("div",{className:n.information},$.a.createElement(f.a,{onClick:this.handleTogglePermission,className:n.button},$.a.createElement(W.a,null),this.getPermissionLabel()),$.a.createElement("div",{style:{height:40}}),$.a.createElement(x.a,{autoFocus:1===l,value:y,onChange:this.handleChange("albumName"),placeholder:t("album.albumTitle"),error:!U.a.isEmpty(b),helperText:b}),$.a.createElement("div",{style:{height:40}}),$.a.createElement(x.a,{value:h,onChange:this.handleChange("description"),placeholder:t("album.description"),multiline:!0,rows:2,rowsMax:4,style:{fontWeight:400,fontSize:"14px",flexShrink:0,width:"initial",flexGrow:1},error:!U.a.isEmpty(g),helperText:g}))),$.a.createElement(E.a,{steps:S,position:"bottom",activeStep:l,className:n.mobileStepper,nextButton:l!==S-1?$.a.createElement($.a.Fragment,null,$.a.createElement(d.a,{size:"small",disabled:c||!(u.length>0),onClick:this.handleNext},t("album.next")," ","rtl"===a.direction?$.a.createElement(R.a,null):$.a.createElement(D.a,null))):$.a.createElement("div",{className:n.wrapper},$.a.createElement(d.a,{size:"small",variant:"contained",disabled:I||k||!U.a.isEmpty(b)||!U.a.isEmpty(g),color:"secondary",onClick:this.saveAlbum},t("album.save")),I&&$.a.createElement(p.a,{size:24,className:n.buttonProgress})),backButton:$.a.createElement(d.a,{size:"small",onClick:this.handleBack,disabled:0===l},"rtl"===a.direction?$.a.createElement(D.a,null):$.a.createElement(R.a,null),t("album.back"))})),$.a.createElement(V.a,{onClose:this.handleTogglePermission,open:O,onAddAccessList:this.handleAccessList,access:w}))}}]),t}(K.Component),fe=Object(Q.c)("translations")(he),ge=Object(w.a)((function(e){return{fullPageXs:{},root:{flexGrow:1,overflow:"hidden"},gridTileRoot:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,maxHeight:380},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),marginBottom:20,backgroundColor:e.palette.background.default},paper:Object(o.a)({minHeight:"500px"},e.breakpoints.down("xs"),{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",borderRadius:0,margin:0}),information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:B.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"}}}),{withTheme:!0})(fe);t.a=Object(ee.connect)((function(){var e=se.a.selectCurrentUser(),t=le.a.selectRequest();return function(n,a){var o=e(n).toJS(),i=U.a.createServerRequestId(F.a.GalleryCreateAlbum,o.userId),r=t(n,{requestId:i});return{currentUser:o,createAlbumRequestStatus:r?r.status:re.a.NoAction}}}),(function(e,t){return{post:function(t,n){return e(ie.dbCreateAlbum(t,n))},uploadImage:function(t,n){return e(ie.dbUploadImage(t,n))},deleteImage:function(t,n){return e(ie.dbDeleteImage(t,ae.a.data.imageFolderPath,n))},progressChange:function(t,n){return e(oe.progressChange(t,n))}}}))(ge)},610:function(e,t,n){"use strict";var a=n(8),o=n(43),i=n(49),r=n(45),s=n(86),l=n(48),c=n(800),u=n(760),d=n(177),p=n(1114),m=n(1117),h=n(1116),f=n(696),g=n(524),b=n(474),v=n(528),y=n(531),E=n(530),C=n(16),O=n(522),w=n(534),x=n(605),j=n.n(x),k=n(50),P=n(15),S=n(179),N=n(33),I=n(4),T=n(0),L=n.n(T),R=n(106),A=n(61),D=n(90),M=n(19),W=n(52),z=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).handleDoneAddCircle=function(){var e=n.props,t=e.userId,a=e.addUserToCircle,o=e.selectedCircles,i=e.deleteFollowingUser,r=e.avatar,s=e.fullName;n.state.disabledDoneCircles||(o.count()>0?a(o,{avatar:r,userId:t,fullName:s}):i(t))},n.onFollowUser=function(e){e.preventDefault();var t=n.props,a=t.isFollowed,o=t.followUser,i=t.followingCircle,r=t.userId,s=t.followRequest,l=t.avatar,c=t.fullName;s&&s.status===M.a.Sent||(a?n.onRequestOpenAddCircle():o(i?i.get("id"):r,{avatar:l,userId:r,fullName:c}))},n.onRequestCloseAddCircle=function(){var e=n.props,t=e.setSelectedCircles,a=e.userId,o=e.userBelongCircles,i=e.closeSelectCircles;t(a,o),i(a),n.setState({circleName:"",disabledCreateCircle:!0,disabledAddToCircle:!0,disabledDoneCircles:!0})},n.onRequestOpenAddCircle=function(){var e=n.props,t=e.openSelectCircles,a=e.userId;e.followingCircle&&t(a)},n.onCreateCircle=function(){var e=n.state.circleName;e&&""!==e.trim()&&(n.props.createCircle(n.state.circleName),n.setState({circleName:"",disabledCreateCircle:!0}))},n.handleChangeName=function(e){n.setState({circleName:e.target.value,disabledCreateCircle:void 0===e.target.value||""===e.target.value.trim()})},n.handleSelectCircle=function(e,t,a){var o=n.props,i=o.setSelectedCircles,r=o.selectedCircles,s=o.userId,l=r;if(t)l=r.push(a);else{var c=r.indexOf(a);l=l.remove(c)}i(s,l),n.setState({disabledDoneCircles:!n.selectedCircleChange(l)})},n.circleList=function(){var e=n.props,t=e.circles,a=e.userId,o=e.selectedCircles,i=e.classes,r=e.t,s=[];if(t)return t.forEach((function(e,t){var l=!!o&&o.indexOf(t)>-1,c=e.get("name");s.push(L.a.createElement(v.a,{key:"".concat(t,"-").concat(a),dense:!0,className:i.listItem},L.a.createElement(E.a,{className:i.circleName,primary:"Following"===c?r("userBox.followingLabel"):c}),L.a.createElement(y.a,null,L.a.createElement(u.a,{onChange:function(e,a){return n.handleSelectCircle(e,a,t)},checked:l}))))})),s},n.selectedCircleChange=function(e){var t=!1,a=n.props.userBelongCircles;if(e.count()===a.count())for(var o=0;o<e.count();o++){var i=e.get(o);if(!(a.indexOf(i)>-1)){t=!0;break}}else t=!0;return t},n.state={circleName:"",disabledCreateCircle:!0,disabledAddToCircle:!0,disabledDoneCircles:!0},n.handleChangeName=n.handleChangeName.bind(Object(s.a)(n)),n.onCreateCircle=n.onCreateCircle.bind(Object(s.a)(n)),n.handleDoneAddCircle=n.handleDoneAddCircle.bind(Object(s.a)(n)),n.circleList=n.circleList.bind(Object(s.a)(n)),n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.disabledDoneCircles,t=this.props,n=t.isFollowed,a=t.firstBelongCircle,o=t.belongCirclesCount,i=t.followRequest,r=t.userId,s=t.isSelecteCirclesOpen,l=t.addToCircleRequest,u=t.deleteFollowingUserRequest,C=t.classes,x=t.t,k=n?o>1?x("userBox.numberOfCircleButton",{circlesCount:o}):a?a.get("name",x("userBox.followedLabel")):x("userBox.followButton"):x("userBox.followButton");return L.a.createElement(L.a.Fragment,null,L.a.createElement(c.a,{color:"primary",onClick:this.onFollowUser,disabled:!!i&&i.status===M.a.Sent||!!u&&u.status===M.a.Sent},"Following"===k?x("userBox.followingLabel"):k),L.a.createElement(p.a,{PaperProps:{className:C.fullPageXs},key:this.props.userId||0,open:!0===s,onClose:this.onRequestCloseAddCircle},L.a.createElement(h.a,{className:C.dialogContent},L.a.createElement(b.a,null,this.circleList(),L.a.createElement("div",{className:C.space}),L.a.createElement(f.a,null),L.a.createElement(v.a,{key:"'circleName'-".concat(r),dense:!0,className:C.listItem},L.a.createElement(E.a,{primary:L.a.createElement(O.a,{autoFocus:!0,placeholder:x("userBox.groupNamePlaceholder"),onChange:this.handleChangeName,value:this.state.circleName})}),L.a.createElement(y.a,null,L.a.createElement(g.a,{onClick:this.onCreateCircle,disabled:this.state.disabledCreateCircle},L.a.createElement(w.a,{title:x("userBox.createCircleTooltip")},L.a.createElement(j.a,null))))))),L.a.createElement(m.a,null,L.a.createElement(c.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.onRequestCloseAddCircle,style:{color:d.a[800]}},x("userBox.cancelButton")),L.a.createElement(c.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,disabled:e||!!l&&l.status===M.a.Sent,onClick:this.handleDoneAddCircle},x("userBox.doneButton")))))}}]),t}(T.Component),U=Object(R.c)("translations")(z);t.a=Object(A.connect)((function(e,t){var n=e.getIn(["circle","circleList"],Object(I.Map)({})),a=e.getIn(["circle","userTies",t.userId,"circleIdList"],Object(I.List)()),o=a.count()>0,i=n.filter((function(e){return e.get("isSystem",!1)&&"Following"===e.get("name")})).toArray()[0][1],r=k.a.createServerRequestId(N.a.CircleFollowUser,t.userId),s=e.getIn(["server","request",r]),l=e.getIn(["circle","selectedCircles",t.userId],[]),c=e.getIn(["circle","ui","openSelecteCircles",t.userId],[]),u=W.a.getUserProfileById(e,{userId:t.userId}).toJS();return{isSelecteCirclesOpen:c,isFollowed:o,selectedCircles:l,circles:n,followingCircle:i,userBelongCircles:a,followRequest:s,belongCirclesCount:a.count()||0,firstBelongCircle:a?n.get(a.get(0),Object(I.Map)({})):Object(I.Map)({}),avatar:u.avatar||"",fullName:u.fullName||""}}),(function(e){return{createCircle:function(t){return e(D.g(t))},addUserToCircle:function(t,n){return e(D.o(t,n))},followUser:function(t,n){return e(D.j(t,n))},deleteFollowingUser:function(t){return e(D.i(t))},setSelectedCircles:function(t,n){return e(D.s(t,n))},removeSelectedCircles:function(t){return e(D.r(t))},openSelectCircles:function(t){return e(D.q(t))},closeSelectCircles:function(t){return e(D.f(t))},goTo:function(t){return e(Object(S.a)(t))}}}))(Object(C.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},paper:{height:254,width:243,margin:10,textAlign:"center",minWidth:230,maxWidth:"257px"},dialogContent:{paddingTop:"5px",padding:"0px 5px 5px 5px"},circleName:{fontSize:"1rem"},space:{height:20},fullPageXs:Object(P.a)({},e.breakpoints.down("xs"),{width:"100%",height:"100%",margin:0,overflowY:"auto"}),followButton:{position:"absolute",bottom:"30px",left:0,right:0},dialog:{width:"",maxWidth:"280px",borderRadius:"4px"}}}))(U))}}]);