(this["webpackJsonptelar-social-engine"]=this["webpackJsonptelar-social-engine"]||[]).push([[16,3,7],{1172:function(e,t,a){"use strict";a.r(t),a.d(t,"ProfileComponent",(function(){return gt}));var n=a(295),i=a.n(n),o=a(43),s=a(639),r=a(828),l=a(504),c=a(471),d=a(508),p=a(1137),h=a(510),m=a(310),u=a(15),g=a(176),f=a(614),b=a.n(f),v=a(1056),y=a.n(v),E=a(1055),C=a.n(E),x=a(1057),w=a.n(x),k=a(615),O=a.n(k),S=a(150),P=a.n(S),N=a(1146),I=a(1138),T=a(1149),L=a(1147),R=a(563),A=a.n(R),D=a(204),M=a(51),j=a.n(M),W=a(0),z=a.n(W),U=a(97),_=a(59),B=a(18),V=a(528),q=a.n(V);function F(e){return z.a.createElement(T.a,Object.assign({direction:"up"},e))}class H extends W.Component{constructor(e){super(e),this.closeDialog=()=>{const e=this.props.onClose;e&&e()},this.infoRender=(e,t)=>{const a=this.props.classes;return z.a.createElement("div",{className:a.infoItem},z.a.createElement("div",{className:a.subtitleInfo},e),z.a.createElement("div",{className:a.contentInfo},t))},this.state={},this.closeDialog=this.closeDialog.bind(this),this.infoRender=this.infoRender.bind(this)}render(){const e=this.props,t=e.t,a=e.classes,n=e.open,i=e.onClose,s=e.targetUser;if(!t)return z.a.createElement("div",null);const r=z.a.createElement("div",{className:a.rootInfo},z.a.createElement(g.a,{variant:"h6",color:"inherit",className:a.title},t("profile.about")," ",s.fullName),z.a.createElement(m.a,{className:a.paperInfo},!o.a.isEmpty(s.tagLine)&&this.infoRender(t("profile.tagline"),s.tagLine),s.birthday&&s.birthday>0&&this.infoRender(t("profile.birthday"),j.a.unix(s.birthday).local().format("LL")),!o.a.isEmpty(s.companyName)&&this.infoRender(t("profile.companyName"),s.companyName||""))),c=z.a.createElement("div",{className:a.rootInfo},z.a.createElement(g.a,{variant:"h6",color:"inherit",className:a.title},t("profile.otherSocial")),z.a.createElement(m.a,{className:a.paperInfo},!o.a.isEmpty(s.twitterId)&&this.infoRender(t("profile.twitterId"),s.twitterId||""),!o.a.isEmpty(s.facebookId)&&this.infoRender(t("profile.facebookId"),s.facebookId||""),!o.a.isEmpty(s.instagramId)&&this.infoRender(t("profile.instagramId"),s.instagramId||"")));return z.a.createElement("div",null,z.a.createElement(I.a,{id:"album-dialog-",open:n,classes:{paper:a.paper},onClose:i,TransitionComponent:F},z.a.createElement("div",{className:a.root},z.a.createElement(N.a,{position:"sticky",color:"primary"},z.a.createElement(L.a,null,z.a.createElement(l.a,{onClick:i},z.a.createElement(A.a,null)),z.a.createElement(g.a,{variant:"h6",color:"inherit",className:a.flex},s.fullName),z.a.createElement(D.a,{fullName:s.fullName,fileName:s.avatar,size:32,style:a.avatar}))),z.a.createElement("div",{className:a.content},(o.a.isEmpty(s.tagLine)||s.birthday&&s.birthday>0||!o.a.isEmpty(s.companyName))&&r,(!o.a.isEmpty(s.twitterId)||!o.a.isEmpty(s.facebookId)||!o.a.isEmpty(s.instagramId))&&c))))}}const G=Object(U.c)("translations")(H),Y=Object(u.a)((e=>({fullPageXs:{},root:{flexGrow:1,overflow:"hidden"},gridTileRoot:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,maxHeight:380},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(8),marginBottom:20,backgroundColor:e.palette.background.default},flex:{flexGrow:1},paper:{minHeight:"500px",minWidth:"500px",maxWidth:"500px",[e.breakpoints.down("xs")]:{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",minWidth:"100%",borderRadius:0,margin:0}},information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:q.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"},title:{color:"rgba(0,0,0,.87)",font:"400 14px/20px Roboto,RobotoDraft,Helvetica,Arial,sans-serif",fontWeight:500,margin:"0 0 12px 14px"},rootInfo:{flexDirection:"column",padding:"22px 20px 0",display:"flex",backgroundColor:"#f9f9f9",alignItems:"flex-start"},subtitleInfo:{color:"rgba(0,0,0,.54)",font:"400 12px Roboto,RobotoDraft,Helvetica,Arial,sans-serif",fontWeight:500},contentInfo:{marginTop:10,color:"rgba(0,0,0,.87)",font:"400 14px/20px Roboto,RobotoDraft,Helvetica,Arial,sans-serif"},paperInfo:{width:"100%",flex:"1 1 auto",overflow:"hidden",padding:"16px 14px"},infoItem:{paddingBottom:10},content:{maxHeight:436,overflowY:"auto",paddingBottom:15}})),{withTheme:!0})(G);var X=Object(_.connect)((()=>{const e=B.a.selectCurrentUser();return t=>({currentUser:e(t).toJS()})}),(()=>({})))(Y),Z=a(1035),J=a.n(Z),K=a(1033),$=a.n(K),Q=a(1034),ee=a.n(Q),te=a(72),ae=a.n(te),ne=a(1037),ie=a.n(ne),oe=a(1036),se=a.n(oe),re=a(1038),le=a.n(re),ce=a(534),de=a.n(ce),pe=a(505),he=a(1154),me=a(786),ue=a(512);class ge extends W.Component{constructor(e){super(e),this.state={}}render(){const e=this.props,t=e.classes,a=e.caption,n=e.value;return z.a.createElement("div",{className:t.progressLineContainer},z.a.createElement(g.a,{variant:"caption",className:t.progressLineText},a),z.a.createElement(ue.a,{variant:"determinate",className:t.progressLine,value:n}))}}var fe=Object(u.a)((()=>({progressLineContainer:{maxWidth:200,position:"relative",marginBottom:10},progressLine:{height:24,borderRadius:4},progressLineText:{position:"absolute",zIndex:2,left:"10%",top:"20%"}})))(ge),be=a(5);class ve extends W.Component{constructor(e){super(e),this.state={}}render(){const e=this.props,t=e.classes,a=e.caption,n=e.text,i=e.image,o=e.subheader,s=e.value;return z.a.createElement(me.a,{item:!0,xs:12,sm:6,md:4},z.a.createElement(d.a,{button:!0},z.a.createElement(m.a,{className:t.paper,elevation:4},z.a.createElement(fe,{caption:a,value:s}),z.a.createElement(g.a,{className:t.text},n),z.a.createElement(he.a,{className:t.cardHeader,avatar:z.a.createElement(pe.a,{src:i,className:t.bigAvatar}),subheader:z.a.createElement(g.a,{variant:"caption"},o)}))))}}const ye=Object(U.c)("translations")(ve);var Ee=Object(_.connect)((()=>({})),(e=>({setHeaderTitle:t=>e(be.q(t))})))(Object(u.a)((e=>({paper:e.mixins.gutters({padding:20,height:160,position:"relative",width:"100%",minWidth:200}),bigAvatar:{width:30,height:30},cardHeader:{padding:"15px 0px 0px 0px",position:"absolute",bottom:15,left:30},text:{fontSize:" 0.750rem"}})))(ye));const Ce="https://i.stack.imgur.com/rp3Cv.png",xe="https://i.stack.imgur.com/EN0AX.png",we="https://i.stack.imgur.com/SqKnG.png";class ke extends W.Component{constructor(e){super(e),this.handleClickOpen=()=>{this.setState({open:!0})},this.handleClose=()=>{this.setState({open:!1})},this.Transition=e=>z.a.createElement(T.a,Object.assign({direction:"up"},e)),this.state={completed:50,open:!1}}render(){const e=this.props,t=e.classes,a=e.text;return z.a.createElement("div",null,z.a.createElement($.a,{onClick:this.handleClickOpen,classes:{root:t.buttonBounties}},a),z.a.createElement(ee.a,{maxWidth:"md",open:this.state.open,onClose:this.handleClose,TransitionComponent:this.Transition},z.a.createElement(J.a,{className:t.appBar},z.a.createElement(se.a,null,z.a.createElement(ie.a,{color:"inherit",onClick:this.handleClose,"aria-label":"Close",className:t.iconClose},z.a.createElement(de.a,null)),z.a.createElement(le.a,{variant:"h6",color:"inherit",className:P()(t.flex,t.dialogTitle)},"All Your Bounties"))),z.a.createElement(ae.a,{container:!0,spacing:8,justify:"center",className:t.gridContainer},z.a.createElement(Ee,{value:20,caption:"Cinema Ticket 10/50",text:"Visit the site each day for 100 consecutive days (Days are counted in UTC",image:Ce,subheader:"Cooperation"}),z.a.createElement(Ee,{value:70,caption:"Voucher $100 14/20",text:"Take part in at least 100 surveys of company",image:xe,subheader:"Joint Stock Company"}),z.a.createElement(Ee,{value:40,caption:"A trip to Asia 32/80",text:"Have bills with total amount of $5000",image:we,subheader:"Limited Company"}),z.a.createElement(Ee,{value:20,caption:"Cinema Ticket 10/50",text:"Visit the site each day for 100 consecutive days (Days are counted in UTC",image:Ce,subheader:"Cooperation"}),z.a.createElement(Ee,{value:70,caption:"Voucher $100 14/20",text:"Take part in at least 100 surveys of company",image:xe,subheader:"Joint Stock Company"}),z.a.createElement(Ee,{value:40,caption:"A trip to Asia 32/80",text:"Have bills with total amount of $5000",image:we,subheader:"Limited Company"}),z.a.createElement(Ee,{value:20,caption:"Cinema Ticket 10/50",text:"Visit the site each day for 100 consecutive days (Days are counted in UTC",image:Ce,subheader:"Cooperation"}),z.a.createElement(Ee,{value:70,caption:"Voucher $100 14/20",text:"Take part in at least 100 surveys of company",image:xe,subheader:"Joint Stock Company"}),z.a.createElement(Ee,{value:40,caption:"A trip to Asia 32/80",text:"Have bills with total amount of $5000",image:we,subheader:"Limited Company"}),z.a.createElement(Ee,{value:20,caption:"Cinema Ticket 10/50",text:"Visit the site each day for 100 consecutive days (Days are counted in UTC",image:Ce,subheader:"Cooperation"}),z.a.createElement(Ee,{value:70,caption:"Voucher $100 14/20",text:"Take part in at least 100 surveys of company",image:xe,subheader:"Joint Stock Company"}),z.a.createElement(Ee,{value:40,caption:"A trip to Asia 32/80",text:"Have bills with total amount of $5000",image:we,subheader:"Limited Company"}))))}}const Oe=Object(U.c)("translations")(ke);var Se=i()((e=>({appBar:{position:"relative",backgroundColor:e.palette.secondary.light},iconClose:{position:"absolute",right:20,top:5},gridContainer:{padding:20,marginBottom:40,maxHeight:400,overflowY:"auto"},buttonBounties:{minWidth:0,minHeight:0,textTransform:"capitalize",padding:0,color:"rgba(0, 0, 0, 0.54)",fontSize:"0.75rem",fontWeight:400,lineHeight:"1.375em",display:"block"},dialogTitle:{color:"white"}})))(Oe),Pe=a(762),Ne=a(595),Ie=a(501);class Te extends W.Component{constructor(e){super(e),this.state={}}render(){const e=this.props,t=e.classes,a=e.value,n=e.percent,i=e.title,o=e.guideline;return z.a.createElement("div",null,z.a.createElement("div",{className:t.progressContainer},z.a.createElement(Ie.a,{className:t.progress,variant:"static",value:100,size:120,thickness:3,classes:{circle:t.circle}}),z.a.createElement(Ie.a,{className:t.progress,variant:"static",value:a,size:120,thickness:3}),z.a.createElement("div",{className:t.textProgress},z.a.createElement(g.a,{variant:"h5",color:"secondary"},n),z.a.createElement(g.a,{variant:"caption",color:"secondary"},i))),z.a.createElement(g.a,{variant:"caption",className:t.guideline},o))}}var Le=Object(u.a)((e=>({progressContainer:{position:"relative",width:122,height:127,margin:"auto"},progress:{position:"absolute",left:"0",bottom:"0"},circle:{color:e.palette.primary.light},textProgress:{position:"absolute",textAlign:"center",left:25,width:72,bottom:26,height:63},guideline:{paddingTop:"3px",textAlign:"center"}})))(Te),Re=a(1040),Ae=a.n(Re),De=a(1041),Me=a.n(De),je=a(1043),We=a.n(je),ze=a(1042),Ue=a.n(ze),_e=a(1044),Be=a.n(_e),Ve=a(1039),qe=a.n(Ve);function Fe(e){return z.a.createElement(T.a,Object.assign({direction:"up"},e))}class He extends W.Component{constructor(e){super(e),this.state={open:!1}}render(){const e=this.props,t=e.classes,a=e.title,n=e.onClose,i=e.open;let o=0;function s(e,t,a,n){return o+=1,{id:o,rep:e,status:t,info:a,isActive:n}}const r=[s(50,"Trusted User","Creat more vote per day ",!1),s(15,"Verified User","Able to vote",!1),s(5,"Approved User","Creat more analysis",!1),s(1,"Read Only","View a certain of polis result",!0)];return z.a.createElement(I.a,{fullScreen:!0,open:i,onClose:n,TransitionComponent:Fe},z.a.createElement(N.a,{className:t.appBar},z.a.createElement(L.a,null,z.a.createElement(l.a,{color:"inherit",onClick:n,"aria-label":"Close"},z.a.createElement(qe.a,null)),z.a.createElement(g.a,{variant:"h6",color:"inherit",className:t.flex},a),z.a.createElement(l.a,{color:"inherit",onClick:n,"aria-label":"Close"},z.a.createElement(de.a,null)))),z.a.createElement(g.a,{variant:"body1",color:"inherit",className:t.description},"Privileges manage your accessibility on features and what you can do on Poll Social . Following privileges guidline gaining more reputation and privileges."),z.a.createElement(Ae.a,{classes:{root:this.props.classes.table}},z.a.createElement(Me.a,null,r.map((e=>z.a.createElement(Ue.a,{className:t.row,key:e.id},z.a.createElement(We.a,{className:t.cell,align:"right"},e.isActive?z.a.createElement(Be.a,{className:t.doneIcon}):null),z.a.createElement(We.a,{className:P()(t.cell,{[t.notactiveColor]:!e.isActive},{[t.activeColor]:e.isActive})},e.rep),z.a.createElement(We.a,{className:P()(t.cell,{[t.notactiveColor]:!e.isActive},{[t.activeColor]:e.isActive})},e.status),z.a.createElement(We.a,{className:P()(t.cell,{[t.notactiveColor]:!e.isActive},{[t.activeColor]:e.isActive})},e.info)))))))}}var Ge=Object(u.a)((e=>({appBar:{position:"relative"},doneIcon:{color:"green"},flex:{flex:1},paper:e.mixins.gutters({maxWidth:670,minWidth:350,margin:"30px auto",padding:20}),table:{marginTop:10,marginBottom:10},cell:{border:"none","&:nth-of-type(even)":{fontWeight:"bold"},padding:"4px 1px 3px 20px"},row:{"&:hover":{backgroundColor:e.palette.background.default,cursor:"pointer"}},activeColor:{color:"rgb(202, 204, 206)"},notactiveColor:{color:e.palette.secondary.main},description:{maxWidth:1080,margin:"0 auto",padding:"25px",marginTop:"15px",marginBottom:"55px",backgroundColor:"#ece8b24a",border:"1px solid #d4d4d4",borderRadius:"2px"}})))(He),Ye=a(585),Xe=a.n(Ye),Ze=a(1045),Je=a.n(Ze),Ke=a(1125),$e=a(25),Qe=(a(707),a(1046));z.a.PureComponent;class et extends W.Component{constructor(e){super(e),this.state={photoIndex:0}}componentDidUpdate(){this.props.open}render(){const e=this.props,t=e.onClose,a=e.open,n=e.images,i=this.state.photoIndex;return z.a.createElement("div",null,a&&z.a.createElement(Qe.a,{mainSrc:n[i],nextSrc:n[(i+1)%n.length],prevSrc:n[(i+n.length-1)%n.length],onCloseRequest:t,onMovePrevRequest:()=>this.setState({photoIndex:(i+n.length-1)%n.length}),onMoveNextRequest:()=>this.setState({photoIndex:(i+1)%n.length})}))}}var tt=Object(u.a)((()=>({container:{margin:"auto",display:"block",width:"80%",maxWidth:700},close:{position:"absolute",top:15,right:35,transition:"0.3s"},closeIcon:{color:"white"},root:{paddingTop:100},iosDialog:{overflow:"auto",WebkitOverflowScrolling:"touch",width:"100%",height:"100%"}})))(et),at=a(35);var nt=a(62),it=a(29);class ot extends W.Component{constructor(e){super(e),this.handleOpenPrivileges=()=>{this.setState({privilegeOpen:!0})},this.handleClosePrivileges=()=>{this.setState({privilegeOpen:!1})},this.openPictureDialog=e=>{o.a.isEmpty(e)||this.setState({pictureDialogURL:e,picutreDialogOpen:!0})},this.closePictureDialog=()=>{this.setState({pictureDialogURL:"",picutreDialogOpen:!1})},this.handleResize=e=>{this.handleWidthChanged(e)},this.handleWidthChanged=e=>{this.transformBoxes(e,280,5)},this.transformBoxes=(e,t,a,n=5)=>{const i=[];let o=a,s=t*o+o*(2*n),r=s+140;for(;r>e&&o>1;)--o,s=t*o+o*(2*n),r=s+140;let l=0,c=0;const d=(e-s)/2;for(let p=0;p<a;p++){c>o-1&&(c=0,++l);const e=d+c*(t+2*n),a=l*(t+2*n);i[p]={width:t,height:t,transform:"translate(".concat(e,"px, ").concat(a,"px)"),visibility:"visible"},++c}this.setState({boxesStyle:i,parentHeight:(l+1)*(t+2*n)})},this.handleSendMessage=()=>{const e=this.props,t=e.chatRequest,a=e.profile;a.userId&&t?t(a.userId):it.a.error("User id is null for chat request")},this.handleWidthChanged=Xe()(this.handleWidthChanged,200),this.state={boxesStyle:[],privilegeOpen:!1,storeOpen:!1,storeRepOpen:!1,picutreDialogOpen:!1,pictureDialogURL:"",aboutOpen:!1},this.handleOpenStore=this.handleOpenStore.bind(this),this.handleCloseStore=this.handleCloseStore.bind(this),this.handleOpenStoreRep=this.handleOpenStoreRep.bind(this),this.handleCloseStoreRep=this.handleCloseStoreRep.bind(this),this.closePictureDialog=this.closePictureDialog.bind(this),this.openPictureDialog=this.openPictureDialog.bind(this),this.handleCloseAbout=this.handleCloseAbout.bind(this),this.handleOpenAbout=this.handleOpenAbout.bind(this)}handleOpenStore(){this.setState({storeOpen:!0})}handleCloseStore(){this.setState({storeOpen:!1})}handleOpenAbout(){this.setState({aboutOpen:!0})}handleCloseAbout(){this.setState({aboutOpen:!1})}handleOpenStoreRep(){this.setState({storeRepOpen:!0})}handleCloseStoreRep(){this.setState({storeRepOpen:!1})}getReputation(){const e=this.props.profile,t=10*(e.postCount||0)+10*(e.voteCount||0)+10*(e.shareCount||0)+10*(e.followCount||0);return Je()(t).format({spaceSeparated:!1,average:!0})}componentDidMount(){this.handleWidthChanged(window.innerWidth)}render(){const e=this.props,t=e.t,a=e.classes,n=e.profile,i=e.isCurrentUser,o=e.editProfileOpen,s=e.openEditor,u=this.state,f=u.boxesStyle,v=u.parentHeight,E=u.privilegeOpen,x=u.pictureDialogURL,k=u.picutreDialogOpen,S=u.aboutOpen;return z.a.createElement(z.a.Fragment,null,z.a.createElement(Ke.a,{handleWidth:!0,onResize:this.handleResize}),z.a.createElement("div",{className:a.container,style:{height:v}},z.a.createElement("div",{className:a.card,style:f?f[0]:{}},z.a.createElement(m.a,{className:P()(a.paperContainer,a.paperBackground)},z.a.createElement("div",{onClick:()=>this.openPictureDialog(n.avatar)},z.a.createElement(D.a,{className:a.userAvatar,fullName:n.fullName,fileName:n.avatar,size:110})),z.a.createElement(g.a,{variant:"h5",className:a.userNameText},n.fullName),z.a.createElement("div",{className:a.editButtonContainer},i?z.a.createElement(r.a,{color:"primary",onClick:s}," ",t("profile.editProfileButton")," "):z.a.createElement("div",null,z.a.createElement(Ne.a,{userId:n.userId,user:n}),z.a.createElement(l.a,{onClick:this.handleSendMessage},z.a.createElement(C.a,null)),z.a.createElement(r.a,{color:"primary",onClick:this.handleOpenAbout}," ",t("profile.aboutButton")," "))),i&&o?z.a.createElement(Pe.a,{avatar:n.avatar,banner:n.banner,fullName:n.fullName}):"")),z.a.createElement(X,{targetUser:n,open:S,onClose:this.handleCloseAbout}),z.a.createElement("div",{className:a.card,style:f?f[1]:{}},z.a.createElement(m.a,{className:P()(a.paperContainer,a.paperBackground1,a.disableComponent)},z.a.createElement(g.a,{variant:"h6",className:P()(a.title,a.titleSpecial)},t("userActivity.reputationTitle")),z.a.createElement(g.a,{className:a.repText},this.getReputation(),z.a.createElement("span",{className:a.repCaption},t("userActivity.reputationCaption"))))),z.a.createElement("div",{className:a.card,style:f?f[2]:{}},z.a.createElement(m.a,{className:P()(a.paperContainer,a.disableComponent)},z.a.createElement(g.a,{variant:"h6",className:a.title},t("userActivity.impactTitle")),z.a.createElement("div",{className:a.content},z.a.createElement(c.a,{component:"nav"},z.a.createElement(d.a,{button:!0,className:a.listItem},z.a.createElement(p.a,null,z.a.createElement(b.a,{className:a.impactIcon})),z.a.createElement(h.a,{primary:"".concat(n.voteCount||0," ").concat(t("userActivity.likeCaption"))})),z.a.createElement(d.a,{button:!0,className:a.listItem},z.a.createElement(p.a,null,z.a.createElement(O.a,{className:a.impactIcon})),z.a.createElement(h.a,{primary:"".concat(n.shareCount||0," ").concat(t("userActivity.shareCaption"))})),z.a.createElement(d.a,{button:!0,className:a.listItem},z.a.createElement(p.a,null,z.a.createElement(C.a,{className:a.impactIcon})),z.a.createElement(h.a,{primary:"".concat(n.postCount||0," ").concat(t("userActivity.publishCaption"))})),z.a.createElement(d.a,{button:!0,className:a.listItem},z.a.createElement(p.a,null,z.a.createElement(y.a,{className:a.impactIcon})),z.a.createElement(h.a,{primary:"".concat(n.followCount||0," ").concat(t("userActivity.followingCaption"))})),z.a.createElement(d.a,{button:!0,className:a.listItem},z.a.createElement(p.a,null,z.a.createElement(w.a,{className:a.impactIcon})),z.a.createElement(h.a,{primary:"".concat(n.followerCount||0," ").concat(t("userActivity.followersCaption"))})))))),z.a.createElement("div",{className:a.card,style:f?f[3]:{}},z.a.createElement(m.a,{className:P()(a.paperContainer,a.disableComponent)},z.a.createElement(g.a,{variant:"h6",className:a.title},t("userActivity.privilegesTitle")),z.a.createElement("div",{className:a.content},z.a.createElement(g.a,{variant:"caption"}),z.a.createElement(g.a,{variant:"caption"},t("userActivity.nextPrivilegeCaption")," : ",t("privilege.newUser")),z.a.createElement(Le,{value:20,percent:"20%",title:t("userActivity.goal",{rep:100}),guideline:t(" ")})),z.a.createElement(r.a,{color:"primary",className:a.allPrivilegesButton,disabled:!0,onClick:this.handleOpenPrivileges}," ",t("userActivity.allPrivilegesButton")))),z.a.createElement("div",{className:a.card,style:f?f[4]:{}},z.a.createElement(m.a,{className:P()(a.paperContainer,a.disableComponent)},z.a.createElement(g.a,{variant:"h6",className:a.title},t("userActivity.bountiesTitle")),z.a.createElement("div",{className:a.content},z.a.createElement(Se,{text:t("userActivity.allBounties")}),z.a.createElement(r.a,{classes:{root:a.buttonBounties}},t("userActivity.nextBountiesButton")),z.a.createElement(Le,{value:20,percent:"10/50",title:t("userActivity.bountyCommingSoon"),guideline:t(" ",{company:$e.a.settings.companyName})}))))),z.a.createElement(Ge,{title:t("userActivity.privileges"),open:E,onClose:this.handleClosePrivileges}),z.a.createElement(tt,{open:k,onClose:this.closePictureDialog,images:[x]}))}}const st=Object(U.c)("translations")(ot);var rt=Object(_.connect)((e=>({editProfileOpen:e.getIn(["user","openEditProfile"])})),(e=>({setHeaderTitle:t=>e(be.q(t)),openEditor:()=>e(at.w()),chatRequest:t=>e(nt.d(t))})))(Object(u.a)((e=>({paper:e.mixins.gutters({maxWith:900,minWidth:346,margin:"30px auto",padding:20}),userAvatar:{padding:0,margin:"auto",fontSize:60},userNameText:{textAlign:"center",padding:20},paperContainer:{height:"100%",position:"relative"},impactIcon:{fontSize:20},paperBackground:{padding:"17px 12px 15px 15px",backgroundColor:"white"},paperBackground1:{backgroundColor:e.palette.secondary.light},title:{fontSize:16,padding:8,fontWeight:400,backgroundColor:e.palette.secondary.light,color:"white"},titleSpecial:{color:"white"},repText:{color:"white",fontSize:90,textAlign:"center",verticalAlign:"middle",paddingTop:30,wordSpacing:-30,cursor:"pointer"},listItem:{padding:"8px 0px 4px 12px"},repLabel:{marginTop:50,textAlign:"center",color:"white"},repCaption:{fontSize:20,cursor:"pointer"},diamond:{marginLeft:5},facebookIcon:{marginLeft:5,width:30},twitterIcon:{marginLeft:5,width:30},content:{padding:"15px 15px 1px 15px"},buttonBounties:{minWidth:0,minHeight:0,textTransform:"capitalize",padding:0,color:"rgba(0, 0, 0, 0.54)",fontSize:"0.75rem",fontWeight:400,lineHeight:"1.375em",display:"block"},card:{visibility:"hidden",overflow:"hidden",position:"absolute",WebkitTransition:"all .218s cubic-bezier(0.4,0.0,0.2,1)",transition:"all .218s cubic-bezier(0.4,0.0,0.2,1)",margin:"5px",boxShadow:"0 2px 11px rgba(0,0,0,0.2)"},container:{top:"-61px",position:"relative",WebkitTransition:"all .218s cubic-bezier(0.4,0.0,0.2,1)",transition:"all .218s cubic-bezier(0.4,0.0,0.2,1)"},editButtonContainer:{textAlign:"center"},allPrivileges:{},allPrivilegesButton:{fontSize:"0.715rem"},borderAnimation:{WebkitAnimation:"pulse-shadow--collection 2s infinite",animation:"pulse-shadow--collection 2s infinite",borderColor:"#03a87c",color:"#03a87c",fill:"#03a87c"},facebookIconRoot:{width:35,height:35},twitterIconRoot:{width:35,height:35},disableComponent:{opacity:"0.2","pointer-events":"none"}})))(st)),lt=a(32),ct=a(37),dt=a(71),pt=a(46),ht=a(592);var mt=a(126),ut=a(138);class gt extends W.Component{constructor(e){super(e),this.historyUnlisten=null,this.state={}}componentDidMount(){const e=this.props,t=e.history,a=e.users;this.props.loadUserInfo(),!this.historyUnlisten&&a&&(this.historyUnlisten=t.listen((e=>{const t=e.pathname.replace("/",""),n=a.getIn([t,"fullName"],"");this.props.setHeaderTitle(n)}))),this.props.setHeaderTitle(this.props.name)}componentWillUnmount(){this.historyUnlisten&&this.historyUnlisten()}render(){const e=this.props,t=e.loadPosts,a=e.hasMorePosts,n=e.t,i=e.classes,o=e.profile,r=e.isCurrentUser,l=e.posts,c=e.postRequestId,d=Object(ut.b)(n,"t");return z.a.createElement(z.a.Fragment,null,z.a.createElement("div",{className:i.bannerContainer},z.a.createElement(s.a,{height:"384px",width:"100%",className:i.banner,src:o&&o.banner?o.banner:$e.a.settings.defaultProfileCover})),z.a.createElement(rt,{profile:Object(ut.b)(o,"profile"),isCurrentUser:r}),z.a.createElement("div",{style:{height:"24px"}}),z.a.createElement("div",null,l.isEmpty()?"":z.a.createElement("div",{className:"profile__title"},d("profile.headPostsLabel",{userName:this.props.name})),z.a.createElement("div",{style:{height:"24px"}}),z.a.createElement(ht.a,{posts:l,requestId:c,loadStream:t,hasMorePosts:a,displayWriting:!1})))}}const ft=Object(U.c)("translations")(gt);t.default=Object(mt.withRouter)(Object(_.connect)(((e,t)=>{const a=t.match.params.userId,n=o.a.createServerRequestId(lt.a.ProfileGetPosts,a),i=e.getIn(["authorize","uid"],0),s=e.getIn(["user","post",a,"hasMoreData"],!0),r=dt.a.selectProfilePosts()(e,{userId:a}),l=pt.a.getUserProfileById(e,{userId:a}).toJS(),c=pt.a.getUsers(e);return{avatar:l.avatar,name:l.fullName,banner:l.banner,tagLine:l.tagLine,userId:a,users:c,posts:r,hasMorePosts:s,postRequestId:n,profile:l,isCurrentUser:a===i}}),((e,t)=>{const a=t.match.params.userId;return{loadPosts:t=>e(ct.k(a,t)),loadUserInfo:()=>e(at.k(a,"header")),setHeaderTitle:t=>e(be.q(t))}}))(i()((e=>({banner:{backgroundAttachment:"scroll",borderRadius:"2px",backgroundRepeat:"unset !important",backgroundPosition:"center center !important",[e.breakpoints.down("xs")]:{backgroundAttachment:"scroll",height:"220px !important"}},bannerContainer:{height:384,[e.breakpoints.down("xs")]:{height:"260px !important"}},media:{height:0,paddingTop:"56.25%"}})))(ft)))},519:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(26);const i=(e,t)=>e.getIn(["server","request",t.requestId]),o={getRequest:i,selectRequest:()=>Object(n.a)([i],(e=>e&&e.toJS()))}},531:function(e,t,a){"use strict";var n=a(616),i=a(501),o=a(0),s=a.n(o);class r extends o.Component{render(){const e=this.props.theme;return s.a.createElement("div",{key:"load-more-progress",className:"g-load-more"},s.a.createElement(i.a,{size:30,thickness:5,style:{color:e.palette.primary.light}}))}}t.a=Object(n.a)(r)},553:function(e,t,a){"use strict";var n=a(8),i=a(828),o=a(1153),s=a(1160),r=a(1154),l=a(175),c=a(1138),d=a(1141),p=a(1140),h=a(1139),m=a(687),u=a(786),g=a(504),f=a(283),b=a(1136),v=a(15),y=a(502),E=a(514),C=a(176),x=a(534),w=a.n(x),k=a(527),O=a.n(k),S=a(557),P=a.n(S),N=a(575),I=a.n(N),T=a(656),L=a.n(T),R=a(657),A=a.n(R),D=a(658),M=a.n(D),j=a(535),W=a(47),z=a(43),U=a(150),_=a.n(U),B=a(0),V=a.n(B),q=a(59),F=a(25),H=a(97);class G extends B.Component{constructor(e){super(e),this.handleAddLink=()=>{const e=this.props,t=e.onAddLink,a=e.onClose,n=this.state.link;if(n&&""!==n.trim()){t(n,z.a.validateYoutubeUrl(n)?z.a.getYoutubetThumbnails(n):F.a.settings.defaultVideoThumbnails)}a()},this.handleInputChange=e=>{const t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;"link"===n&&this.validateInputLink(a),this.setState({[n]:a})},this.validateInputLink=e=>{const t=this.props.t;t&&(e&&""!==e.trim()?z.a.validateUrl(e.trim())?this.setState({linkInputError:"",disabledOk:!1}):this.setState({linkInputError:t("post.videoInputLinkInvalidError"),disabledOk:!0}):this.setState({linkInputError:t("post.videoInputLinkRequiredError"),disabledOk:!0}))},this.state={link:"",linkInputError:"",disabledOk:!0}}render(){const e=this.props,t=e.classes,a=e.t,n=e.open,o=e.onClose,s=this.state,r=s.disabledOk,m=s.linkInputError;return a?V.a.createElement(c.a,{PaperProps:{className:t.fullPageXs},open:n,onClose:o,maxWidth:"md"},V.a.createElement(h.a,null,a("post.addVideoTitle")),V.a.createElement(p.a,null,V.a.createElement(y.a,{autoFocus:!0,margin:"dense",type:"link",name:"link",onChange:this.handleInputChange,helperText:m,error:""!==m,fullWidth:!0})),V.a.createElement(d.a,null,V.a.createElement(i.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:o,style:{color:l.a[800]}},a("post.cancelButton")),V.a.createElement(i.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.handleAddLink,disabled:r},a("post.addVideoButton")))):V.a.createElement("div",null)}}const Y=Object(H.c)("translations")(G);var X=Object(q.connect)((()=>({})),(()=>({})))(Object(v.a)((e=>({fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},dialogTitle:{padding:0}})))(Y)),Z=a(593),J=a(524),K=a(1144),$=a(1142),Q=a(1143),ee=a(512),te=a(540),ae=a.n(te),ne=a(32),ie=a(124),oe=a(1177),se=a(5),re=a(44),le=a(17),ce=a(18),de=a(519),pe=a(528),he=a.n(pe);var me=a(138);class ue extends B.Component{static getDerivedStateFromProps(e,t){return oe.a(e.photos,t.prevPhotos)?null:{selectedPhotos:[...e.photos],prevPhotos:e.photos}}constructor(e){super(e),this.saveAlbum=()=>{const e=this.props,t=e.progress,a=e.currentUser,n=this.state,i=n.accessUserList,o=n.permission,s=[...this.state.selectedPhotos],r=[];s.slice(0,4).map((e=>{const n=t.getIn([e.fileName,"meta"],{url:""}),s=e.fileName.split(".")[0],l=new ie.a(s,0,0,n.url||URL.createObjectURL(e.src),n.url||URL.createObjectURL(e.src),e.fileName,"","",e.fileName,Object(me.b)(a,"currentUser").userId,0,"",0,0,"",!1,i,o);return r.push(l),{url:n.url,fileName:e.fileName,fileId:s}}))},this.deleteSelectedPhoto=e=>{const t=this.props.onDelete;let a=[...this.state.selectedPhotos];a=a.filter((t=>t.fileName!==e)),this.setState({selectedPhotos:a}),t(e)},this.imageList=()=>{const e=this.props,t=e.classes,a=e.progress;return this.state.selectedPhotos.map((e=>{const n=a.getIn([e.fileName,"percent"],0),i=a.getIn([e.fileName,"visible"],!1);return V.a.createElement($.a,{key:"album-dialog-tile-".concat(e.fileName)},V.a.createElement("img",{src:e.src,alt:"something"}),V.a.createElement(Q.a,{title:i?V.a.createElement(ee.a,{variant:"determinate",value:n,color:"secondary"}):"",actionIcon:i?"":V.a.createElement(g.a,{className:t.icon,onClick:()=>this.deleteSelectedPhoto(e.fileName)},V.a.createElement(ae.a,null))}))}))},this.gridTile=()=>{const e=this.props.classes;return V.a.createElement(K.a,{cellHeight:100,className:e.gridList,cols:3},this.imageList())},this.state={selectedPhotos:[],prevPhotos:[]},this.imageList=this.imageList.bind(this),this.deleteSelectedPhoto=this.deleteSelectedPhoto.bind(this),this.saveAlbum=this.saveAlbum.bind(this)}render(){const e=this.props.classes;return V.a.createElement("div",{className:e.root},this.gridTile())}}const ge=Object(H.c)("translations")(ue),fe=Object(v.a)((e=>({fullPageXs:{},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,marginTop:30},gridList:{flexWrap:"nowrap",width:"100%",transform:"translateZ(0)"},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),marginBottom:20,backgroundColor:e.palette.background.default},paper:{minHeight:"500px",[e.breakpoints.down("xs")]:{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",borderRadius:0,margin:0}},information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:he.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"}})),{withTheme:!0})(ge);var be=Object(q.connect)((()=>{const e=ce.a.selectCurrentUser(),t=de.a.selectRequest();return a=>{const n=e(a).toJS(),i=z.a.createServerRequestId(ne.a.GalleryCreateAlbum,n.userId||"0"),o=t(a,{requestId:i});return{currentUser:n,createAlbumRequestStatus:o?o.status:le.a.NoAction}}}),(e=>({deleteImage:(t,a)=>e(re.j(t,F.a.data.imageFolderPath,a)),progressChange:(t,a)=>e(se.o(t,a))})))(fe),ve=a(204),ye=a(578),Ee=a(1159),Ce=a(655),xe=a.n(Ce),we=a(4),ke=a(46),Oe=a(114),Se=a.n(Oe);class Pe extends B.Component{constructor(e){super(e),this.styles={root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},uploadButton:{verticalAlign:"middle",fontWeight:400},uploadInput:{cursor:"pointer",position:"absolute",top:0,bottom:0,right:0,left:0,width:"100%",opacity:0},deleteVideo:{marginLeft:"5px",cursor:"pointer",color:"white"},addImage:{marginRight:"5px",cursor:"pointer",color:"white"}},this.fileInputRef=void 0,this.videoRef=void 0,this.blobFile=void 0,this.file=void 0,this.handleSetVideo=(e,t,a)=>{this.props.set(t,a),this.close()},this.togglePreview=()=>{this.setState((e=>(e.isPreview&&this.fileInputRef.current&&(this.fileInputRef.current.value=""),{isPreview:!e.isPreview})))},this.handleDeleteVideo=(e,t)=>{const a=this.props.deleteVideo;a&&a(t)},this.onFileChange=e=>{const t=this.props,a=t.showError,n=t.t,i=j.a.getExtension(e.target.files[0].name);let o=!1;j.a.checkMaxFileSize(e.target.files[0].size,F.a.settings.maxVideoFileSize)&&a&&(o=!0,a(n("videGallery.maxExceedMessage")));const s="".concat(Se()(),".").concat(i);this.setState({isPreview:!0,fileName:s,isSaveDisabled:o}),this.file=e.currentTarget.files[0];const r=this.file.type,l=Object(me.b)(this.videoRef.current,"this.videoRef.current");let c=l.canPlayType(r);""===c&&(c="no");const d=URL.createObjectURL(this.file);l.src=d},this.close=()=>{const e=this.props.close;e&&e()},this.videoList=()=>{const e=this.props.videos;return Object(me.b)(e,"videos").map((e=>V.a.createElement($.a,{key:Object(me.b)(e.id,"video.id")},V.a.createElement("div",null,V.a.createElement("div",{style:{overflowY:"hidden",overflowX:"auto"}},V.a.createElement("ul",{style:{whiteSpace:"nowrap",padding:"0 6px",margin:"8px 0 0 0",verticalAlign:"bottom",flexShrink:0,listStyleType:"none"}},V.a.createElement("div",{style:{display:"block"}},V.a.createElement("div",{style:{display:"block",marginRight:"8px",transition:"transform .25s"}},V.a.createElement("li",{style:{width:"100%",margin:0,verticalAlign:"bottom",position:"static",display:"inline-block"}},V.a.createElement(J.a,{fileName:e.thumbnail,style:{width:"100%",height:"auto"}}))))))),V.a.createElement(Q.a,{title:V.a.createElement(ae.a,{style:this.styles.deleteVideo,onClick:t=>this.handleDeleteVideo(t,e.id||"0")}),titlePosition:"top",actionIcon:V.a.createElement(xe.a,{style:this.styles.addImage,onClick:t=>this.handleSetVideo(t,e.URL,e.thumbnail||"")}),actionPosition:"left"}))))},this.handleUploadVideo=()=>{const e=this.props.uploadVideo,t=this.state.fileName;if(!this.videoRef.current||!e)return;j.a.captureVideo(this.videoRef.current,null).toBlob((a=>{a&&(e(this.file,t,a),this.togglePreview())}),"image/jpeg",.95)},this.state={fileName:"",isPreview:!1,isSaveDisabled:!1},this.fileInputRef=V.a.createRef(),this.videoRef=V.a.createRef(),this.close=this.close.bind(this),this.onFileChange=this.onFileChange.bind(this),this.handleSetVideo=this.handleSetVideo.bind(this),this.handleDeleteVideo=this.handleDeleteVideo.bind(this),this.videoList=this.videoList.bind(this),this.handleUploadVideo=this.handleUploadVideo.bind(this)}componentDidMount(){const e=this.props.getVideoGallery;e&&e()}render(){const e=this.props,t=e.t,a=e.videos,n=e.classes,o=this.state,s=o.isPreview,r=o.isSaveDisabled,l=V.a.createElement(K.a,{cellHeight:180,className:_()(n.gridList,{[n.noDisplay]:s})},V.a.createElement($.a,{key:"upload-image-gallery"},V.a.createElement("div",{style:{display:"flex",backgroundColor:"rgba(222, 222, 222, 0.52)",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},V.a.createElement("input",{accept:"video/mp4,video/x-m4v,video/*",style:this.styles.uploadInput,id:"raised-button-file",onChange:this.onFileChange,ref:this.fileInputRef,type:"file"}),V.a.createElement("label",{htmlFor:"raised-button-file"},V.a.createElement(i.a,{variant:"contained",component:"span",style:this.styles.uploadButton},t("imageGallery.uploadButton"))))),a&&a.count()>0?this.videoList():""),c=V.a.createElement("div",{className:_()(n.videoRoot,{[n.noDisplay]:!s})},V.a.createElement("video",{className:_()(n.video),controls:!0,autoPlay:!1,ref:this.videoRef}));return V.a.createElement("div",{style:this.styles.root},V.a.createElement(Ee.a,{in:!s},l),V.a.createElement(Ee.a,{in:s},c),V.a.createElement("div",{className:_()(n.previewActions,{[n.noDisplay]:!s})},V.a.createElement(i.a,{disabled:r,color:"primary",onClick:this.handleUploadVideo}," ",t("videGallery.saveButton")," "),V.a.createElement(i.a,{onClick:this.togglePreview}," ",t("videGallery.backButton")," ")))}}const Ne=Object(H.c)("translations")(Pe);var Ie=Object(q.connect)((e=>{const t=e.getIn(["authorize","uid"]),a=ke.a.getUserProfileById(e,{userId:t}).toJS();return{videos:e.getIn(["imageGallery","videos"],Object(we.Map)({})),avatar:a?a.avatar:""}}),(e=>({uploadVideo:(t,a,n)=>e(re.u(t,a,n)),deleteVideo:t=>e(re.k(t)),getVideoGallery:()=>e(re.p()),showError:t=>e(se.s(t))})))(Object(v.a)((e=>({fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},gridList:{width:500,height:450,overflowY:"auto"},noDisplay:{display:"none !important"},video:{width:"100%",height:"100%",position:"absolute",top:0,left:0},videoRoot:{position:"relative",padding:"39.25%",width:"100%",height:"100%"},previewActions:{justifyContent:"space-between",display:"flex",marginTop:10,width:"100%",height:"100%"}})))(Ne)),Te=a(75),Le=a(574),Re=a(206),Ae=a(37),De=a(179),Me=a(121);const je=e=>({openAlbum:()=>e(se.n(De.a.Album)),closeAlbum:()=>e(se.c(De.a.Album)),post:(t,a)=>e(Ae.g(t,a)),update:(t,a)=>e(Ae.m(t,a)),uploadImage:(t,a)=>e(re.t(t,a))}),We=()=>{const e=ce.a.selectCurrentUser(),t=Me.a.selectDialogState(),a=Me.a.selectProgress();return n=>{const i=e(n).toJS(),o=t(n,{type:De.a.Album}),s=a(n);return{postImageState:n.getIn(["imageGallery","status"]),ownerAvatar:i.avatar||"",ownerDisplayName:i.fullName||"",albumDialogOpen:o,progress:s}}};var ze=a(507);class Ue extends B.Component{constructor(e){super(e),this.selectedPhotos=[],this.handleToggleComments=()=>{this.setState((e=>({disableSharing:!e.disableComments,disabledPost:!this.isPostChangeValid(e)})))},this.handleToggleSharing=()=>{this.setState((e=>({disableSharing:!e.disableSharing,disabledPost:!this.isPostChangeValid(e)})))},this.handleTogglePermission=()=>{this.setState((e=>({permissionOpen:!e.permissionOpen,disabledPost:!this.isPostChangeValid(e)})))},this.handleRemoveImage=()=>{this.setState((e=>({image:"",video:"",imageFullPath:"",postType:Re.a.Text,disabledPost:!this.isPostChangeValid(e)})))},this.closeAlbumDialog=()=>{const e=this.props.closeAlbum;e&&e()},this.openAlbumDialog=()=>{const e=this.props.openAlbum;e&&e()},this.handlePost=()=>{this.setState({disabledPost:!1});const e=this.state,t=e.image,a=e.imageFullPath,i=e.disableComments,o=e.disableSharing,s=e.postText,r=e.video,l=e.thumbnail,c=e.postType,d=e.accessUserList,p=e.permission,h=e.galleryOpen,m=e.selectedPhotos,u=this.props,g=u.ownerAvatar,f=u.ownerDisplayName,b=u.edit,v=u.onRequestClose,y=u.post,E=u.update,C=u.postModel,x=u.progress;if(!this.isPostChangeValid(this.state))return void this.setState({disabledPost:!0});const w=W.b(s),k=new Le.a;h&&x&&m.forEach((e=>{const t=x.getIn([e.fileName,"meta"]);let a="";a=t?t.url:e.src,k.photos.push(a)}));const O={body:s,tags:w,image:t,video:r,thumbnail:l,imageFullPath:a,ownerAvatar:g,ownerDisplayName:f,disableComments:i,disableSharing:o,postTypeId:c,score:0,album:Object(n.a)({},k),viewCount:0,accessUserList:d,permission:p};if(b){if(C&&E){E(C.set("body",s).set("tags",Object(we.List)(w)).set("image",t).set("imageFullPath",a).set("video",r).set("album",Object(we.fromJS)(Object(n.a)({},k))).set("thumbnail",l).set("disableComments",i).set("disableSharing",o).set("postTypeId",c).set("accessUserList",Object(we.List)(d)).set("permission",p),v)}}else y&&y(O,v)},this.onRequestSetImage=e=>{this.setState({image:e,video:"",postType:Re.a.Photo,disabledPost:!1})},this.onSetVideo=(e,t)=>{this.setState({image:"",thumbnail:t,video:e,postType:Re.a.Video,disabledPost:!1})},this.handleOnChange=e=>{const t=e.target.value;this.setState({postText:t}),0===t.length||""===t.trim()||this.props.edit&&t.trim()===this.props.text?this.setState({postText:t,disabledPost:!0}):this.setState({postText:t,disabledPost:!1})},this.handleCloseGallery=()=>{this.setState({galleryOpen:!1})},this.handleOpenGallery=()=>{this.setState({galleryOpen:!0})},this.handleOpenVideoLink=()=>{this.setState({videoLinkOpen:!0})},this.handleCloseVideoLink=()=>{this.setState({videoLinkOpen:!1})},this.handleOpenVideoGallery=()=>{this.setState({videoGalleryOpen:!0})},this.handleCloseVideoGallery=()=>{this.setState({videoGalleryOpen:!1})},this.handleOpenMenu=e=>{this.setState({menuOpen:!0,menuAnchorEl:e.currentTarget})},this.handleCloseMenu=()=>{this.setState({menuOpen:!1,menuAnchorEl:null})},this.handleAccessList=(e,t)=>{this.setState({accessUserList:e,permission:t,permissionOpen:!1})},this.handleDeletePhoto=e=>{const t=this.state,a=t.selectedPhotos,n=t.postText,i=[];a.forEach((t=>{e!==t.fileName&&i.push(t)}));let o=!0;const s=0===n.length||""===n.trim()||this.props.edit&&n.trim()===this.props.text;(i&&i.length>0||!s)&&(o=!1),this.setState({selectedPhotos:[...i],disabledPost:o})},this.onUploadAlbumChange=e=>{const t=this.props.uploadImage,a=this.state,n=a.galleryOpen,i=a.selectedPhotos;if(t){const a=e.currentTarget.files,o=[];for(let e=0;e<a.length;e++){const n=a[e],i=j.a.getExtension(n.name),s="".concat(Se()(),".").concat(i);o.push({src:URL.createObjectURL(n),fileName:s}),t(n,s)}const s=[...i,...o];a.length>3&&!n?(this.selectedPhotos=s.map((e=>({file:e.src,fileName:e.fileName}))),this.openAlbumDialog()):this.setState({selectedPhotos:[...s],galleryOpen:!0,disabledPost:!1,postType:Re.a.PhotoGallery}),e.currentTarget.value=null}},this.isPostChangeValid=e=>{const t=e.image,a=e.video,n=e.postText,i=e.selectedPhotos;return!z.a.isEmpty(t)||!z.a.isEmpty(a)||!z.a.isEmpty(n)||i&&i.length>0},this.getPermissionLabel=()=>{const e=this.props.t,t=this.state.permission;let a="";return t===Te.a.Public?a=e("permission.public"):t===Te.a.Circles?a=e("permission.circles"):t===Te.a.OnlyMe&&(a=e("permission.onlyMe")),a};const t=e.postModel,a=t&&t.getIn(["album","photos"],Object(we.List)([])),i=e.edit&&t&&t.get("postTypeId",0)===Re.a.PhotoGallery?a.map((e=>Object(we.Map)({src:e,fileName:e,loaded:!0}))).toJS():[],o=!!(this.props.edit&&i&&i.length>0);this.state={postText:this.props.edit&&t?t.get("body",""):"",image:this.props.edit&&t?t.get("image",""):"",imageFullPath:this.props.edit&&t?t.get("imageFullPath",""):"",galleryOpen:o,menuOpen:!1,disabledPost:!0,disableComments:!(!this.props.edit||!t)&&t.get("disableComments",!1),disableSharing:!(!this.props.edit||!t)&&t.get("disableSharing",!1),videoLinkOpen:!1,videoGalleryOpen:!1,permissionOpen:!1,video:this.props.edit&&t?t.get("video",""):"",thumbnail:this.props.edit&&t?t.get("thumbnail",""):"",postType:this.props.edit&&t?t.get("postTypeId",Re.a.Text):Re.a.Text,accessUserList:this.props.edit&&t?t.get("accessUserList",[]):[],permission:this.props.edit&&t?t.get("permission",Te.a.Public):Te.a.Public,selectedPhotos:i,album:this.props.edit&&t?t.get("album",Object(we.Map)({photos:Object(we.List)([])})):Object(we.Map)({photos:Object(we.List)([])})},this.handleOnChange=this.handleOnChange.bind(this),this.handleCloseGallery=this.handleCloseGallery.bind(this),this.handleOpenGallery=this.handleOpenGallery.bind(this),this.onRequestSetImage=this.onRequestSetImage.bind(this),this.handlePost=this.handlePost.bind(this),this.handleRemoveImage=this.handleRemoveImage.bind(this),this.handleToggleComments=this.handleToggleComments.bind(this),this.handleToggleSharing=this.handleToggleSharing.bind(this),this.handleTogglePermission=this.handleTogglePermission.bind(this),this.isPostChangeValid=this.isPostChangeValid.bind(this),this.getPermissionLabel=this.getPermissionLabel.bind(this),this.onUploadAlbumChange=this.onUploadAlbumChange.bind(this),this.handleDeletePhoto=this.handleDeletePhoto.bind(this)}render(){const e=this.props,t=e.classes,a=e.t,n=e.progress,v=e.albumDialogOpen,x=this.state,k=x.menuOpen,S=x.videoLinkOpen,N=x.image,T=x.postType,R=x.galleryOpen,D=x.selectedPhotos,j=x.thumbnail,W=x.permissionOpen,z=x.permission,U=x.menuAnchorEl,B=void 0!==v&&v,q=V.a.createElement("div",null,V.a.createElement(E.a,{id:"tooltip-icon",title:a("post.moreTooltip"),placement:"bottom-start"},V.a.createElement(g.a,{onClick:this.handleOpenMenu},V.a.createElement(O.a,null))),V.a.createElement(f.a,{open:k,anchorEl:U,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleCloseMenu},V.a.createElement(b.a,{onClick:this.handleToggleComments,style:{fontSize:"14px"}},this.state.disableComments?a("post.enableComments"):a("post.disableComments")," "),V.a.createElement(b.a,{onClick:this.handleToggleSharing,style:{fontSize:"14px"}},(this.state.disableSharing,a("post.disableSharing"))))),F=V.a.createElement(ve.a,{fullName:this.props.ownerDisplayName||"",fileName:this.props.ownerAvatar||"",size:36}),H=V.a.createElement("div",{className:t.author},V.a.createElement("span",{style:{fontSize:"14px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"25px"}},"".concat(this.props.ownerDisplayName," |")),V.a.createElement("span",{onClick:this.handleTogglePermission,className:_()(t.permission,t.disableComponent)},"".concat(this.getPermissionLabel()))),G=N&&""!==N&&T===Re.a.Photo||j&&""!==j&&T===Re.a.Video?V.a.createElement("div",null,V.a.createElement("div",{style:{position:"relative",overflowY:"hidden",overflowX:"auto"}},V.a.createElement("ul",{style:{position:"relative",whiteSpace:"nowrap",padding:"0 0 0 16px",margin:"8px 0 0 0",paddingRight:"16px",verticalAlign:"bottom",flexShrink:0,listStyleType:"none"}},V.a.createElement("div",{style:{display:"flex",position:"relative"}},V.a.createElement("span",{onClick:this.handleRemoveImage,style:{position:"absolute",width:"28px",backgroundColor:"rgba(6, 6, 6, 0.82)",height:"28px",right:12,top:4,cursor:"pointer",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"}},V.a.createElement(L.a,{style:{color:"rgba(239, 235, 235, 0.83)"}})),V.a.createElement("span",{className:_()(t.playVideo,{[t.noDisplay]:T!==Re.a.Video}),style:{}},V.a.createElement(I.a,{className:t.playIcon})),V.a.createElement("div",{style:{display:"inline-block",width:"100%",marginRight:"8px",transition:"transform .25s"}},V.a.createElement("li",{style:{width:"100%",margin:0,verticalAlign:"bottom",position:"static"}},V.a.createElement(J.a,{fileName:T===Re.a.Photo?N:j,style:{width:"100%",height:"auto"}}))))))):"";return V.a.createElement("div",{style:this.props.style},this.props.children,V.a.createElement(c.a,{BackdropProps:{className:t.backdrop},PaperProps:{className:t.fullPageXs},key:this.props.id||0,open:this.props.open,onClose:this.props.onRequestClose},V.a.createElement(h.a,{className:t.dialogTitle},V.a.createElement(r.a,{title:H,avatar:F,action:q})),V.a.createElement(p.a,{className:t.content,style:{paddingTop:0}},V.a.createElement(o.a,{elevation:0},V.a.createElement(s.a,null,V.a.createElement(u.a,{item:!0,xs:12},V.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},V.a.createElement("div",{style:{position:"relative",flexDirection:"column",display:"flex",flexGrow:1,overflowY:"auto",maxHeight:"300px"}},V.a.createElement(y.a,{autoFocus:!0,value:this.state.postText,onChange:this.handleOnChange,placeholder:a("post.textareaPlaceholder"),multiline:!0,rows:2,rowsMax:4,style:{fontWeight:400,fontSize:"14px",margin:"0 16px",flexShrink:0,width:"initial",flexGrow:1}}),G,R&&V.a.createElement(be,{photos:D,progress:n,onDelete:this.handleDeletePhoto}))))))),V.a.createElement(d.a,{className:t.iconButtonsRoot},V.a.createElement("div",{style:{flexShrink:0,boxFlex:0,flexGrow:0,maxHeight:"48px",width:"100%"}},V.a.createElement("div",{style:{flexDirection:"row",display:"flex"}},V.a.createElement("input",{accept:"image/*",className:t.input,id:"album-button-file",multiple:!0,onChange:this.onUploadAlbumChange,type:"file"}),V.a.createElement("div",{style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},V.a.createElement("span",{style:{top:"15px",display:"block",position:"relative",cursor:"pointer"}},V.a.createElement("label",{htmlFor:"album-button-file"},V.a.createElement(P.a,{style:{color:"grey"}})))),V.a.createElement("div",{onClick:this.handleOpenVideoLink,style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},V.a.createElement("span",{style:{top:"12px",display:"block",position:"relative",cursor:"pointer"}},V.a.createElement(A.a,{style:{color:"grey",width:30,height:30}}))),V.a.createElement("div",{className:t.disableComponent,onClick:this.handleOpenVideoGallery,style:{outline:"none",width:"48px",zIndex:0,overflow:"hidden",position:"relative",textAlign:"center",transition:"background .3s",border:0,borderRadius:"50%",display:"inlineBlock",height:"48px"}},V.a.createElement("span",{style:{top:"14px",display:"block",position:"relative",cursor:"pointer"}},V.a.createElement(M.a,{style:{color:"grey",width:24,height:24}})))))),V.a.createElement(d.a,null,V.a.createElement(i.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.props.onRequestClose,style:{color:l.a[800]}},a("post.cancelButton")),V.a.createElement(i.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.handlePost,disabled:this.state.disabledPost},this.props.edit?a("post.updateButton"):a("post.postButton")))),B&&n?V.a.createElement(Z.a,{open:B,progress:n,photos:this.selectedPhotos,onClose:this.closeAlbumDialog}):"",V.a.createElement(c.a,{PaperProps:{className:_()(t.fullPageXs,t.videoGallery)},open:this.state.videoGalleryOpen,onClose:this.handleCloseVideoGallery},V.a.createElement(d.a,{className:t.galleryActions},V.a.createElement(C.a,{variant:"h6",component:"div",className:t.galleryDialogTitle},V.a.createElement(M.a,{style:{color:"rgb(230, 35, 35)",margin:"0 10px",width:24,height:24}}),a("post.videoGalleryLabel")),V.a.createElement(g.a,{onClick:this.handleCloseVideoGallery},V.a.createElement(w.a,null))),V.a.createElement(m.a,{className:t.devider}),V.a.createElement(p.a,null,V.a.createElement(Ie,{set:this.onSetVideo,close:this.handleCloseVideoGallery}))),V.a.createElement(X,{open:S,onClose:this.handleCloseVideoLink,onAddLink:this.onSetVideo}),V.a.createElement(ye.a,{onClose:this.handleTogglePermission,open:W,onAddAccessList:this.handleAccessList,access:z}))}}const _e=Object(H.c)("translations")(Ue);var Be;t.a=(Be=Object(v.a)((e=>Object(ze.a)({fullPageXs:{minWidth:500,maxWidth:500,maxHeight:540,[e.breakpoints.down("xs")]:{minWidth:"100%",maxWidth:"100%",maxHeight:"100%",width:"100%",height:"100%",margin:0,overflowY:"auto"}},backdrop:{top:0,left:0,width:"100%",height:"100%",position:"fixed",willChange:"opacity",backgroundColor:"rgba(251, 249, 249, 0.5)",WebkitTapHighlightColor:"transparent"},input:{},content:{padding:0,paddingTop:0},dialogRoot:{paddingTop:0},popperOpen:{zIndex:10},popperClose:{pointerEvents:"none",zIndex:0},author:{paddingRight:70},dialogTitle:{padding:0},iconButtonsRoot:{justifyContent:"flex-start",margin:"0px 4px"},playVideo:{position:"absolute",right:"45%",top:"45%",cursor:"pointer",backgroundColor:"#f1efeca3",borderRadius:"50%",height:60,padding:0},playIcon:{width:60,height:60,fill:"red"},noDisplay:{display:"none"},playIconButtonRoot:{width:60,height:60},galleryActions:{margin:0,background:"#fff",WebkitBoxSizing:"border-box",boxSizing:"border-box",height:56,textAlign:"center",padding:4,minWidth:0,display:"flex",flexDirection:"row",justifyContent:"space-between"},galleryDialogTitle:{color:"#676767"},galleryDialogIcon:{},galleryAction:{margin:0,padding:0,minWidth:0},devider:{marginBottom:10},videoGallery:{},permission:{fontWeight:400,fontSize:"14px",cursor:"pointer",color:"blue"},disableComponent:{opacity:"0.2","pointer-events":"none"}})))(_e),Object(q.connect)(We,je)(Be))},574:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{constructor(e=[],t="",a="00000000-0000-0000-0000-000000000000",n=0,i=""){this.photos=e,this.cover=t,this.coverId=a,this.count=n,this.title=i}}},577:function(e,t,a){"use strict";var n=a(1153),i=a(854),o=a(1160),s=a(1154),r=a(1169),l=a(763),c=a(504),d=a(512),p=a(283),h=a(1136),m=a(15),u=a(676),g=a.n(u),f=a(614),b=a.n(f),v=a(675),y=a.n(v),E=a(527),C=a.n(E),x=a(575),w=a.n(x),k=a(615),O=a.n(k),S=a(150),P=a.n(S),N=a(0),I=a.n(N),T=a(4),L=a(1177),R=a(828),A=a(1155),D=a(687),M=a(310),j=a(502),W=a(471),z=a(47),U=a(470),_=a(468),B=a(467),V=a(204),q=a(51),F=a.n(q),H=a(178),G=a(59),Y=a(97),X=a(573),Z=a.n(X),J=a(92),K=a(35),$=a(46);const Q=()=>({textField:{fontWeight:400,fontSize:"14px ",width:"100%",margin:0,WebkitBoxShadow:"none",boxShadow:"none",borderColor:"transparent",height:38,border:"1px solid #000",resize:"none"},header:{padding:"2px 3px 3px 10px"},popperOpen:{zIndex:11},popperClose:{pointerEvents:"none",zIndex:0},iconButton:{top:0,display:"flex",right:4,flexDirection:"row-reverse",position:"absolute"},commentBody:{color:"black",fontWeight:400,fontSize:"12px",height:"100%",border:"none",width:"100%",outline:"none",resize:"none"},rightIconMenuItem:{fontSize:12,fontWeight:300,paddingLeft:6,paddingRight:6,paddingTop:0,paddingBottom:0},moreIcon:{width:"0.6em",height:"0.6em"},menuRoot:{marginTop:7,marginRight:7}});var ee=a(18);const te=(e,t)=>({delete:(t,a)=>e(J.f(t,a)),update:t=>{e(J.h(t))},openEditor:()=>e(J.k({id:t.comment.get("id","0"),postId:t.comment.get("postId")})),closeEditor:()=>e(J.d(t.comment.get("postId"),t.comment.get("id","0"))),getUserInfo:()=>e(K.k(t.comment.get("ownerUserId","0"),""))}),ae=()=>{const e=ee.a.selectCurrentUser(),t=$.a.selectUserProfileById();return(a,n)=>{const i=n.comment.get("ownerUserId","0"),o=e(a),s=o.get("userId","0");return{uid:s,avatar:n.comment.get("ownerAvatar","0"),fullName:o.get("ownerDisplayName","loading..."),isCommentOwner:s===i,commentOwner:t(a,{userId:i})}}};var ne=a(138);class ie extends N.Component{constructor(e){super(e),this.buttonMenu=null,this.styles={author:{fontSize:"10px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"},textarea:{fontWeight:400,fontSize:"14px",border:"none",width:"100%",outline:"none",resize:"none"},cancel:{float:"right",clear:"both",zIndex:5,margin:"0px 5px 5px 0px",fontWeight:400}},this.textareaRef=void 0,this.divCommentRef=void 0,this.inputText=void 0,this.divComment=void 0,this.handleEditComment=()=>{this.setState({openMenu:!1});const e=this.props.openEditor;e&&e()},this.handleCancelEdit=()=>{const e=this.props.closeEditor,t=this.state.initialText;t&&this.setState({text:t}),e&&e()},this.handleUpdateComment=()=>{const e=this.props.comment.set("text",this.state.text),t=this.props.update;t&&t(e),this.setState({initialText:this.state.text})},this.handleOnChange=e=>{const t=e.target.value;0===t.length||""===t.trim()||t.trim()===this.state.initialText?this.setState({text:t,editDisabled:!0}):this.setState({text:t,editDisabled:!1})},this.handleDelete=(e,t,a)=>{this.props.delete&&this.props.delete(t,a)},this.handleCommentMenu=e=>{this.setState({openMenu:!0,anchorEl:e.currentTarget})},this.handleCloseCommentMenu=()=>{this.setState({openMenu:!1})},this.textareaRef=e=>{this.inputText=e},this.divCommentRef=e=>{this.divComment=e},this.state={text:this.props.comment.get("text",""),initialText:this.props.comment.get("text",""),editDisabled:!0,isPostOwner:!1,openMenu:!1,anchorEl:null},this.handleDelete=this.handleDelete.bind(this),this.handleUpdateComment=this.handleUpdateComment.bind(this),this.handleOnChange=this.handleOnChange.bind(this),this.handleCancelEdit=this.handleCancelEdit.bind(this),this.handleEditComment=this.handleEditComment.bind(this)}componentDidMount(){const e=this.props,t=e.commentOwner,a=e.isCommentOwner,n=e.getUserInfo;a||t||!n||n()}render(){const e=this.props,t=e.comment,a=e.classes,i=e.t,o=e.editorStatus,r=this.state,l=r.openMenu,d=r.anchorEl;if(!i||!t)return I.a.createElement("div",null);const p=I.a.createElement("div",{className:a.menuRoot},this.props.isCommentOwner&&I.a.createElement(c.a,{buttonRef:e=>{this.buttonMenu=e},"aria-owns":Object(ne.a)(l,!1)?"comment-menu":"","aria-haspopup":"false",onClick:this.handleCommentMenu},I.a.createElement(C.a,{className:a.moreIcon})),I.a.createElement(_.a,{open:Object(ne.a)(l,!1),anchorEl:d,anchorReference:"anchorEl",anchorPosition:{top:0,left:0},onClose:this.handleCloseCommentMenu,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},I.a.createElement(U.a,{role:"menu"},this.props.isCommentOwner?I.a.createElement(h.a,{className:a.rightIconMenuItem,onClick:this.handleEditComment},i("comment.editButton")):"",this.props.isCommentOwner||this.props.isPostOwner?I.a.createElement(h.a,{className:a.rightIconMenuItem,onClick:e=>this.handleDelete(e,t.get("id","0"),t.get("postId","0"))},i("comment.deleteButton")):""))),m=()=>I.a.createElement("div",null,I.a.createElement(H.a,{to:"/".concat(u)}," ",I.a.createElement("span",{style:this.styles.author},t.get("ownerDisplayName","Loading..."))),I.a.createElement("span",{style:{fontWeight:400,fontSize:"8px"}},F()(t.get("creationDate",0)).local().fromNow())),u=t.get("ownerUserId"),g=I.a.createElement("div",{style:{outline:"none",flex:"auto",flexGrow:1}},o?I.a.createElement(B.a,{placeholder:i("comment.updateCommentPlaceholder"),autoFocus:!0,rowsMax:"4",value:this.state.text,onChange:this.handleOnChange,className:a.textField}):I.a.createElement("div",{className:P()("animate2-top10",a.commentBody)},this.state.text),I.a.createElement("div",{style:{display:o?"flex":"none",flexDirection:"row-reverse"}},I.a.createElement(R.a,{color:"primary",disabled:this.state.editDisabled,style:{float:"right",clear:"both",zIndex:5,margin:"0px 5px 5px 0px",fontWeight:400},onClick:this.handleUpdateComment}," ",i("comment.updateButton")," "),I.a.createElement(R.a,{color:"primary",style:this.styles.cancel,onClick:this.handleCancelEdit}," ",i("comment.cancelButton")," ")));return I.a.createElement("div",{className:"animate-top",key:t.get("id","0")},I.a.createElement(M.a,{elevation:0,className:"animate2-top10",style:{position:"relative",padding:"",display:this.state.display?"none":"block"}},I.a.createElement(n.a,{elevation:0},I.a.createElement(s.a,{className:a.header,title:o?"":I.a.createElement(m,null),subheader:g,avatar:I.a.createElement(H.a,{to:"/".concat(u)},I.a.createElement(V.a,{fullName:t.get("ownerDisplayName",""),fileName:t.get("ownerAvatar",""),size:24})),action:!this.props.isCommentOwner&&!this.props.isPostOwner&&this.props.disableComments||o?"":p}))))}}var oe=(e=>{const t=Object(Y.c)("translations")(e);return Object(G.connect)(ae,te)(Z()(Q)(t))})(ie);class se extends N.Component{constructor(e){super(e),this.commentList=()=>{const e=Object(T.Map)(this.props.comments),t=Object(T.Map)(this.props.commentsEditorStatus);if(!e.isEmpty()){const a=z.c(e.valueSeq()),n=[];return a.forEach((e=>{n.push(I.a.createElement(oe,{key:e.get("id"),comment:e,isPostOwner:this.props.isPostOwner,disableComments:this.props.disableComments,editorStatus:t.get(e.get("id","0"),!1)}))})),n}},this.state={}}render(){const e=this.props,t=e.classes,a=e.postId;return I.a.createElement(W.a,{key:"comment-list-".concat(a),className:t.list},this.commentList())}}var re=Object(G.connect)(((e,t)=>({commentsEditorStatus:e.getIn(["comment","editorStatus",t.postId],{})})),(()=>({})))(Object(m.a)((()=>({list:{width:"100%",maxHeight:290,overflowY:"auto",overflowX:"visible"}})))(se)),le=a(17),ce=a(122);class de extends ce.a{constructor(...e){super(...e),this.id=void 0,this.postId=void 0,this.text=void 0,this.score=void 0,this.creationDate=void 0,this.ownerDisplayName=void 0,this.ownerAvatar=void 0,this.ownerUserId=void 0}}var pe=a(519),he=a(43),me=a(32);const ue=()=>({textField:{fontWeight:400,fontSize:"14px"},header:{padding:"2px 3px 3px 10px"},commentBody:{color:"black",fontWeight:400,fontSize:"12px",height:"100%",border:"none",width:"100%",outline:"none",resize:"none",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},author:{fontSize:"10px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"},noUnderline:{display:"none"},postButton:{flexDirection:"row-reverse"},cardHeaderContent:{flex:"1 1 auto",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}}),ge=e=>({send:t=>{e(J.e(t))}}),fe=()=>{const e=ee.a.selectCurrentUser(),t=pe.a.selectRequest();return(a,n)=>{const i=n.postId,o=he.a.createServerRequestId(me.a.CommentGetComments,i),s=e(a),r=t(a,{requestId:o});return{commentsRequestStatus:r?r.status:le.a.NoAction,uid:s.get("userId",""),avatar:s.get("avatar",""),fullName:s.get("fullName","")}}};class be extends N.Component{constructor(e){super(e),this.styles={commentItem:{height:"60px",position:"",zIndex:""},toggleShowList:{height:"60px",zIndex:5},writeCommentTextField:{width:"100%",fontWeight:400,fontSize:"14px"},progressbar:{height:"1.5px",backgroundColor:"rgb(245, 243, 243)",color:A.a.A400},secondaryText:{fontSize:"13px",lineHeight:"20px",color:"rgba(0,0,0,0.87)",fontWeight:300,whiteSpace:"pre-wrap"},primaryText:{fontSize:"13px",paddingRight:"10px",fontWeight:400,color:"rgba(0,0,0,0.87)",textOverflow:"ellipsis",overflow:"hidden"}},this.clearCommentWrite=()=>{this.setState({commentText:"",postDisable:!0})},this.handlePostComment=()=>{const e=this.props,t=e.postId,a=e.fullName,n=e.avatar,i=e.uid,o=e.send,s=new de;s.postId=t,s.text=this.state.commentText,s.ownerAvatar=n,s.ownerDisplayName=a,s.ownerUserId=i,o&&o(Object(T.Map)(s)),this.clearCommentWrite()},this.handleChange=e=>{const t=e.target.value;this.setState({commentText:t}),0===t.length||""===t.trim()?this.setState({commentText:"",postDisable:!0}):this.setState({commentText:t,postDisable:!1})},this.commentWriteBox=()=>{const e=this.props,t=e.classes,a=e.postId,o=e.fullName,r=e.avatar,l=e.t;return l?I.a.createElement("div",null,I.a.createElement(D.a,null),I.a.createElement(M.a,{key:a+"-commentwrite",elevation:0,className:"animate2-top10"},I.a.createElement(n.a,{elevation:0},I.a.createElement(s.a,{className:t.header,avatar:I.a.createElement(V.a,{fullName:o,fileName:r,size:24}),subheader:I.a.createElement(j.a,{autoFocus:!0,placeholder:l("comment.addCommentPlaceholder"),multiline:!0,rowsMax:"4",InputProps:{disableUnderline:!0,autoFocus:!0,fullWidth:!0},value:this.state.commentText,onChange:this.handleChange,className:t.textField,fullWidth:!0})}),I.a.createElement(i.a,{className:t.postButton},I.a.createElement(R.a,{color:"primary",disabled:this.state.postDisable,onClick:this.handlePostComment},l("comment.postButton")))))):I.a.createElement("div",null)},this.loadCommentsList=()=>{const e=this.props,t=e.postId,a=e.open,n=this.props.comments||Object(T.Map)({});return n&&n.size>0?I.a.createElement(M.a,{elevation:0,style:a?{display:"block",padding:"0px 0px"}:{display:"none",padding:"12px 16px"}},I.a.createElement(re,{comments:n,isPostOwner:this.props.isPostOwner,disableComments:this.props.disableComments,postId:t})):""},this.state={commentText:"",postDisable:!0},this.handlePostComment=this.handlePostComment.bind(this),this.clearCommentWrite=this.clearCommentWrite.bind(this),this.commentWriteBox=this.commentWriteBox.bind(this),this.loadCommentsList=this.loadCommentsList.bind(this)}shouldComponentUpdate(e,t){let a=!1;return L.a(this.state,t)?(e.open!==this.props.open||e.disableComments!==this.props.disableComments||e.commentsRequestStatus!==this.props.commentsRequestStatus||e.comments!==this.props.comments)&&(a=!0):a=!0,a}render(){const e=this.props,t=e.postId,a=e.open,n=e.comments,i=e.commentsRequestStatus,o=I.a.createElement(d.a,{style:this.styles.progressbar,variant:"indeterminate"});return I.a.createElement("div",{key:t+"-comments-group"},n&&n.size>0&&I.a.createElement(D.a,null),I.a.createElement("div",{style:a?{display:"block"}:{display:"none"}},I.a.createElement(M.a,{elevation:0,className:"animate-top",style:a?{display:"none"}:{display:"block"}},I.a.createElement("div",{style:{position:"relative",height:"60px"}},I.a.createElement(R.a,{style:this.styles.toggleShowList,fullWidth:!0,onClick:this.props.onToggleRequest}," ")))),a?i===le.a.Sent?o:this.loadCommentsList():"",!this.props.disableComments&&a?this.commentWriteBox():"")}}var ve=(e=>{const t=Object(Y.c)("translations")(e);return Object(G.connect)(fe,ge)(Z()(ue)(t))})(be),ye=a(524),Ee=a(553),Ce=a(961),xe=a(295),we=a.n(xe),ke=a(29);class Oe extends N.Component{constructor(e){super(e),this.state={expanded:!1,truncated:!1},this.toggleLines=this.toggleLines.bind(this)}toggleLines(e){e.preventDefault(),this.setState({expanded:!this.state.expanded})}render(){const e=this.props,t=e.children,a=e.lines,n=e.classes,i=e.body;if(void 0===a)return ke.a.error("render/undefineProps/lines"),I.a.createElement("div",null);const o=this.state.expanded,s=I.a.createElement("div",{onClick:this.toggleLines,className:P()(n.root,{[n.expanded]:!o})},I.a.createElement(Ce.a,{in:o,collapsedHeight:"173px"},t));return(he.a.isEmpty(i)?0:he.a.getNumberOfLines(i))>a?s:t}}Oe.defaultProps={lines:3,more:"Read more",less:"Show less"};var Se=we()((()=>({root:{position:"relative"},expanded:{"&:before":{content:"",float:"left",width:5,height:"100%"},"&:after":{content:'"\\002026"',fontSize:34,fontWeight:500,color:"#4285f4",boxSizing:"content-box",float:"right",position:"absolute",top:150,left:"100%",height:20,width:"2em",marginLeft:"-2em",paddingRight:5,textAlign:"right",background:"linear-gradient(to right,rgba(255,255,255,0),white 50%,white)",cursor:"pointer"}}})))(Oe),Pe=a(1138),Ne=a(1137),Ie=a(510),Te=a(176),Le=a(663),Re=a.n(Le),Ae=a(1161),De=a(1162),Me=a(1163),je=a(1164),We=a(1165),ze=a(1166),Ue=a(1167),_e=a(1168);class Be extends N.Component{constructor(e){super(e),this.state={}}render(){const e=this.props,t=e.classes,a=e.t,n=e.shareOpen,i=e.onClose,o=e.openCopyLink,s=e.post,r=e.onCopyLink;return I.a.createElement(Pe.a,{className:t.fullPageXs,title:"Share On",open:n,onClose:i},I.a.createElement(M.a,{className:t.shareLinkPaper},o?I.a.createElement("div",null,I.a.createElement(j.a,{autoFocus:!0,fullWidth:!0,id:"text-field-default",defaultValue:"".concat(window.location.origin,"/").concat(s.get("ownerUserId"),"/posts/").concat(s.get("id"))}),I.a.createElement(Te.a,{className:P()("animate-top",t.clipboard),variant:"h5",component:"h2"},"Link has been copied to clipboard ...")):I.a.createElement(U.a,null,I.a.createElement("div",null,I.a.createElement(Ae.a,{onShareWindowClose:i,url:"".concat(window.location.origin,"/").concat(s.get("ownerUserId"),"/posts/").concat(s.get("id")),quote:s.get("body"),hashtag:s.get("tags",Object(T.List)([])).count()>0?"#".concat(s.getIn(["tags",0],"hashtag")):null},I.a.createElement(h.a,null,I.a.createElement(Ne.a,{classes:{root:t.networkShare}},I.a.createElement(De.a,{size:32,round:!0})),I.a.createElement(Ie.a,{inset:!0,primary:a("post.facebookButton")})))),I.a.createElement("div",null,I.a.createElement(Me.a,{onShareWindowClose:i,url:"".concat(window.location.origin,"/").concat(s.get("ownerUserId"),"/posts/").concat(s.get("id")),quote:s.get("body"),hashtag:"#".concat(s.getIn(["tags",0],""))},I.a.createElement(h.a,null,I.a.createElement(Ne.a,{classes:{root:t.networkShare}},I.a.createElement(je.a,{size:32,round:!0})),I.a.createElement(Ie.a,{inset:!0,primary:a("post.twitterButton")})))),I.a.createElement("div",null,I.a.createElement(We.a,{onShareWindowClose:i,url:"".concat(window.location.origin,"/").concat(s.get("ownerUserId"),"/posts/").concat(s.get("id")),quote:s.get("body"),hashtag:"#".concat(s.getIn(["tags",0],""))},I.a.createElement(h.a,null,I.a.createElement(Ne.a,{classes:{root:t.networkShare}},I.a.createElement(ze.a,{size:32,round:!0})),I.a.createElement(Ie.a,{inset:!0,primary:a("post.linkedinButton")})))),I.a.createElement("div",null,I.a.createElement(Ue.a,{onShareWindowClose:i,url:"".concat(window.location.origin,"/").concat(s.get("ownerUserId"),"/posts/").concat(s.get("id")),quote:s.get("body"),hashtag:"#".concat(s.getIn(["tags",0],""))},I.a.createElement(h.a,null,I.a.createElement(Ne.a,{classes:{root:t.networkShare}},I.a.createElement(_e.a,{size:32,round:!0})),I.a.createElement(Ie.a,{inset:!0,primary:a("post.googlePlusButton")})))),I.a.createElement(h.a,{onClick:r},I.a.createElement(Ne.a,null,I.a.createElement(Re.a,null)),I.a.createElement(Ie.a,{inset:!0,primary:a("post.copyLinkButton")})))))}}const Ve=Object(Y.c)("translations")(Be);var qe=Object(G.connect)((()=>({})),(()=>({})))(Object(m.a)((e=>({image:{verticalAlign:"top",maxWidth:"100%",minWidth:"100%",width:"100%"},clipboard:{fontSize:"18px",textAlign:"center",marginTop:"10px",color:"#1e882d",fontWeight:400},networkShare:{width:"100%",height:"100%"},fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},shareLinkPaper:{minHeight:80,padding:10,minWidth:460}})))(Ve)),Fe=a(664),He=a.n(Fe),Ge=a(75),Ye=a(206),Xe=a(665),Ze=a.n(Xe);class Je extends N.Component{constructor(e){super(e),this.handleClick=(e,t)=>{const a=this.props.onClick;a&&a(e,t)},this.state={}}getData(){const e=this.props,t=e.classes,a=e.images,n=Math.floor(2*Math.random()+1);return a.length>1?I.a.createElement("div",{className:t.container},I.a.createElement("div",{className:P()({[t.firstColumn]:1===n},{[t.firstRow]:2===n})},I.a.createElement(r.a,{image:a[0].url,onClick:e=>this.handleClick(e,0),className:P()(t.mediaCard,t.featureCard)})),I.a.createElement("div",{className:P()({[t.column]:1===n},{[t.row]:2===n})},a.map(((e,a)=>0!==a?I.a.createElement(r.a,{key:a,onClick:e=>this.handleClick(e,a),image:e.url,className:t.mediaCard}):"")))):I.a.createElement(ye.a,{fileName:a[0].url,onClick:e=>this.handleClick(e,0)})}render(){const e=this.props.classes;return I.a.createElement("div",{className:e.mainContainer},this.getData())}}var Ke=Object(m.a)((()=>({mainContainer:{width:"100%"},container:{display:"flex",flexWrap:"wrap",marginTop:20,width:"100%",height:415,position:"relative"},firstRow:{flex:"100%",display:"flex",paddingBottom:1},row:{flex:"100%",display:"flex",marginTop:1,marginBottom:1},firstColumn:{flex:"50%",display:"flex",flexDirection:"column",paddingRight:1},column:{flex:"50%",display:"flex",flexDirection:"column",paddingLeft:1,paddingRight:2},mediaCard:{height:"100%",width:"100%",backgroundSize:"cover",margin:1}})))(Je),$e=a(589),Qe=a.n($e);class et extends N.Component{constructor(e){super(e),this.handleImageClick=(e,t)=>{t(e)},this.state={},this.handleImageClick=this.handleImageClick.bind(this)}shouldComponentUpdate(e){return!L.a(e.images,this.props.images)}render(){const e=this.props,t=e.classes,a=e.images,n=e.currentAlbum;if(a&&a.size>0){const e=[];a.valueSeq().forEach((t=>{e.push({src:t,url:t,id:t})}));const i=e.slice(0,4);return I.a.createElement(Qe.a,{images:e,renderImageFunc:e=>I.a.createElement("div",{className:t.root},I.a.createElement(Ke,{images:i,onClick:(t,a)=>this.handleImageClick(a,e)}),I.a.createElement("div",{className:P()(t.titleContainer,{[t.noDisplay]:!(n&&n.get("album").get("title"))})},I.a.createElement("div",{className:t.aboveContainer}),I.a.createElement("div",{className:t.bottomContainer}),I.a.createElement(H.a,{to:"/u/".concat(n&&n.get("ownerUserId"),"/album/").concat(n&&n.get("id"))},I.a.createElement(Te.a,{className:t.title},n&&n.get("album").get("title")))))})}return I.a.createElement("div",{className:t.noAlbum},I.a.createElement(Ze.a,{className:t.noAlbumIcon}))}}var tt=we()((e=>({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",position:"relative",backgroundColor:e.palette.background.paper},gridList:{width:500,height:450},subheader:{width:"100%"},descRoot:{bottom:0,left:0,position:"absolute",right:0,zIndex:1},topGradiant:{background:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.6))",height:32},shadow:{backgroundColor:"rgba(0,0,0,.6)",padding:24,textAlign:"center",verticalAlign:"middle"},albumTitle:{color:"white"},noDisplay:{display:"none"},noAlbum:{display:"flex",justifyContent:"center",alignItems:"center"},noAlbumIcon:{fontSize:50},aboveContainer:{background:"linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.6))",height:30},bottomContainer:{backgroundColor:"rgba(0,0,0,.6)",height:70},titleContainer:{position:"absolute",bottom:0,left:1,right:1,height:100},title:{textAlign:"center",fontSize:22,fontWeight:400,color:"white",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})))(et),at=a(666),nt=a.n(at),it=a(667),ot=a.n(it),st=a(673),rt=a.n(st),lt=a(25),ct=a(177),dt=a(5),pt=a(37),ht=a(143),mt=a(26);const ut=(e,t)=>e.getIn(["comment","postComments",t.postId],Object(T.Map)({})),gt=()=>Object(mt.a)([ut],(e=>e)),ft=(e,t)=>{const a=t.post;return{vote:()=>e(ht.c(a.get("id"),a.get("ownerUserId"))),unvote:()=>e(ht.d(a.get("id"),a.get("ownerUserId"))),delete:t=>e(pt.h(t)),toggleDisableComments:t=>{e(pt.m(a.set("disableComments",t),(e=>e)))},toggleSharingComments:t=>{e(pt.m(a.set("disableSharing",t),(e=>e)))},goTo:t=>e(Object(ct.a)(t)),setHomeTitle:t=>e(dt.q(t||"")),getPostComments:(t,a,n,i)=>e(J.g(t,a,n,i))}},bt=()=>{const e=ee.a.selectCurrentUser(),t=gt();return(a,n)=>{const i=t(a,{postId:n.post.get("id")}),o=e(a).get("userId"),s=n.post.get("score",0),r=n.post.getIn(["votes",o],!1);return{commentList:i,avatar:n.post.get("ownerAvatar",""),fullName:n.post.get("ownerDisplayName",""),voteCount:s,currentUserVote:r,isPostOwner:o===n.post.get("ownerUserId")}}};class vt extends N.Component{constructor(e){super(e),this.styles={dialog:{width:"",maxWidth:"530px",borderRadius:"4px"}},this.handleOpenComments=()=>{const e=this.props,t=e.getPostComments,a=e.post;if(!a||!t)return;t(a.get("ownerUserId"),a.get("id"),0,10),this.setState({openComments:!this.state.openComments})},this.handleOpenPostWrite=()=>{this.closePostMenu(),this.setState({openPostWrite:!0})},this.handleClosePostWrite=()=>{this.setState({openPostWrite:!1})},this.handleDelete=()=>{const e=this.props.post;this.closePostMenu(),this.props.delete&&this.props.delete(e.get("id"))},this.openPostMenu=e=>{this.setState({postMenuAnchorEl:e.currentTarget,isPostMenuOpen:!0})},this.closePostMenu=()=>{this.setState({postMenuAnchorEl:null,isPostMenuOpen:!1})},this.handleCopyLink=()=>{const e=this.props.t;this.setState({openCopyLink:!0,shareTitle:e("post.copyLinkButton")})},this.handleOpenShare=()=>{const e=this.props.post;He()("".concat(window.location.origin,"/").concat(e.get("ownerUserId"),"/posts/").concat(e.get("id"))),this.setState({shareOpen:!0})},this.handleCloseShare=()=>{this.setState({shareOpen:!1,shareTitle:"Share On",openCopyLink:!1})},this.handleVote=()=>{const e=this.props,t=e.unvote,a=e.vote,n=e.currentUserVote;a&&t&&(n?t():a())},this.getOpenCommentGroup=e=>{this.setState({openCommentGroup:e})},this.onShowVideo=()=>{this.setState({showVideo:!0})},this.getPermissionLabel=()=>{const e=this.props,t=e.t,a=e.post.get("permission");let n="";return a===Ge.a.Public?n=t("permission.public"):a===Ge.a.Circles?n=t("permission.circles"):a===Ge.a.OnlyMe&&(n=t("permission.onlyMe")),n},this.rightIconMenu=()=>{const e=this.props,t=e.post,a=e.t,n=e.toggleDisableComments,i=e.toggleSharingComments,o=this.state,s=o.postMenuAnchorEl,r=o.isPostMenuOpen;return n&&i?I.a.createElement("div",null,I.a.createElement(c.a,{onClick:this.openPostMenu.bind(this)},I.a.createElement(C.a,null)),I.a.createElement(p.a,{open:r||!1,anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.closePostMenu},t.get("postTypeId")!==Ye.a.Album&&I.a.createElement(h.a,{onClick:this.handleOpenPostWrite}," ",a("post.edit")," "),I.a.createElement(h.a,{onClick:this.handleDelete}," ",a("post.delete")," "),I.a.createElement(h.a,{onClick:()=>n(!t.get("disableComments"))},t.get("disableComments")?a("post.enableComments"):a("post.disableComments")),I.a.createElement(h.a,{onClick:()=>i(!t.get("disableSharing"))},t.get("disableSharing")?a("post.enableSharing"):a("post.disableSharing")))):I.a.createElement("div",null)};const t=e.post;this.state={text:t.get("body",""),readMoreState:!1,openComments:!1,shareOpen:!1,disableComments:t.get("disableComments"),disableSharing:t.get("disableSharing"),shareTitle:"Share On",openCopyLink:!1,openPostWrite:!1,postMenuAnchorEl:null,isPostMenuOpen:!1,showVideo:!1},this.handleReadMore=this.handleReadMore.bind(this),this.getOpenCommentGroup=this.getOpenCommentGroup.bind(this),this.handleVote=this.handleVote.bind(this),this.handleOpenShare=this.handleOpenShare.bind(this),this.handleCloseShare=this.handleCloseShare.bind(this),this.handleCopyLink=this.handleCopyLink.bind(this),this.handleDelete=this.handleDelete.bind(this),this.handleOpenPostWrite=this.handleOpenPostWrite.bind(this),this.handleClosePostWrite=this.handleClosePostWrite.bind(this),this.handleOpenComments=this.handleOpenComments.bind(this),this.rightIconMenu=this.rightIconMenu.bind(this)}handleReadMore(){this.setState({readMoreState:!this.state.readMoreState})}shouldComponentUpdate(e,t){let a=!1;return e.post.equals(this.props.post)?e.commentList!==this.props.commentList||this.props.getPostComments!==e.getPostComments?a=!0:L.a(this.state,t)||(a=!0):a=!0,a}getAlbum(){const e=this.props.post,t=e.get("album"),a=e.get("id"),n=e.get("postTypeId");return t&&t.get("photos")&&(n===Ye.a.Album||n===Ye.a.PhotoGallery)?I.a.createElement(tt,{key:"post-album-grid-".concat(a),currentAlbum:e,images:t.get("photos")}):""}render(){const e=this.props,t=e.post,a=e.setHomeTitle,p=e.goTo,h=e.isPostOwner,m=e.commentList,u=e.classes,f=this.state.showVideo;if(!p||!a)return I.a.createElement("div",null);const v=t.get("ownerUserId"),E=t.get("ownerDisplayName"),C=t.get("creationDate"),x=t.get("ownerAvatar"),k=t.get("image"),S=t.get("body"),N=t.get("video"),T=t.get("thumbnail"),L=t.get("postTypeId"),R=t.get("id"),A=t.get("disableComments"),D=t.get("commentCounter"),M=t.get("disableSharing"),j=t.get("score");t.get("version");return I.a.createElement(n.a,{key:R+"post-card",className:"animate-top"},I.a.createElement(s.a,{title:I.a.createElement(H.a,{to:"/".concat(v)},E),subheader:C?(lt.a.dataFormat.postVersion,F()(C).local().fromNow()+" | ".concat(this.getPermissionLabel())):I.a.createElement(d.a,{color:"primary"}),avatar:I.a.createElement(H.a,{to:"/".concat(v)},I.a.createElement(V.a,{fullName:E,fileName:x,size:36})),action:h?this.rightIconMenu():""}),k&&""!==k&&L===Ye.a.Photo||T&&""!==T&&N&&""!==N&&L===Ye.a.Video?I.a.createElement(r.a,{className:u.cardMedia,image:L===Ye.a.Photo?k:T},f?I.a.createElement("div",{className:"player-wrapper"},I.a.createElement(ot.a,{controls:!0,className:"react-player",width:"100%",height:"100%",url:N,playing:!0})):I.a.createElement(I.a.Fragment,null,I.a.createElement(ye.a,{fileName:L===Ye.a.Photo?k:T}),I.a.createElement("span",{className:P()(u.playVideo,{[u.noDisplay]:L!==Ye.a.Video})},I.a.createElement(c.a,{className:u.playIconButtonRoot,onClick:this.onShowVideo},I.a.createElement(w.a,{className:u.playIcon}))))):"",this.getAlbum(),I.a.createElement(o.a,{className:u.postBody},I.a.createElement(Se,{body:S},I.a.createElement(nt.a,{properties:{target:"_blank",style:{color:"blue"},onClick:e=>e.stopPropagation()}},rt()(S,/#(\w+)/g,((e,t)=>I.a.createElement(H.a,{style:{color:"green"},key:e+t,to:"/tag/".concat(e),onClick:t=>{t.preventDefault(),t.stopPropagation(),p("/tag/".concat(e)),a("#".concat(e))}},"#",e)))))),I.a.createElement(i.a,null,I.a.createElement("div",{className:u.vote},I.a.createElement(c.a,{className:u.iconButton,onClick:this.handleVote,"aria-label":"Love"},I.a.createElement(l.a,{className:u.iconButton,checkedIcon:I.a.createElement(b.a,{style:{fill:"#4CAF50"}}),icon:I.a.createElement(y.a,{style:{fill:"#757575"}}),checked:this.props.currentUserVote})),I.a.createElement("div",{className:u.voteCounter}," ",j>0?j:""," ")),I.a.createElement("div",{style:{display:"inherit"}},I.a.createElement(c.a,{className:u.iconButton,onClick:this.handleOpenComments,"aria-label":"Comment"},I.a.createElement(g.a,null)),I.a.createElement("div",{className:u.commentCounter},D>0?D:""," ")),M?"":I.a.createElement(c.a,{className:u.iconButton,onClick:this.handleOpenShare,"aria-label":"Comment"},I.a.createElement(O.a,null))),I.a.createElement(ve,{open:this.state.openComments,comments:m,ownerPostUserId:v,onToggleRequest:this.handleOpenComments,isPostOwner:this.props.isPostOwner,disableComments:A,postId:R}),I.a.createElement(qe,{onClose:this.handleCloseShare,shareOpen:this.state.shareOpen,onCopyLink:this.handleCopyLink,openCopyLink:this.state.openCopyLink,post:t}),this.state.openPostWrite&&I.a.createElement(Ee.a,{key:"post-component-post-write-".concat(R),open:this.state.openPostWrite,onRequestClose:this.handleClosePostWrite,edit:!0,postModel:t}))}}const yt=Object(Y.c)("translations")(vt);var Et;t.a=(Et=Object(m.a)((e=>({iconButton:{},vote:{display:"flex",flex:1},voteCounter:{color:"#777",fontSize:12,fontWeight:500,marginTop:25,marginLeft:-18,marginRight:6},commentCounter:{fontWeight:400,color:"#777",fontSize:12,lineHeight:"48px",marginLeft:-2},popperOpen:{zIndex:10},popperClose:{pointerEvents:"none",zIndex:0},postBody:{wordWrap:"break-word",color:"rgba(0, 0, 0, 0.87)",fontSize:"0.875rem",fontWeight:400,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',lineHeight:"1.46429em",whiteSpace:"pre-line"},image:{width:"100%",height:500},playVideo:{position:"absolute",right:"45%",top:"45%",cursor:"pointer",backgroundColor:"#f1efeca3",borderRadius:"50%",height:60,padding:0},playIcon:{width:60,height:60,marginTop:"-12px",fill:"red"},noDisplay:{display:"none"},playIconButtonRoot:{width:60,height:60},cardMedia:{position:"relative"},fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}}})))(yt),Object(G.connect)(bt,ft)(Et))},578:function(e,t,a){"use strict";var n=a(1138),i=a(1141),o=a(1140),s=a(309),r=a(1156),l=a(504),c=a(1183),d=a(1194),p=a(15),h=a(176),m=a(563),u=a.n(m);var g=a(75),f=a(0),b=a.n(f),v=a(97),y=a(59),E=a(18),C=a(145);class x extends f.Component{constructor(e){super(e),this.handleSetPermission=e=>{const t=this.props,a=t.onAddAccessList,n=t.followingIds,i=t.currentUser;let o=[];e===g.a.Circles&&n&&i&&i.userId&&(o=n,o.push(i.userId)),a(o,e)},this.handleInputChange=e=>{const t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({[n]:a})};const t=e.access;this.state={selectedValue:t,disabledOk:!0}}render(){const e=this.props,t=e.classes,a=e.t,p=e.open,m=e.onClose,f=this.state.selectedValue;return b.a.createElement(n.a,{PaperProps:{className:t.fullPageXs},open:p,onClose:m,maxWidth:"md"},b.a.createElement(i.a,{className:t.dialogAction},b.a.createElement(h.a,{variant:"h6",component:"div",className:t.galleryDialogTitle},b.a.createElement(l.a,{className:t.header,onClick:m},b.a.createElement(u.a,null)),a("permission.titleLabel"))),b.a.createElement(o.a,{className:t.dialogContent},b.a.createElement(s.a,{component:"div",required:!0,className:t.formControl},b.a.createElement(d.a,{"aria-label":"selectedValue",name:"selectedValue",className:t.group,value:f,onChange:this.handleInputChange},b.a.createElement(r.a,{className:t.permissionItem,onClick:()=>this.handleSetPermission(g.a.OnlyMe),value:g.a.OnlyMe,control:b.a.createElement(c.a,null),label:a("permission.onlyMe")}),b.a.createElement(r.a,{className:t.permissionItem,onClick:()=>this.handleSetPermission(g.a.Public),value:g.a.Public,control:b.a.createElement(c.a,null),label:a("permission.public")}),b.a.createElement(r.a,{className:t.permissionItem,onClick:()=>this.handleSetPermission(g.a.Circles),value:g.a.Circles,control:b.a.createElement(c.a,null),label:a("permission.circles")}),b.a.createElement(r.a,{className:t.permissionItem,value:g.a.Custom,disabled:!0,control:b.a.createElement(c.a,null),label:a("permission.custom")})))))}}const w=Object(v.c)("translations")(x);t.a=Object(y.connect)((()=>{const e=C.a.selectFollowingIds(),t=E.a.selectCurrentUser();return a=>({followingIds:e(a),currentUser:t(a).toJS()})}),(()=>({})))(Object(p.a)((e=>({fullPageXs:{minWidth:400,[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},dialogTitle:{padding:0},root:{display:"flex"},formControl:{margin:e.spacing(3)},group:{margin:"".concat(e.spacing(1),"px 0")},dialogContent:{padding:0},dialogAction:{display:"flex",flexDirection:"row",justifyContent:"space-between"},permissionItem:{fontSize:15}})))(w))},589:function(e,t,a){var n,i;e.exports=(n=a(0),i=a(33),function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t){e.exports=n},function(e,t,a){e.exports=a(12)()},function(e,t){e.exports=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=n(a(17)),c=n(a(0)),d=n(a(1)),p=(n(a(18)),a(19)),h=(d.default.any,d.default.func,d.default.node,{component:"span",childFactory:function(e){return e}}),m=function(e){function t(a,n){i(this,t);var s=o(this,e.call(this,a,n));return s.performAppear=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(s._handleDoneAppearing.bind(s,e,t)):s._handleDoneAppearing(e,t)},s._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete s.currentlyTransitioningKeys[e];var a=(0,p.getChildMapping)(s.props.children);a&&a.hasOwnProperty(e)||s.performLeave(e,t)},s.performEnter=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(s._handleDoneEntering.bind(s,e,t)):s._handleDoneEntering(e,t)},s._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete s.currentlyTransitioningKeys[e];var a=(0,p.getChildMapping)(s.props.children);a&&a.hasOwnProperty(e)||s.performLeave(e,t)},s.performLeave=function(e,t){s.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(s._handleDoneLeaving.bind(s,e,t)):s._handleDoneLeaving(e,t)},s._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete s.currentlyTransitioningKeys[e];var a=(0,p.getChildMapping)(s.props.children);a&&a.hasOwnProperty(e)?s.keysToEnter.push(e):s.setState((function(t){var a=r({},t.children);return delete a[e],{children:a}}))},s.childRefs=Object.create(null),s.state={children:(0,p.getChildMapping)(a.children)},s}return s(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,p.getChildMapping)(e.children),a=this.state.children;for(var n in this.setState({children:(0,p.mergeChildMappings)(a,t)}),t){var i=a&&a.hasOwnProperty(n);!t[n]||i||this.currentlyTransitioningKeys[n]||this.keysToEnter.push(n)}for(var o in a){var s=t&&t.hasOwnProperty(o);!a[o]||s||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var a=this.keysToLeave;this.keysToLeave=[],a.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[];for(var a in this.state.children)!function(a){var n=e.state.children[a];if(n){var i="string"!==typeof n.ref,o=e.props.childFactory(n),s=function(t){e.childRefs[a]=t};o===n&&i&&(s=(0,l.default)(n.ref,s)),t.push(c.default.cloneElement(o,{key:a,ref:s}))}}(a);var n=r({},this.props);return delete n.transitionLeave,delete n.transitionName,delete n.transitionAppear,delete n.transitionEnter,delete n.childFactory,delete n.transitionLeaveTimeout,delete n.transitionEnterTimeout,delete n.transitionAppearTimeout,delete n.component,c.default.createElement(this.props.component,n,t)},t}(c.default.Component);m.displayName="TransitionGroup",m.propTypes={},m.defaultProps=h,t.default=m,e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"===typeof window||!window.document||!window.document.createElement),e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t="transition"+e+"Timeout",a="transition"+e;return function(e){if(e[a]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=i;var o=(n(a(0)),a(1)),s=n(o);t.nameShape=s.default.oneOfType([s.default.string,s.default.shape({enter:s.default.string,leave:s.default.string,active:s.default.string}),s.default.shape({enter:s.default.string,enterActive:s.default.string,leave:s.default.string,leaveActive:s.default.string,appear:s.default.string,appearActive:s.default.string})])},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),r=a.n(s),l=a(1),c=a.n(l),d=a(7),p=a(29),h=(a.n(p),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),m=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),h(t,[{key:"render",value:function(){var e=this.props,t=void 0;return e.hasRipple&&(t=r.a.createElement("circle",{cx:"12",cy:"12",r:"6"})),r.a.createElement("button",{className:"lightbox-btn "+(e.hasRipple?"lightbox-btn--ripple":""),onClick:e.onClick.bind(this)},r.a.createElement(d.a,{icon:e.icon,size:e.size},t))}}]),t}(r.a.Component);t.a=m,m.defaultProps={selectedImage:0,hasRipple:!1,size:24},m.propTypes={onClick:c.a.func.isRequired,icon:c.a.string.isRequired,hasRipple:c.a.bool,size:c.a.number}},function(e,t,a){"use strict";var n=a(0),i=a.n(n),o=a(1),s=a.n(o),r=a(28),l=function(e){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"-6 -6 36 36"},e.children,r.a[e.icon].map((function(e){return i.a.createElement("path",{key:e,d:e})})))};l.propTypes={icon:s.a.string.isRequired,size:s.a.number.isRequired},t.a=l},function(e,t,a){"use strict";function n(e){return"string"!==typeof e.className?[]:e.className.split(/\s+/)}function i(e,t){t=[].concat(t);var a=n(e);for(var i in t)if(a.indexOf(t[i])>-1)return!0;return!1}function o(e,t){i(e,t)||(e.className=[e.className,t].join(" "))}function s(e,t){var a=n(e);e.className=a.filter((function(e){return e!==t})).join(" ")}function r(e,t){i(e,t)?s(e,t):o(e,t)}t.c=i,t.a=o,t.d=s,t.b=r},function(e,t,a){e.exports=a(10)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(11);t.default=n.a},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),r=a.n(s),l=a(1),c=a.n(l),d=a(14),p=a(32),h=a(33),m=(a.n(h),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),u=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggleLightbox=a.toggleLightbox.bind(a),a.state={showLightbox:!1,selectedImage:0},a}return o(t,e),m(t,[{key:"toggleLightbox",value:function(e){this.setState({showLightbox:!this.state.showLightbox,selectedImage:e})}},{key:"render",value:function(){var e=this.props,t=e.renderImageFunc.call(this,this.toggleLightbox,e.thumbnailWidth,e.thumbnailHeight),a=void 0;return this.state.showLightbox&&(a=r.a.createElement(p.a,null,r.a.createElement(d.a,Object.assign({},this.props,{toggleLightbox:this.toggleLightbox,selectedImage:this.state.selectedImage})))),console.log("Iamhere"),r.a.createElement(r.a.Fragment,null,t,a)}}]),t}(r.a.Component);t.a=u,u.defaultProps={showImageModifiers:!0,thumbnailWidth:"80px",thumbnailHeight:"80px",renderImageFunc:function(e,t,a,n,i){return r.a.createElement("div",null)}},u.propTypes={showImageModifiers:c.a.bool,thumbnailWidth:c.a.string,thumbnailHeight:c.a.string,renderImageFunc:c.a.func,renderDescriptionFunc:c.a.func}},function(e,t,a){"use strict";function n(){}var i=a(13);e.exports=function(){function e(e,t,a,n,o,s){if(s!==i){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return a.checkPropTypes=n,a.PropTypes=a,a}},function(e,t,a){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),r=a.n(s),l=a(15),c=(a.n(l),a(1)),d=a.n(c),p=a(26),h=a(6),m=a(8),u=a(31),g=(a.n(u),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),f=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleLeftClick=a.handleLeftClick.bind(a),a.handleRightClick=a.handleRightClick.bind(a),a.canMoveToLeft=a.canMoveToLeft.bind(a),a.canMoveToRight=a.canMoveToRight.bind(a),a.toggleControls=a.toggleControls.bind(a),a.handleKeyboard=a.handleKeyboard.bind(a),a.getDescriptions=a.getDescriptions.bind(a),a.state={selectedImageIndex:e.selectedImage,direction:"none",imagesDescriptions:{}},a}return o(t,e),g(t,[{key:"getDescriptions",value:function(){var e=this,t=this.state.imagesDescriptions;this.props.images.forEach((function(a,n){if(a.description){if(a.description.then)return void a.description.then((function(a){t[n]=a,e.setState({imagesDescriptions:t})}));t[n]=a.description,e.setState({imagesDescriptions:t})}}))}},{key:"componentDidMount",value:function(){this.getDescriptions(),document.addEventListener("keydown",this.handleKeyboard),document.body.scrollTop,Object(m.a)(document.documentElement,"lightbox-open"),document.body.style.paddingRight="0px",document.body.style.overflowY="hidden"}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyboard),Math.abs(parseInt(document.documentElement.style.top,10)),Object(m.d)(document.documentElement,"lightbox-open"),document.body.style.paddingRight=null,document.body.style.overflowY=null}},{key:"handleKeyboard",value:function(e){var t=e.keyCode?e.keyCode:e.which;if(!(this.timeLastTransition&&new Date-this.timeLastTransition<350))switch(this.timeLastTransition=new Date,t){case 37:return this.handleLeftClick();case 39:return this.handleRightClick();case 27:return this.props.toggleLightbox()}}},{key:"handleLeftClick",value:function(){this.canMoveToLeft()&&this.setState({selectedImageIndex:this.state.selectedImageIndex-1,direction:"left"})}},{key:"handleRightClick",value:function(){this.canMoveToRight()&&this.setState({selectedImageIndex:this.state.selectedImageIndex+1,direction:"right"})}},{key:"canMoveToLeft",value:function(){return this.state.selectedImageIndex>0}},{key:"canMoveToRight",value:function(){return this.state.selectedImageIndex<this.props.images.length-1}},{key:"toggleControls",value:function(){Object(m.b)(this.refs.container,"hide-controls")}},{key:"render",value:function(){var e=[this.props,this.state],t=e[0],a=e[1],n=t.images[a.selectedImageIndex];if(!n)return console.error("Light box; ",t.images,a.selectedImageIndex),r.a.createElement("div",null);var i=void 0,o=void 0,s=a.imagesDescriptions[a.selectedImageIndex],c=(t.renderDescriptionFunc.call(this,s),"lightbox-transition-image");return this.canMoveToLeft()&&(i=r.a.createElement("div",{className:"lightbox-btn-left"},r.a.createElement(h.a,{icon:"left-arrow",onClick:this.handleLeftClick,size:56,hasRipple:!0}))),this.canMoveToRight()&&(o=r.a.createElement("div",{className:"lightbox-btn-right"},r.a.createElement(h.a,{icon:"right-arrow",onClick:this.handleRightClick,size:56,hasRipple:!0}))),r.a.createElement("div",{className:"lightbox-backdrop",ref:"container"},r.a.createElement("div",{className:"lightbox-btn-close"},r.a.createElement(h.a,{icon:"back-arrow",onClick:t.toggleLightbox,size:34,hasRipple:!0})),r.a.createElement("div",{className:"lightbox-title-content"},r.a.createElement("div",{className:"lightbox-title"},n.title)),r.a.createElement(l.CSSTransitionGroup,{transitionAppear:!0,transitionAppearTimeout:300,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:{enter:c+"-enter-"+a.direction,enterActive:c+"-enter-"+a.direction+"-active",leave:c+"-leave-"+a.direction,leaveActive:c+"-leave-"+a.direction+"-active",appear:c+"-appear",appearActive:c+"-appear-active"}},r.a.createElement(p.a,{key:n.src,src:n.src,showImageModifiers:t.showImageModifiers,toggleControls:this.toggleControls})),i,o)}}]),t}(r.a.Component);t.a=f,f.defaultProps={selectedImage:0,renderDescriptionFunc:function(e){return r.a.createElement("div",null,String(e))}},f.propTypes={selectedImage:d.a.number,images:d.a.array.isRequired,toggleLightbox:d.a.func.isRequired,showImageModifiers:d.a.bool,renderDescriptionFunc:d.a.func}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=n(a(16)),o=n(a(3));e.exports={TransitionGroup:o.default,CSSTransitionGroup:i.default}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=n(a(0)),c=n(a(1)),d=n(a(3)),p=n(a(20)),h=a(5),m=(h.nameShape.isRequired,c.default.bool,c.default.bool,c.default.bool,(0,h.transitionTimeout)("Appear"),(0,h.transitionTimeout)("Enter"),(0,h.transitionTimeout)("Leave"),{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),u=function(e){function t(){var a,n;i(this,t);for(var s=arguments.length,r=Array(s),c=0;c<s;c++)r[c]=arguments[c];return a=n=o(this,e.call.apply(e,[this].concat(r))),n._wrapChild=function(e){return l.default.createElement(p.default,{name:n.props.transitionName,appear:n.props.transitionAppear,enter:n.props.transitionEnter,leave:n.props.transitionLeave,appearTimeout:n.props.transitionAppearTimeout,enterTimeout:n.props.transitionEnterTimeout,leaveTimeout:n.props.transitionLeaveTimeout},e)},o(n,a)}return s(t,e),t.prototype.render=function(){return l.default.createElement(d.default,r({},this.props,{childFactory:this._wrapChild}))},t}(l.default.Component);u.displayName="CSSTransitionGroup",u.propTypes={},u.defaultProps=m,t.default=u,e.exports=t.default},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],a=0;a<e;a++)t[a]=arguments[a];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},function(e,t,a){"use strict";var n=function(){};e.exports=n},function(e,t,a){"use strict";function n(e){if(!e)return e;var t={};return o.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t}function i(e,t){function a(a){return t.hasOwnProperty(a)?t[a]:e[a]}e=e||{},t=t||{};var n={},i=[];for(var o in e)t.hasOwnProperty(o)?i.length&&(n[o]=i,i=[]):i.push(o);var s=void 0,r={};for(var l in t){if(n.hasOwnProperty(l))for(s=0;s<n[l].length;s++){var c=n[l][s];r[n[l][s]]=a(c)}r[l]=a(l)}for(s=0;s<i.length;s++)r[i[s]]=a(i[s]);return r}t.__esModule=!0,t.getChildMapping=n,t.mergeChildMappings=i;var o=a(0)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){return b.length?b.forEach((function(a){return e.addEventListener(a,t,!1)})):setTimeout(t,0),function(){b.length&&b.forEach((function(a){return e.removeEventListener(a,t,!1)}))}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=n(a(21)),d=n(a(23)),p=n(a(24)),h=a(25),m=n(a(0)),u=n(a(1)),g=a(2),f=a(5),b=[];h.transitionEnd&&b.push(h.transitionEnd),h.animationEnd&&b.push(h.animationEnd);var v=(u.default.node,f.nameShape.isRequired,u.default.bool,u.default.bool,u.default.bool,u.default.number,u.default.number,u.default.number,function(e){function t(){var a,n;i(this,t);for(var s=arguments.length,r=Array(s),l=0;l<s;l++)r[l]=arguments[l];return a=n=o(this,e.call.apply(e,[this].concat(r))),n.componentWillAppear=function(e){n.props.appear?n.transition("appear",e,n.props.appearTimeout):e()},n.componentWillEnter=function(e){n.props.enter?n.transition("enter",e,n.props.enterTimeout):e()},n.componentWillLeave=function(e){n.props.leave?n.transition("leave",e,n.props.leaveTimeout):e()},o(n,a)}return s(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,a){var n=(0,g.findDOMNode)(this);if(n){var i=this.props.name[e]||this.props.name+"-"+e,o=this.props.name[e+"Active"]||i+"-active",s=null,l=void 0;(0,c.default)(n,i),this.queueClassAndNode(o,n);var p=function(e){e&&e.target!==n||(clearTimeout(s),l&&l(),(0,d.default)(n,i),(0,d.default)(n,o),l&&l(),t&&t())};a?(s=setTimeout(p,a),this.transitionTimeouts.push(s)):h.transitionEnd&&(l=r(n,p))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var a=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,p.default)((function(){return a.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,c.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=l({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,m.default.cloneElement(m.default.Children.only(this.props.children),e)},t}(m.default.Component));v.displayName="CSSTransitionGroupChild",v.propTypes={},t.default=v,e.exports=t.default},function(e,t,a){"use strict";function n(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(a(22));e.exports=t.default},function(e,t,a){"use strict";function n(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,a){"use strict";function n(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=n(e.className,t):e.setAttribute("class",n(e.className&&e.className.baseVal||"",t))}},function(e,t,a){"use strict";function n(e){var t=(new Date).getTime(),a=Math.max(0,16-(t-d)),n=setTimeout(e,a);return d=t,n}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(a(4)),o=["","webkit","moz","o","ms"],s="clearTimeout",r=n,l=void 0,c=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&o.some((function(e){var t=c(e,"request");if(t in window)return s=c(e,"cancel"),r=function(e){return window[t](e)}}));var d=(new Date).getTime();(l=function(e){return r(e)}).cancel=function(e){window[s]&&"function"===typeof window[s]&&window[s](e)},t.default=l,e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var n="transform",i=void 0,o=void 0,s=void 0,r=void 0,l=void 0,c=void 0,d=void 0,p=void 0,h=void 0,m=void 0,u=void 0;if(function(e){return e&&e.__esModule?e:{default:e}}(a(4)).default){var g=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},a=Object.keys(t),n=void 0,i=void 0,o="",s=0;s<a.length;s++){var r=a[s];if(r+"TransitionProperty"in e){o="-"+r.toLowerCase(),n=t[r]("TransitionEnd"),i=t[r]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!i&&"animationName"in e&&(i="animationend"),e=null,{animationEnd:i,transitionEnd:n,prefix:o}}();i=g.prefix,t.transitionEnd=o=g.transitionEnd,t.animationEnd=s=g.animationEnd,t.transform=n=i+"-"+n,t.transitionProperty=r=i+"-transition-property",t.transitionDuration=l=i+"-transition-duration",t.transitionDelay=d=i+"-transition-delay",t.transitionTiming=c=i+"-transition-timing-function",t.animationName=p=i+"-animation-name",t.animationDuration=h=i+"-animation-duration",t.animationTiming=m=i+"-animation-delay",t.animationDelay=u=i+"-animation-timing-function"}t.transform=n,t.transitionProperty=r,t.transitionTiming=c,t.transitionDelay=d,t.transitionDuration=l,t.transitionEnd=o,t.animationName=p,t.animationDuration=h,t.animationTiming=m,t.animationDelay=u,t.animationEnd=s,t.default={transform:n,end:o,property:r,timing:c,delay:d,duration:l}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),r=a.n(s),l=a(2),c=a.n(l),d=a(1),p=a.n(d),h=a(27),m=a(7),u=a(8),g=a(30),f=(a.n(g),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),b=[Math.pow(1.1,30),Math.pow(1/1.1,10)],v=b[0],y=b[1],E=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.resetImageInitialState=a.resetImageInitialState.bind(a),a.handleWindowResize=a.handleWindowResize.bind(a),a.handleRotate=a.handleRotate.bind(a),a.handleZoom=a.handleZoom.bind(a),a.setZoomLimits=a.setZoomLimits.bind(a),a.handleWheel=a.handleWheel.bind(a),a.handleMove=a.handleMove.bind(a),a.handleMoveEnd=a.handleMoveEnd.bind(a),a.handleMoveStart=a.handleMoveStart.bind(a),a.isInsideImage=a.isInsideImage.bind(a),a.state={loader:!0,ratio:1,positionX:0,positionY:0,rotate:0,width:0,height:0,boxWidth:0,boxHeight:0},a}return o(t,e),f(t,[{key:"componentDidMount",value:function(){this.resetImageInitialState(this.props),this.startPoints=null,window.addEventListener("resize",this.handleWindowResize),document.addEventListener("mousedown",this.handleMoveStart),document.addEventListener("mouseup",this.handleMoveEnd),document.addEventListener("touchstart",this.handleMoveStart),document.addEventListener("touchend",this.handleMoveEnd),window.setTimeout(this.props.toggleControls,500),this.props.showImageModifiers&&(document.addEventListener("mousemove",this.handleMove),document.addEventListener("touchmove",this.handleMove),document.addEventListener("wheel",this.handleWheel))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize),document.removeEventListener("mousedown",this.handleMoveStart),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleMoveEnd),document.removeEventListener("touchstart",this.handleMoveStart),document.removeEventListener("touchmove",this.handleMove),document.removeEventListener("touchend",this.handleMoveEnd),document.removeEventListener("wheel",this.handleWheel)}},{key:"resetImageInitialState",value:function(e){var t=new Image,a=this;t.onload=function(){var e=[this.width,this.height],t=e[0],n=e[1],i=c.a.findDOMNode(a.refs.container),o=[i.offsetWidth,i.offsetHeight],s=o[0],r=o[1],l=Math.min(s/t,r/n);isNaN(l)&&(l=1),a.setState({loader:!1,ratio:l,rotate:0,positionX:(s-t*l)/2,positionY:(r-n*l)/2,width:this.width,height:this.height,boxWidth:s,boxHeight:r,moving:!1})},t.src=e.src}},{key:"handleWindowResize",value:function(){this.resetImageInitialState(this.props)}},{key:"handleRotate",value:function(e){this.setState({rotate:(360+this.state.rotate+e)%360})}},{key:"handleZoom",value:function(e,t){t||(t=1);var a=e>0?Math.pow(1.1,t):Math.pow(1/1.1,t),n=this.setZoomLimits(this.state.ratio*a),i=this.state,o=void 0,s=void 0;if(Math.min(i.boxWidth/i.width,i.boxHeight/i.height)>=n-.05)o=(i.boxWidth-i.width*n)/2,s=(i.boxHeight-i.height*n)/2;else{var r=i.boxWidth/2,l=i.boxHeight/2,c=r-i.positionX,d=l-i.positionY,p=c/(i.width*i.ratio),h=d/(i.height*i.ratio);o=r-i.width*n*p,s=l-i.height*n*h}this.setState({ratio:n,positionX:o,positionY:s})}},{key:"setZoomLimits",value:function(e){var t=this.state,a=Math.min(t.boxWidth/t.width,t.boxHeight/t.height);return e/a>v?v*a:e/a<y?y*a:e}},{key:"handleWheel",value:function(e){this.isInsideImage(e)&&this.handleZoom(e.deltaY)}},{key:"handleMove",value:function(e){e=this.getEv(e);var t=this.state;if(t.moving){var a=void 0,n=void 0;switch(t.rotate){case 90:n=this.startPoints[0]-e.pageX,a=e.pageY-this.startPoints[1];break;case 180:a=this.startPoints[0]-e.pageX,n=this.startPoints[1]-e.pageY;break;case 270:n=e.pageX-this.startPoints[0],a=this.startPoints[1]-e.pageY;break;default:a=e.pageX-this.startPoints[0],n=e.pageY-this.startPoints[1]}this.startPoints=[e.pageX,e.pageY],(t.positionX+a>=0||t.positionX+a<=t.boxWidth-t.width*t.ratio)&&(a=0),(t.positionY+n>=0||t.positionY+n<=t.boxHeight-t.height*t.ratio)&&(n=0),this.setState({positionX:t.positionX+a,positionY:t.positionY+n})}}},{key:"handleMoveEnd",value:function(e){this.setState({moving:!1})}},{key:"handleMoveStart",value:function(e){if(e=this.getEv(e),this.isInsideImage(e)&&1===e.which){this.startPoints=[e.pageX,e.pageY],this.setState({moving:!0});var t=this;window.setTimeout((function(){!t.state.moving&&t.startPoints&&t.startPoints[0]===e.pageX&&t.startPoints[1]===e.pageY&&Object(u.c)(e.target,["lightbox-backdrop","lightbox-image"])&&t.props.toggleControls()}),200)}}},{key:"isInsideImage",value:function(e){var t=c.a.findDOMNode(this.refs.container).getBoundingClientRect();return!(e.pageY<t.top||e.pageY>t.bottom||e.pageX<t.left||e.pageX>t.right)}},{key:"getEv",value:function(e){return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type?{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,which:1,target:e.target}:e}},{key:"render",value:function(){var e=[this.props,this.state],t=e[0],a=e[1],n="url("+t.src+")",i=void 0,o=void 0;t.showImageModifiers&&(i=r.a.createElement(h.a,{handleRotate:this.handleRotate,handleZoom:this.handleZoom,currentImage:t.src})),a.loader&&(n="none",o=r.a.createElement("div",{className:"lightbox-loader"},r.a.createElement(m.a,{icon:"spinner",size:58})));var s="rotate("+a.rotate+"deg)",l={height:"100%",backgroundImage:n,backgroundRepeat:"no-repeat",backgroundSize:a.width*a.ratio+"px "+a.height*a.ratio+"px",backgroundPosition:a.positionX+"px "+a.positionY+"px",MsTransform:s,WebkitTransform:s,transform:s};return r.a.createElement("div",{className:"lightbox-content-center"},i,r.a.createElement("div",{className:"lightbox-image-container",ref:"container"},r.a.createElement("div",{className:"lightbox-image"+(a.moving?" moving":""),style:l},o)))}}]),t}(r.a.Component);t.a=E,Image.propTypes={src:p.a.string.isRequired,showImageModifiers:p.a.bool.isRequired}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),r=a.n(s),l=a(1),c=a.n(l),d=a(6),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),h=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleRotateClockwise=a.handleRotateClockwise.bind(a),a.handleRotateCounterclockwise=a.handleRotateCounterclockwise.bind(a),a.handleZoomIn=a.handleZoomIn.bind(a),a.handleZoomOut=a.handleZoomOut.bind(a),a.handleDownload=a.handleDownload.bind(a),a}return o(t,e),p(t,[{key:"handleRotateClockwise",value:function(){this.props.handleRotate.call(this,90)}},{key:"handleRotateCounterclockwise",value:function(){this.props.handleRotate.call(this,-90)}},{key:"handleZoomIn",value:function(){this.props.handleZoom.call(this,1,10)}},{key:"handleZoomOut",value:function(){this.props.handleZoom.call(this,-1,10)}},{key:"handleDownload",value:function(){console.log(this.props.currentImage),window.open(this.props.currentImage)}},{key:"render",value:function(){return r.a.createElement("div",{className:"lightbox-modifiers-box"},r.a.createElement(d.a,{icon:"zoom-in",onClick:this.handleZoomIn,size:34,hasRipple:!0}),r.a.createElement(d.a,{icon:"zoom-out",onClick:this.handleZoomOut,size:34,hasRipple:!0}),r.a.createElement(d.a,{icon:"rotate-left",onClick:this.handleRotateCounterclockwise,size:34,hasRipple:!0}),r.a.createElement(d.a,{icon:"rotate-right",onClick:this.handleRotateClockwise,size:34,hasRipple:!0}),r.a.createElement(d.a,{icon:"download",onClick:this.handleDownload,size:34,hasRipple:!0}))}}]),t}(r.a.Component);t.a=h,h.propTypes={handleRotate:c.a.func.isRequired,handleZoom:c.a.func.isRequired,currentImage:c.a.string.isRequired}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={"zoom-out":["M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"],"zoom-in":["M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"],download:["M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"],"rotate-left":["M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"],"rotate-right":["M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"],"left-arrow":["M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],"right-arrow":["M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],"back-arrow":["M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],spinner:["M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"]}},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),r=a.n(s),l=a(2),c=a.n(l),d=a(1),p=a.n(d),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),h(t,[{key:"componentDidMount",value:function(){this._popup=document.createElement("div"),document.body.appendChild(this._popup),this._render()}},{key:"componentDidUpdate",value:function(){this._render()}},{key:"componentWillUnmount",value:function(){c.a.unmountComponentAtNode(this._popup),document.body.removeChild(this._popup)}},{key:"_render",value:function(){c.a.render(this.props.children,this._popup)}},{key:"render",value:function(){return null}}]),t}(r.a.PureComponent);t.a=m,m.propTypes={children:p.a.node}},function(e,t){}]))},592:function(e,t,a){"use strict";var n=a(175),i=a(508),o=a(1137),s=a(510),r=a(310),l=a(295),c=a.n(l),d=a(557),p=a.n(d);const h=e=>e.reduce(((e,t,a,n)=>t<n[e]?a:e),0),m=e=>{const t=[];for(let a=0;a<e;a++)t.push(0);return t};var u=a(43),g=a(150),f=a.n(g),b=a(206),v=a(4),y=a(585),E=a.n(y),C=a(0),x=a.n(C),w=a(587),k=a.n(w),O=a(97),S=a(536),P=a(126),N=a(577),I=a(553),T=a(204),L=a(531),R=a(17),A=a(179),D=a(59),M=a(5),j=a(18),W=a(121),z=a(519);const U=e=>({openPostWrite:()=>e(M.n(A.a.PostWrite)),closePostWrite:()=>e(M.c(A.a.PostWrite)),showTopLoading:()=>e(M.w()),hideTopLoading:()=>e(M.j())}),_=()=>{const e=j.a.selectCurrentUser(),t=W.a.selectDialogState(),a=W.a.selectProgress(),n=z.a.selectRequest();return(i,o)=>{const s=e(i),r=t(i,{type:A.a.PostWrite}),l=n(i,{requestId:o.requestId}),c=a(i);return{streamRequestStatus:l?l.status:R.a.NoAction,avatar:s.get("avatar",""),fullName:s.get("fullName"),postWriteDilogOpen:r,progress:c}}},B=(e,t)=>e>1400?V(3,t):e<867?V(1,t):e<1400?V(2,t):[],V=(e,t)=>{const a=[];let n=0;const i=m(e);return t.forEach((e=>{a[n]||(a[n]=[]),a[n].push(e),++i[n];e.get("postTypeId")!==b.a.Text&&++i[n];const t=e.get("body");i[n]+=Number(u.a.getNumberOfLines(t)/10),n=h(i)})),a};class q extends C.Component{static getDerivedStateFromProps(e,t){if(e.posts&&e.posts.count()>0&&!e.posts.equals(t.prevPosts)){return{posts:B(window.innerWidth,e.posts),prevPosts:e.posts.count()}}return null}constructor(e){super(e),this.nextPage=0,this.styles={postWritePrimaryText:{color:n.a[400],cursor:"text"},postWtireItem:{fontWeight:"200"}},this.loader=()=>{const e=this.props.streamRequestStatus,t=this.props.loadStream;t&&e&&e!==R.a.Sent&&(t(this.nextPage),this.nextPage++)},this.handleResize=e=>{const t=this.props.posts,a=B(e.target.innerWidth,t);this.setState({posts:a})},this.handleOpenPostWrite=()=>{const e=this.props.openPostWrite;e&&e()},this.handleClosePostWrite=()=>{const e=this.props.closePostWrite;e&&e()},this.writePostElement=()=>{const e=this.props,t=e.tag,a=e.displayWriting,n=e.classes,l=e.t,c=e.postWriteDilogOpen;return x.a.createElement("div",{className:f()("grid-cell animate-top",n.gridCell),style:{maxWidth:"530px",minWidth:"280px"}},c&&x.a.createElement(I.a,{open:c,onRequestClose:this.handleClosePostWrite,edit:!1}),a&&!t?x.a.createElement(x.a.Fragment,null,x.a.createElement(r.a,{elevation:2},x.a.createElement(i.a,{button:!0,style:this.styles.postWtireItem,onClick:this.handleOpenPostWrite},x.a.createElement(T.a,{fullName:this.props.fullName,fileName:this.props.avatar,size:36}),x.a.createElement(s.a,{inset:!0,primary:x.a.createElement("span",{style:this.styles.postWritePrimaryText}," ",l("home.postWriteButtonText"))}),x.a.createElement(o.a,null,x.a.createElement(p.a,null)))),x.a.createElement("div",{style:{height:"16px"}})):"")},this.getpostList=()=>{const e=this.props.classes,t=this.state.posts,a=[];return(t||[]).forEach(((t,n)=>{const i=x.a.createElement("div",{className:e.postBox,key:"post-stream-column-".concat(n)},0===n?this.writePostElement():"",t.map(((t,a)=>x.a.createElement(C.Fragment,{key:"post-container-".concat(t.get("id"))},a>0?x.a.createElement("div",{className:e.spaceBox}," "):"",x.a.createElement(N.a,{key:"".concat(t.get("id"),"-stream-div-post"),post:t})," "))));a.push(i)})),a},this.state={divided:!1,disableComments:this.props.disableComments||!1,disableSharing:this.props.disableSharing||!1,openPostWrite:!1,homeTitle:e.homeTitle||"",hasMorePosts:!0,posts:[],prevPosts:Object(v.Map)({})},this.handleResize=E()(this.handleResize,300),this.handleResize=this.handleResize.bind(this),this.loader=this.loader.bind(this),this.handleOpenPostWrite=this.handleOpenPostWrite.bind(this),this.handleClosePostWrite=this.handleClosePostWrite.bind(this)}componentDidMount(){setTimeout((()=>{this.loader()}),500)}render(){const e=this.props,t=e.hasMorePosts,a=e.classes,n=e.posts;return x.a.createElement(S.a,{dataLength:n?n.size:0,next:this.loader,hasMore:t||!1,endMessage:"",loader:x.a.createElement(L.a,{key:"stream-load-more-progress"})},x.a.createElement(k.a,{target:"window",onResize:this.handleResize}),!n||n.count()>0?"":this.writePostElement(),x.a.createElement("div",{className:a.container},n&&n.count()>0&&this.getpostList()))}}const F=Object(O.c)("translations")(q);var H;t.a=Object(P.withRouter)((H=c()((e=>({root:{position:"relative"},container:{maxWidth:1200,textAlign:"center",whiteSpace:"nowrap",lineHeight:0,position:"relative",boxPack:"center",WebkitJustifyContent:"center",justifyContent:"center",display:"flex",margin:"0 auto",padding:"10px 0",width:"100%","@media (min-width: 440px)":{width:"90%"},"@media only screen and (min-width: 860px)":{width:"90%"},"@media (min-width: 1600px)":{width:"94%"},"@media (max-width: 440px)":{width:"calc(100% - 16px)",margin:"0 8px"}},postBox:{flexGrow:1,WebkitBoxFlex:1,flex:"0 1 auto",maxWidth:530,minWidth:140,width:"100%",display:"inline-block",verticalAlign:"top",textAlign:"left",whiteSpace:"normal",lineHeight:"normal","& + &":{marginLeft:24}},spaceBox:{height:24},gridCell:{[e.breakpoints.down("sm")]:{maxWidth:"100% !important",width:"100%"}}})))(F),Object(D.connect)(_,U)(H)))},593:function(e,t,a){"use strict";var n=a(8),i=a(828),o=a(501),s=a(1138),r=a(1144),l=a(1157),c=a(1142),d=a(1143),p=a(504),h=a(512),m=a(1158),u=a(310),g=a(1149),f=a(15),b=a(502),v=a(176),y=a(732),E=a.n(y),C=a(534),x=a.n(C),w=a(540),k=a.n(w),O=a(734),S=a.n(O),P=a(735),N=a.n(P),I=a(733),T=a.n(I),L=a(535),R=a(43),A=a(528),D=a.n(A);var M=a(578),j=a(32),W=a(75),z=a(574),U=a(124),_=a(122);class B extends _.a{constructor(e,t,a,n,i,o,s,r,l,c,d,p,h,m,u,g,f,b,v,y,E,C,x,w=[],k=W.a.Public,O){super(),this.id=e,this.postTypeId=t,this.creationDate=a,this.deleteDate=n,this.score=i,this.votes=o,this.viewCount=s,this.comments=r,this.body=l,this.ownerUserId=c,this.ownerDisplayName=d,this.ownerAvatar=p,this.lastEditDate=h,this.tags=m,this.commentCounter=u,this.image=g,this.imageFullPath=f,this.video=b,this.thumbnail=v,this.album=y,this.disableComments=E,this.disableSharing=C,this.deleted=x,this.accessUserList=w,this.permission=k,this.version=O}}var V=a(206),q=a(51),F=a.n(q),H=a(0),G=a.n(H),Y=a(97),X=a(59),Z=a(729),J=a.n(Z),K=a(25),$=a(5),Q=a(44),ee=a(17),te=a(18),ae=a(519),ne=a(114),ie=a.n(ne),oe=a(138);const se=[{label:""},{label:""}];function re(e){return G.a.createElement(g.a,Object.assign({direction:"up"},e))}class le extends H.Component{static getDerivedStateFromProps(e,t){if(e.progress){for(let a=0;a<t.selectedPhotos.length;a++){const n=t.selectedPhotos[a];if(100!==e.progress.getIn([n.fileName,"percent"],0))return{nextDisabled:!0}}return{nextDisabled:!1}}return null}constructor(e){super(e),this.handleSetImage=()=>{this.close()},this.getPermissionLabel=()=>{const e=this.props.t,t=this.state.permission;if(!e)return"";let a="";return t===W.a.Public?a=e("permission.public"):t===W.a.Circles?a=e("permission.circles"):t===W.a.OnlyMe&&(a=e("permission.onlyMe")),a},this.handleChange=e=>t=>{const a=this.props.t,n=t.target.value;let i=null;R.a.isEmpty(n)&&(i=a("album.".concat(e,"Error"))),this.setState((()=>({[e]:n,["".concat(e,"Error")]:i,saveDisabled:!R.a.isEmpty(i)})))},this.handleNext=()=>{this.setState((e=>({activeStep:e.activeStep+1})))},this.handleBack=()=>{this.setState((e=>({activeStep:e.activeStep-1})))},this.handleTogglePermission=()=>{this.setState((e=>({permissionOpen:!e.permissionOpen})))},this.handleAccessList=(e,t)=>{this.setState({accessUserList:e,permission:t,permissionOpen:!1})},this.closeDialog=()=>{const e=this.props.onClose;e&&e()},this.saveAlbum=()=>{const e=this.props,t=e.progress,a=e.post,i=e.t,o=e.currentUser,s=e.currentAlbum,r=this.state,l=r.accessUserList,c=r.permission,d=R.a.isEmpty(this.state.description)?"":this.state.description,p=R.a.isEmpty(this.state.albumName)?i("album.defaultAlbumName"):this.state.albumName,h=[...this.state.selectedPhotos],m=[],u=h.map((e=>{const a=t.getIn([e.fileName,"meta"],{url:""}),n=e.fileName.split(".")[0],i=new U.a(n,0,0,a.url||URL.createObjectURL(e.file),a.url||URL.createObjectURL(e.file),e.fileName,"","",e.fileName,o&&o.userId?o.userId:"0",0,"",0,0,"",!1,l,c);return m.push(i),{url:a.url,fileName:e.fileName,fileId:n}}));if(a&&o){const e={photos:u.slice(0,4),cover:u[0].url,coverId:u[0].fileId,count:u.length,title:p},t=e.photos.map((e=>e.url)),a=new z.a(t,e.cover,e.coverId,e.count,e.title);s?this.updateAlbum(Object(n.a)({},s),o,d,u[0].url,a,l,c,m):this.createAlbum(o,d,u[0].url,a,l,c,m)}},this.createAlbum=(e,t,a,n,i,o,s)=>{const r=this.props.post,l=new B("0",V.a.Album,F()().utc().valueOf(),0,0,{},0,{},t,e.userId,e.fullName,e.avatar,0,[],0,a,"","","",n,!1,!1,!1,i,o,K.a.dataFormat.postVersion);r&&r(l,s)},this.updateAlbum=(e,t,a,n,i,o,s,r)=>{const l=this.props.post;e.body=a,e.image=n,e.album=i,e.accessUserList=o,e.permission=s,l&&l(e,r)},this.handleStepChange=e=>{this.setState({activeStep:e})},this.onFileChange=e=>{const t=this.props.uploadImage,a=[...this.state.selectedPhotos];if(t){const n=e.currentTarget.files,i=[];for(let e=0;e<n.length;e++){const a=n[e],o=L.a.getExtension(a.name),s="".concat(ie()(),".").concat(o);i.push({file:URL.createObjectURL(a),fileName:s}),t(a,s)}const o=[...a,...i];this.setState({selectedPhotos:o}),e.currentTarget.value=null}},this.deleteSelectedPhoto=e=>{let t=[...this.state.selectedPhotos];t=t.filter((t=>t.fileName!==e)),this.setState({selectedPhotos:t})},this.close=()=>{this.props.onClose&&this.props.onClose()},this.imageList=()=>{const e=this.props,t=e.classes,a=e.progress;return this.state.selectedPhotos.map((e=>{const n=a.getIn([e.fileName,"percent"],0),i=a.getIn([e.fileName,"visible"],!0);return G.a.createElement(c.a,{key:"album-dialog-tile-".concat(e.fileName)},G.a.createElement("img",{src:e.file,alt:"something"}),G.a.createElement(d.a,{title:i?G.a.createElement(h.a,{variant:"determinate",value:n,color:"secondary"}):"",actionIcon:i?"":G.a.createElement(p.a,{className:t.icon,onClick:()=>this.deleteSelectedPhoto(e.fileName)},G.a.createElement(k.a,null))}))}))},this.gridTile=()=>{const e=this.props.classes;return G.a.createElement("div",{className:e.gridTileRoot},G.a.createElement(r.a,{cellHeight:180,className:e.gridList},G.a.createElement(c.a,{key:"Subheader",cols:2,style:{height:"auto"}}),this.imageList()))},this.state={acceptedFiles:[],rejectedFiles:[],activeStep:0,selectedPhotos:[...e.photos],nextDisabled:!0,description:e.currentAlbum&&e.currentAlbum.body?e.currentAlbum.body:"",descriptionError:"",albumName:e.currentAlbum&&e.currentAlbum.album&&e.currentAlbum.album.title?e.currentAlbum.album.title:"",saveDisabled:void 0===e.currentAlbum,albumNameError:"",accessUserList:e.currentAlbum&&e.currentAlbum.accessUserList?e.currentAlbum.accessUserList:[],permission:e.currentAlbum&&e.currentAlbum.permission?e.currentAlbum.permission:W.a.Public,permissionOpen:!1},this.close=this.close.bind(this),this.onFileChange=this.onFileChange.bind(this),this.handleSetImage=this.handleSetImage.bind(this),this.imageList=this.imageList.bind(this),this.deleteSelectedPhoto=this.deleteSelectedPhoto.bind(this),this.handleChange=this.handleChange.bind(this),this.saveAlbum=this.saveAlbum.bind(this),this.handleTogglePermission=this.handleTogglePermission.bind(this),this.getPermissionLabel=this.getPermissionLabel.bind(this),this.handleAccessList=this.handleAccessList.bind(this),this.closeDialog=this.closeDialog.bind(this),this.createAlbum=this.createAlbum.bind(this),this.updateAlbum=this.updateAlbum.bind(this)}onDrop(e,t){this.setState({acceptedFiles:e,rejectedFiles:t})}render(){const e=this.props,t=e.t,a=e.classes,n=e.theme,r=e.open,c=e.onClose,d=e.createAlbumRequestStatus,h=this.state,g=h.activeStep,f=h.nextDisabled,y=h.selectedPhotos,C=h.description,w=h.descriptionError,k=h.albumNameError,O=h.albumName,P=h.permissionOpen,I=h.permission,L=h.saveDisabled,A=se.length,D=d===ee.a.Sent;return G.a.createElement(s.a,{id:"album-dialog-",open:r,classes:{paper:a.paper},onClose:c,TransitionComponent:re},G.a.createElement("input",{accept:"image/*",className:a.input,id:"album-dialog-button-file",multiple:!0,onChange:this.onFileChange,type:"file"}),G.a.createElement("div",{className:a.root},G.a.createElement(u.a,{square:!0,elevation:0,className:a.header},G.a.createElement(v.a,null,se[g].label),G.a.createElement(p.a,{color:"inherit",onClick:c,"aria-label":"Close"},G.a.createElement(x.a,null)),0===g?G.a.createElement("label",{htmlFor:"album-dialog-button-file"},G.a.createElement(i.a,{component:"span",color:"primary"},G.a.createElement(E.a,null),t("album.addPhotos"))):G.a.createElement(v.a,{variant:"h6"}," ",t("album.saveAlbum")," ")),G.a.createElement(J.a,{axis:"rtl"===n.direction?"x-reverse":"x",index:this.state.activeStep,onChangeIndex:this.handleStepChange,enableMouseEvents:!0},this.gridTile(),G.a.createElement("div",{className:a.information},G.a.createElement(l.a,{onClick:this.handleTogglePermission,className:a.button},G.a.createElement(T.a,null),this.getPermissionLabel()),G.a.createElement("div",{style:{height:40}}),G.a.createElement(b.a,{autoFocus:1===g,value:O,onChange:this.handleChange("albumName"),placeholder:t("album.albumTitle"),error:!R.a.isEmpty(k),helperText:k}),G.a.createElement("div",{style:{height:40}}),G.a.createElement(b.a,{value:C,onChange:this.handleChange("description"),placeholder:t("album.description"),multiline:!0,rows:2,rowsMax:4,style:{fontWeight:400,fontSize:"14px",flexShrink:0,width:"initial",flexGrow:1},error:!R.a.isEmpty(w),helperText:w}))),G.a.createElement(m.a,{steps:A,position:"bottom",activeStep:g,className:a.mobileStepper,nextButton:g!==A-1?G.a.createElement(G.a.Fragment,null,G.a.createElement(i.a,{size:"small",disabled:f||!(y.length>0),onClick:this.handleNext},t("album.next")," ","rtl"===n.direction?G.a.createElement(S.a,null):G.a.createElement(N.a,null))):G.a.createElement("div",{className:a.wrapper},G.a.createElement(i.a,{size:"small",variant:"contained",disabled:D||L||!R.a.isEmpty(k)||!R.a.isEmpty(w),color:"secondary",onClick:this.saveAlbum},t("album.save")),D&&G.a.createElement(o.a,{size:24,className:a.buttonProgress})),backButton:G.a.createElement(i.a,{size:"small",onClick:this.handleBack,disabled:0===g},"rtl"===n.direction?G.a.createElement(N.a,null):G.a.createElement(S.a,null),t("album.back"))})),G.a.createElement(M.a,{onClose:this.handleTogglePermission,open:P,onAddAccessList:this.handleAccessList,access:I}))}}const ce=Object(Y.c)("translations")(le),de=Object(f.a)((e=>({fullPageXs:{},root:{flexGrow:1,overflow:"hidden"},gridTileRoot:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,maxHeight:380},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),marginBottom:20,backgroundColor:e.palette.background.default},paper:{minHeight:"500px",[e.breakpoints.down("xs")]:{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",borderRadius:0,margin:0}},information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:D.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"}})),{withTheme:!0})(ce);t.a=Object(X.connect)((()=>{const e=te.a.selectCurrentUser(),t=ae.a.selectRequest();return a=>{const n=e(a).toJS(),i=R.a.createServerRequestId(j.a.GalleryCreateAlbum,Object(oe.b)(n.userId,"currentUser.userId")),o=t(a,{requestId:i});return{currentUser:n,createAlbumRequestStatus:o?o.status:ee.a.NoAction}}}),(e=>({post:(t,a)=>e(Q.i(t,a)),uploadImage:(t,a)=>e(Q.t(t,a)),deleteImage:(t,a)=>e(Q.j(t,K.a.data.imageFolderPath,a)),progressChange:(t,a)=>e($.o(t,a))})))(de)},595:function(e,t,a){"use strict";var n=a(828),i=a(763),o=a(175),s=a(1138),r=a(1141),l=a(1140),c=a(687),d=a(504),p=a(471),h=a(508),m=a(511),u=a(510),g=a(15),f=a(502),b=a(514),v=a(590),y=a.n(v),E=a(43);var C=a(177),x=a(32),w=a(4),k=a(0),O=a.n(k),S=a(97),P=a(59),N=a(94),I=a(17),T=a(46);class L extends k.Component{constructor(e){super(e),this.handleDoneAddCircle=()=>{const e=this.props,t=e.userId,a=e.addUserToCircle,n=e.selectedCircles,i=e.deleteFollowingUser,o=e.avatar,s=e.fullName;!this.state.disabledDoneCircles&&n&&a&&i&&(n.count()>0?a(n,{avatar:o,userId:t,fullName:s}):i(t))},this.onFollowUser=e=>{e.preventDefault();const t=this.props,a=t.isFollowed,n=t.followUser,i=t.followingCircle,o=t.userId,s=t.followRequest,r=t.avatar,l=t.fullName;n&&i&&(s&&s.status===I.a.Sent||(a?this.onRequestOpenAddCircle():n(i?i.get("id"):o,{avatar:r,userId:o,fullName:l})))},this.onRequestCloseAddCircle=()=>{const e=this.props,t=e.setSelectedCircles,a=e.userId,n=e.userBelongCircles,i=e.closeSelectCircles;t&&n&&i&&(t(a,n),i(a),this.setState({circleName:"",disabledCreateCircle:!0,disabledAddToCircle:!0,disabledDoneCircles:!0}))},this.onRequestOpenAddCircle=()=>{const e=this.props,t=e.openSelectCircles,a=e.userId;e.followingCircle&&t&&t(a)},this.onCreateCircle=()=>{const e=this.state.circleName,t=this.props.createCircle;t&&e&&""!==e.trim()&&(t(this.state.circleName),this.setState({circleName:"",disabledCreateCircle:!0}))},this.handleChangeName=e=>{this.setState({circleName:e.target.value,disabledCreateCircle:void 0===e.target.value||""===e.target.value.trim()})},this.handleSelectCircle=(e,t,a)=>{const n=this.props,i=n.setSelectedCircles,o=n.selectedCircles,s=n.userId;if(!o||!i)return;let r=o;if(t)r=o.push(a);else{const e=o.indexOf(a);r=r.remove(e)}i(s,r),this.setState({disabledDoneCircles:!this.selectedCircleChange(r)})},this.circleList=()=>{const e=this.props,t=e.circles,a=e.userId,n=e.selectedCircles,o=e.classes,s=e.t,r=[];if(t)return t.forEach(((e,t)=>{const l=!!n&&n.indexOf(t)>-1,c=e.get("name");r.push(O.a.createElement(h.a,{key:"".concat(t,"-").concat(a),dense:!0,className:o.listItem},O.a.createElement(u.a,{className:o.circleName,primary:"Following"===c?s("userBox.followingLabel"):c}),O.a.createElement(m.a,null,O.a.createElement(i.a,{onChange:(e,a)=>this.handleSelectCircle(e,a,t),checked:l}))))})),r},this.selectedCircleChange=e=>{let t=!1;const a=this.props.userBelongCircles;if(a&&e){if(e.count()===a.count())for(let n=0;n<e.count();n++){const i=e.get(n,"");if(!(a.indexOf(i)>-1)){t=!0;break}}else t=!0;return t}},this.state={circleName:"",disabledCreateCircle:!0,disabledAddToCircle:!0,disabledDoneCircles:!0},this.handleChangeName=this.handleChangeName.bind(this),this.onCreateCircle=this.onCreateCircle.bind(this),this.handleDoneAddCircle=this.handleDoneAddCircle.bind(this),this.circleList=this.circleList.bind(this)}render(){const e=this.state.disabledDoneCircles,t=this.props,a=t.isFollowed,i=t.firstBelongCircle,g=t.belongCirclesCount,v=t.followRequest,E=t.userId,C=t.isSelecteCirclesOpen,x=t.addToCircleRequest,w=t.deleteFollowingUserRequest,k=t.classes,S=t.t;if(!S)return O.a.createElement("div",null);const P=a?(g||0)>1?S("userBox.numberOfCircleButton",{circlesCount:g}):i?i.get("name",S("userBox.followedLabel")):S("userBox.followButton"):S("userBox.followButton");return O.a.createElement(O.a.Fragment,null,O.a.createElement(n.a,{color:"primary",onClick:this.onFollowUser,disabled:!!v&&v.status===I.a.Sent||!!w&&w.status===I.a.Sent},"Following"===P?S("userBox.followingLabel"):P),O.a.createElement(s.a,{PaperProps:{className:k.fullPageXs},key:this.props.userId||0,open:!0===C,onClose:this.onRequestCloseAddCircle},O.a.createElement(l.a,{className:k.dialogContent},O.a.createElement(p.a,null,this.circleList(),O.a.createElement("div",{className:k.space}),O.a.createElement(c.a,null),O.a.createElement(h.a,{key:"'circleName'-".concat(E),dense:!0,className:k.listItem},O.a.createElement(u.a,{primary:O.a.createElement(f.a,{autoFocus:!0,placeholder:S("userBox.groupNamePlaceholder"),onChange:this.handleChangeName,value:this.state.circleName})}),O.a.createElement(m.a,null,O.a.createElement(d.a,{onClick:this.onCreateCircle,disabled:this.state.disabledCreateCircle},O.a.createElement(b.a,{title:S("userBox.createCircleTooltip")},O.a.createElement(y.a,null))))))),O.a.createElement(r.a,null,O.a.createElement(n.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,onClick:this.onRequestCloseAddCircle,style:{color:o.a[800]}},S("userBox.cancelButton")),O.a.createElement(n.a,{color:"primary",disableFocusRipple:!0,disableRipple:!0,disabled:e||!!x&&x.status===I.a.Sent,onClick:this.handleDoneAddCircle},S("userBox.doneButton")))))}}const R=Object(S.c)("translations")(L);t.a=Object(P.connect)(((e,t)=>{const a=e.getIn(["circle","circleList"],Object(w.Map)({})),n=e.getIn(["circle","userTies",t.userId,"circleIdList"],Object(w.List)()),i=n.count()>0,o=a.filter((e=>e.get("isSystem",!1)&&"Following"===e.get("name"))).toArray()[0][1],s=E.a.createServerRequestId(x.a.CircleFollowUser,t.userId),r=e.getIn(["server","request",s]),l=e.getIn(["circle","selectedCircles",t.userId],[]),c=e.getIn(["circle","ui","openSelecteCircles",t.userId],[]),d=T.a.getUserProfileById(e,{userId:t.userId}).toJS();return{isSelecteCirclesOpen:c,isFollowed:i,selectedCircles:l,circles:a,followingCircle:o,userBelongCircles:n,followRequest:r,belongCirclesCount:n.count()||0,firstBelongCircle:n?a.get(n.get(0),Object(w.Map)({})):Object(w.Map)({}),avatar:d.avatar||"",fullName:d.fullName||""}}),(e=>({createCircle:t=>e(N.g(t)),addUserToCircle:(t,a)=>e(N.o(t,a)),followUser:(t,a)=>e(N.j(t,a)),deleteFollowingUser:t=>e(N.i(t)),setSelectedCircles:(t,a)=>e(N.s(t,a)),removeSelectedCircles:t=>e(N.r(t)),openSelectCircles:t=>e(N.q(t)),closeSelectCircles:t=>e(N.f(t)),goTo:t=>e(Object(C.a)(t))})))(Object(g.a)((e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},paper:{height:254,width:243,margin:10,textAlign:"center",minWidth:230,maxWidth:"257px"},dialogContent:{paddingTop:"5px",padding:"0px 5px 5px 5px"},circleName:{fontSize:"1rem"},space:{height:20},fullPageXs:{[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},followButton:{position:"absolute",bottom:"30px",left:0,right:0},dialog:{width:"",maxWidth:"280px",borderRadius:"4px"}})))(R))}}]);