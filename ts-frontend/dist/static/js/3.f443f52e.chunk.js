(this["webpackJsonptelar-social-engine"]=this["webpackJsonptelar-social-engine"]||[]).push([[3],{519:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(26);const o=(e,t)=>e.getIn(["server","request",t.requestId]),a={getRequest:o,selectRequest:()=>Object(i.a)([o],(e=>e&&e.toJS()))}},574:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e=[],t="",n="00000000-0000-0000-0000-000000000000",i=0,o=""){this.photos=e,this.cover=t,this.coverId=n,this.count=i,this.title=o}}},578:function(e,t,n){"use strict";var i=n(1138),o=n(1141),a=n(1140),r=n(309),s=n(1156),l=n(504),c=n(1183),u=n(1194),p=n(15),h=n(176),d=n(563),m=n.n(d);var f=n(75),g=n(0),b=n.n(g),v=n(97),y=n(59),E=n(18),w=n(145);class C extends g.Component{constructor(e){super(e),this.handleSetPermission=e=>{const t=this.props,n=t.onAddAccessList,i=t.followingIds,o=t.currentUser;let a=[];e===f.a.Circles&&i&&o&&o.userId&&(a=i,a.push(o.userId)),n(a,e)},this.handleInputChange=e=>{const t=e.target,n="checkbox"===t.type?t.checked:t.value,i=t.name;this.setState({[i]:n})};const t=e.access;this.state={selectedValue:t,disabledOk:!0}}render(){const e=this.props,t=e.classes,n=e.t,p=e.open,d=e.onClose,g=this.state.selectedValue;return b.a.createElement(i.a,{PaperProps:{className:t.fullPageXs},open:p,onClose:d,maxWidth:"md"},b.a.createElement(o.a,{className:t.dialogAction},b.a.createElement(h.a,{variant:"h6",component:"div",className:t.galleryDialogTitle},b.a.createElement(l.a,{className:t.header,onClick:d},b.a.createElement(m.a,null)),n("permission.titleLabel"))),b.a.createElement(a.a,{className:t.dialogContent},b.a.createElement(r.a,{component:"div",required:!0,className:t.formControl},b.a.createElement(u.a,{"aria-label":"selectedValue",name:"selectedValue",className:t.group,value:g,onChange:this.handleInputChange},b.a.createElement(s.a,{className:t.permissionItem,onClick:()=>this.handleSetPermission(f.a.OnlyMe),value:f.a.OnlyMe,control:b.a.createElement(c.a,null),label:n("permission.onlyMe")}),b.a.createElement(s.a,{className:t.permissionItem,onClick:()=>this.handleSetPermission(f.a.Public),value:f.a.Public,control:b.a.createElement(c.a,null),label:n("permission.public")}),b.a.createElement(s.a,{className:t.permissionItem,onClick:()=>this.handleSetPermission(f.a.Circles),value:f.a.Circles,control:b.a.createElement(c.a,null),label:n("permission.circles")}),b.a.createElement(s.a,{className:t.permissionItem,value:f.a.Custom,disabled:!0,control:b.a.createElement(c.a,null),label:n("permission.custom")})))))}}const x=Object(v.c)("translations")(C);t.a=Object(y.connect)((()=>{const e=w.a.selectFollowingIds(),t=E.a.selectCurrentUser();return n=>({followingIds:e(n),currentUser:t(n).toJS()})}),(()=>({})))(Object(p.a)((e=>({fullPageXs:{minWidth:400,[e.breakpoints.down("xs")]:{width:"100%",height:"100%",margin:0,overflowY:"auto"}},dialogTitle:{padding:0},root:{display:"flex"},formControl:{margin:e.spacing(3)},group:{margin:"".concat(e.spacing(1),"px 0")},dialogContent:{padding:0},dialogAction:{display:"flex",flexDirection:"row",justifyContent:"space-between"},permissionItem:{fontSize:15}})))(x))},589:function(e,t,n){var i,o;e.exports=(i=n(0),o=n(33),function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t){e.exports=i},function(e,t,n){e.exports=n(12)()},function(e,t){e.exports=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=i(n(17)),c=i(n(0)),u=i(n(1)),p=(i(n(18)),n(19)),h=(u.default.any,u.default.func,u.default.node,{component:"span",childFactory:function(e){return e}}),d=function(e){function t(n,i){o(this,t);var r=a(this,e.call(this,n,i));return r.performAppear=function(e,t){r.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(r._handleDoneAppearing.bind(r,e,t)):r._handleDoneAppearing(e,t)},r._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete r.currentlyTransitioningKeys[e];var n=(0,p.getChildMapping)(r.props.children);n&&n.hasOwnProperty(e)||r.performLeave(e,t)},r.performEnter=function(e,t){r.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(r._handleDoneEntering.bind(r,e,t)):r._handleDoneEntering(e,t)},r._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete r.currentlyTransitioningKeys[e];var n=(0,p.getChildMapping)(r.props.children);n&&n.hasOwnProperty(e)||r.performLeave(e,t)},r.performLeave=function(e,t){r.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(r._handleDoneLeaving.bind(r,e,t)):r._handleDoneLeaving(e,t)},r._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete r.currentlyTransitioningKeys[e];var n=(0,p.getChildMapping)(r.props.children);n&&n.hasOwnProperty(e)?r.keysToEnter.push(e):r.setState((function(t){var n=s({},t.children);return delete n[e],{children:n}}))},r.childRefs=Object.create(null),r.state={children:(0,p.getChildMapping)(n.children)},r}return r(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,p.getChildMapping)(e.children),n=this.state.children;for(var i in this.setState({children:(0,p.mergeChildMappings)(n,t)}),t){var o=n&&n.hasOwnProperty(i);!t[i]||o||this.currentlyTransitioningKeys[i]||this.keysToEnter.push(i)}for(var a in n){var r=t&&t.hasOwnProperty(a);!n[a]||r||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[];for(var n in this.state.children)!function(n){var i=e.state.children[n];if(i){var o="string"!==typeof i.ref,a=e.props.childFactory(i),r=function(t){e.childRefs[n]=t};a===i&&o&&(r=(0,l.default)(i.ref,r)),t.push(c.default.cloneElement(a,{key:n,ref:r}))}}(n);var i=s({},this.props);return delete i.transitionLeave,delete i.transitionName,delete i.transitionAppear,delete i.transitionEnter,delete i.childFactory,delete i.transitionLeaveTimeout,delete i.transitionEnterTimeout,delete i.transitionAppearTimeout,delete i.component,c.default.createElement(this.props.component,i,t)},t}(c.default.Component);d.displayName="TransitionGroup",d.propTypes={},d.defaultProps=h,t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"===typeof window||!window.document||!window.document.createElement),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=o;var a=(i(n(0)),n(1)),r=i(a);t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(7),p=n(29),h=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),h(t,[{key:"render",value:function(){var e=this.props,t=void 0;return e.hasRipple&&(t=s.a.createElement("circle",{cx:"12",cy:"12",r:"6"})),s.a.createElement("button",{className:"lightbox-btn "+(e.hasRipple?"lightbox-btn--ripple":""),onClick:e.onClick.bind(this)},s.a.createElement(u.a,{icon:e.icon,size:e.size},t))}}]),t}(s.a.Component);t.a=d,d.defaultProps={selectedImage:0,hasRipple:!1,size:24},d.propTypes={onClick:c.a.func.isRequired,icon:c.a.string.isRequired,hasRipple:c.a.bool,size:c.a.number}},function(e,t,n){"use strict";var i=n(0),o=n.n(i),a=n(1),r=n.n(a),s=n(28),l=function(e){return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"-6 -6 36 36"},e.children,s.a[e.icon].map((function(e){return o.a.createElement("path",{key:e,d:e})})))};l.propTypes={icon:r.a.string.isRequired,size:r.a.number.isRequired},t.a=l},function(e,t,n){"use strict";function i(e){return"string"!==typeof e.className?[]:e.className.split(/\s+/)}function o(e,t){t=[].concat(t);var n=i(e);for(var o in t)if(n.indexOf(t[o])>-1)return!0;return!1}function a(e,t){o(e,t)||(e.className=[e.className,t].join(" "))}function r(e,t){var n=i(e);e.className=n.filter((function(e){return e!==t})).join(" ")}function s(e,t){o(e,t)?r(e,t):a(e,t)}t.c=o,t.a=a,t.d=r,t.b=s},function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11);t.default=i.a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(14),p=n(32),h=n(33),d=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleLightbox=n.toggleLightbox.bind(n),n.state={showLightbox:!1,selectedImage:0},n}return a(t,e),d(t,[{key:"toggleLightbox",value:function(e){this.setState({showLightbox:!this.state.showLightbox,selectedImage:e})}},{key:"render",value:function(){var e=this.props,t=e.renderImageFunc.call(this,this.toggleLightbox,e.thumbnailWidth,e.thumbnailHeight),n=void 0;return this.state.showLightbox&&(n=s.a.createElement(p.a,null,s.a.createElement(u.a,Object.assign({},this.props,{toggleLightbox:this.toggleLightbox,selectedImage:this.state.selectedImage})))),console.log("Iamhere"),s.a.createElement(s.a.Fragment,null,t,n)}}]),t}(s.a.Component);t.a=m,m.defaultProps={showImageModifiers:!0,thumbnailWidth:"80px",thumbnailHeight:"80px",renderImageFunc:function(e,t,n,i,o){return s.a.createElement("div",null)}},m.propTypes={showImageModifiers:c.a.bool,thumbnailWidth:c.a.string,thumbnailHeight:c.a.string,renderImageFunc:c.a.func,renderDescriptionFunc:c.a.func}},function(e,t,n){"use strict";function i(){}var o=n(13);e.exports=function(){function e(e,t,n,i,a,r){if(r!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(15),c=(n.n(l),n(1)),u=n.n(c),p=n(26),h=n(6),d=n(8),m=n(31),f=(n.n(m),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLeftClick=n.handleLeftClick.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.canMoveToLeft=n.canMoveToLeft.bind(n),n.canMoveToRight=n.canMoveToRight.bind(n),n.toggleControls=n.toggleControls.bind(n),n.handleKeyboard=n.handleKeyboard.bind(n),n.getDescriptions=n.getDescriptions.bind(n),n.state={selectedImageIndex:e.selectedImage,direction:"none",imagesDescriptions:{}},n}return a(t,e),f(t,[{key:"getDescriptions",value:function(){var e=this,t=this.state.imagesDescriptions;this.props.images.forEach((function(n,i){if(n.description){if(n.description.then)return void n.description.then((function(n){t[i]=n,e.setState({imagesDescriptions:t})}));t[i]=n.description,e.setState({imagesDescriptions:t})}}))}},{key:"componentDidMount",value:function(){this.getDescriptions(),document.addEventListener("keydown",this.handleKeyboard),document.body.scrollTop,Object(d.a)(document.documentElement,"lightbox-open"),document.body.style.paddingRight="0px",document.body.style.overflowY="hidden"}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyboard),Math.abs(parseInt(document.documentElement.style.top,10)),Object(d.d)(document.documentElement,"lightbox-open"),document.body.style.paddingRight=null,document.body.style.overflowY=null}},{key:"handleKeyboard",value:function(e){var t=e.keyCode?e.keyCode:e.which;if(!(this.timeLastTransition&&new Date-this.timeLastTransition<350))switch(this.timeLastTransition=new Date,t){case 37:return this.handleLeftClick();case 39:return this.handleRightClick();case 27:return this.props.toggleLightbox()}}},{key:"handleLeftClick",value:function(){this.canMoveToLeft()&&this.setState({selectedImageIndex:this.state.selectedImageIndex-1,direction:"left"})}},{key:"handleRightClick",value:function(){this.canMoveToRight()&&this.setState({selectedImageIndex:this.state.selectedImageIndex+1,direction:"right"})}},{key:"canMoveToLeft",value:function(){return this.state.selectedImageIndex>0}},{key:"canMoveToRight",value:function(){return this.state.selectedImageIndex<this.props.images.length-1}},{key:"toggleControls",value:function(){Object(d.b)(this.refs.container,"hide-controls")}},{key:"render",value:function(){var e=[this.props,this.state],t=e[0],n=e[1],i=t.images[n.selectedImageIndex];if(!i)return console.error("Light box; ",t.images,n.selectedImageIndex),s.a.createElement("div",null);var o=void 0,a=void 0,r=n.imagesDescriptions[n.selectedImageIndex],c=(t.renderDescriptionFunc.call(this,r),"lightbox-transition-image");return this.canMoveToLeft()&&(o=s.a.createElement("div",{className:"lightbox-btn-left"},s.a.createElement(h.a,{icon:"left-arrow",onClick:this.handleLeftClick,size:56,hasRipple:!0}))),this.canMoveToRight()&&(a=s.a.createElement("div",{className:"lightbox-btn-right"},s.a.createElement(h.a,{icon:"right-arrow",onClick:this.handleRightClick,size:56,hasRipple:!0}))),s.a.createElement("div",{className:"lightbox-backdrop",ref:"container"},s.a.createElement("div",{className:"lightbox-btn-close"},s.a.createElement(h.a,{icon:"back-arrow",onClick:t.toggleLightbox,size:34,hasRipple:!0})),s.a.createElement("div",{className:"lightbox-title-content"},s.a.createElement("div",{className:"lightbox-title"},i.title)),s.a.createElement(l.CSSTransitionGroup,{transitionAppear:!0,transitionAppearTimeout:300,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:{enter:c+"-enter-"+n.direction,enterActive:c+"-enter-"+n.direction+"-active",leave:c+"-leave-"+n.direction,leaveActive:c+"-leave-"+n.direction+"-active",appear:c+"-appear",appearActive:c+"-appear-active"}},s.a.createElement(p.a,{key:i.src,src:i.src,showImageModifiers:t.showImageModifiers,toggleControls:this.toggleControls})),o,a)}}]),t}(s.a.Component);t.a=g,g.defaultProps={selectedImage:0,renderDescriptionFunc:function(e){return s.a.createElement("div",null,String(e))}},g.propTypes={selectedImage:u.a.number,images:u.a.array.isRequired,toggleLightbox:u.a.func.isRequired,showImageModifiers:u.a.bool,renderDescriptionFunc:u.a.func}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=i(n(16)),a=i(n(3));e.exports={TransitionGroup:a.default,CSSTransitionGroup:o.default}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=i(n(0)),c=i(n(1)),u=i(n(3)),p=i(n(20)),h=n(5),d=(h.nameShape.isRequired,c.default.bool,c.default.bool,c.default.bool,(0,h.transitionTimeout)("Appear"),(0,h.transitionTimeout)("Enter"),(0,h.transitionTimeout)("Leave"),{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),m=function(e){function t(){var n,i;o(this,t);for(var r=arguments.length,s=Array(r),c=0;c<r;c++)s[c]=arguments[c];return n=i=a(this,e.call.apply(e,[this].concat(s))),i._wrapChild=function(e){return l.default.createElement(p.default,{name:i.props.transitionName,appear:i.props.transitionAppear,enter:i.props.transitionEnter,leave:i.props.transitionLeave,appearTimeout:i.props.transitionAppearTimeout,enterTimeout:i.props.transitionEnterTimeout,leaveTimeout:i.props.transitionLeaveTimeout},e)},a(i,n)}return r(t,e),t.prototype.render=function(){return l.default.createElement(u.default,s({},this.props,{childFactory:this._wrapChild}))},t}(l.default.Component);m.displayName="CSSTransitionGroup",m.propTypes={},m.defaultProps=d,t.default=m,e.exports=t.default},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},function(e,t,n){"use strict";var i=function(){};e.exports=i},function(e,t,n){"use strict";function i(e){if(!e)return e;var t={};return a.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t}function o(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var i={},o=[];for(var a in e)t.hasOwnProperty(a)?o.length&&(i[a]=o,o=[]):o.push(a);var r=void 0,s={};for(var l in t){if(i.hasOwnProperty(l))for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}t.__esModule=!0,t.getChildMapping=i,t.mergeChildMappings=o;var a=n(0)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return b.length?b.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){b.length&&b.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=i(n(21)),u=i(n(23)),p=i(n(24)),h=n(25),d=i(n(0)),m=i(n(1)),f=n(2),g=n(5),b=[];h.transitionEnd&&b.push(h.transitionEnd),h.animationEnd&&b.push(h.animationEnd);var v=(m.default.node,g.nameShape.isRequired,m.default.bool,m.default.bool,m.default.bool,m.default.number,m.default.number,m.default.number,function(e){function t(){var n,i;o(this,t);for(var r=arguments.length,s=Array(r),l=0;l<r;l++)s[l]=arguments[l];return n=i=a(this,e.call.apply(e,[this].concat(s))),i.componentWillAppear=function(e){i.props.appear?i.transition("appear",e,i.props.appearTimeout):e()},i.componentWillEnter=function(e){i.props.enter?i.transition("enter",e,i.props.enterTimeout):e()},i.componentWillLeave=function(e){i.props.leave?i.transition("leave",e,i.props.leaveTimeout):e()},a(i,n)}return r(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var i=(0,f.findDOMNode)(this);if(i){var o=this.props.name[e]||this.props.name+"-"+e,a=this.props.name[e+"Active"]||o+"-active",r=null,l=void 0;(0,c.default)(i,o),this.queueClassAndNode(a,i);var p=function(e){e&&e.target!==i||(clearTimeout(r),l&&l(),(0,u.default)(i,o),(0,u.default)(i,a),l&&l(),t&&t())};n?(r=setTimeout(p,n),this.transitionTimeouts.push(r)):h.transitionEnd&&(l=s(i,p))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,p.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,c.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=l({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,d.default.cloneElement(d.default.Children.only(this.props.children),e)},t}(d.default.Component));v.displayName="CSSTransitionGroupChild",v.propTypes={},t.default=v,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(22));e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=i(e.className,t):e.setAttribute("class",i(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";function i(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),i=setTimeout(e,n);return u=t,i}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(4)),a=["","webkit","moz","o","ms"],r="clearTimeout",s=i,l=void 0,c=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&a.some((function(e){var t=c(e,"request");if(t in window)return r=c(e,"cancel"),s=function(e){return window[t](e)}}));var u=(new Date).getTime();(l=function(e){return s(e)}).cancel=function(e){window[r]&&"function"===typeof window[r]&&window[r](e)},t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var i="transform",o=void 0,a=void 0,r=void 0,s=void 0,l=void 0,c=void 0,u=void 0,p=void 0,h=void 0,d=void 0,m=void 0;if(function(e){return e&&e.__esModule?e:{default:e}}(n(4)).default){var f=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),i=void 0,o=void 0,a="",r=0;r<n.length;r++){var s=n[r];if(s+"TransitionProperty"in e){a="-"+s.toLowerCase(),i=t[s]("TransitionEnd"),o=t[s]("AnimationEnd");break}}return!i&&"transitionProperty"in e&&(i="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:i,prefix:a}}();o=f.prefix,t.transitionEnd=a=f.transitionEnd,t.animationEnd=r=f.animationEnd,t.transform=i=o+"-"+i,t.transitionProperty=s=o+"-transition-property",t.transitionDuration=l=o+"-transition-duration",t.transitionDelay=u=o+"-transition-delay",t.transitionTiming=c=o+"-transition-timing-function",t.animationName=p=o+"-animation-name",t.animationDuration=h=o+"-animation-duration",t.animationTiming=d=o+"-animation-delay",t.animationDelay=m=o+"-animation-timing-function"}t.transform=i,t.transitionProperty=s,t.transitionTiming=c,t.transitionDelay=u,t.transitionDuration=l,t.transitionEnd=a,t.animationName=p,t.animationDuration=h,t.animationTiming=d,t.animationDelay=m,t.animationEnd=r,t.default={transform:i,end:a,property:s,timing:c,delay:u,duration:l}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(2),c=n.n(l),u=n(1),p=n.n(u),h=n(27),d=n(7),m=n(8),f=n(30),g=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),b=[Math.pow(1.1,30),Math.pow(1/1.1,10)],v=b[0],y=b[1],E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resetImageInitialState=n.resetImageInitialState.bind(n),n.handleWindowResize=n.handleWindowResize.bind(n),n.handleRotate=n.handleRotate.bind(n),n.handleZoom=n.handleZoom.bind(n),n.setZoomLimits=n.setZoomLimits.bind(n),n.handleWheel=n.handleWheel.bind(n),n.handleMove=n.handleMove.bind(n),n.handleMoveEnd=n.handleMoveEnd.bind(n),n.handleMoveStart=n.handleMoveStart.bind(n),n.isInsideImage=n.isInsideImage.bind(n),n.state={loader:!0,ratio:1,positionX:0,positionY:0,rotate:0,width:0,height:0,boxWidth:0,boxHeight:0},n}return a(t,e),g(t,[{key:"componentDidMount",value:function(){this.resetImageInitialState(this.props),this.startPoints=null,window.addEventListener("resize",this.handleWindowResize),document.addEventListener("mousedown",this.handleMoveStart),document.addEventListener("mouseup",this.handleMoveEnd),document.addEventListener("touchstart",this.handleMoveStart),document.addEventListener("touchend",this.handleMoveEnd),window.setTimeout(this.props.toggleControls,500),this.props.showImageModifiers&&(document.addEventListener("mousemove",this.handleMove),document.addEventListener("touchmove",this.handleMove),document.addEventListener("wheel",this.handleWheel))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize),document.removeEventListener("mousedown",this.handleMoveStart),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleMoveEnd),document.removeEventListener("touchstart",this.handleMoveStart),document.removeEventListener("touchmove",this.handleMove),document.removeEventListener("touchend",this.handleMoveEnd),document.removeEventListener("wheel",this.handleWheel)}},{key:"resetImageInitialState",value:function(e){var t=new Image,n=this;t.onload=function(){var e=[this.width,this.height],t=e[0],i=e[1],o=c.a.findDOMNode(n.refs.container),a=[o.offsetWidth,o.offsetHeight],r=a[0],s=a[1],l=Math.min(r/t,s/i);isNaN(l)&&(l=1),n.setState({loader:!1,ratio:l,rotate:0,positionX:(r-t*l)/2,positionY:(s-i*l)/2,width:this.width,height:this.height,boxWidth:r,boxHeight:s,moving:!1})},t.src=e.src}},{key:"handleWindowResize",value:function(){this.resetImageInitialState(this.props)}},{key:"handleRotate",value:function(e){this.setState({rotate:(360+this.state.rotate+e)%360})}},{key:"handleZoom",value:function(e,t){t||(t=1);var n=e>0?Math.pow(1.1,t):Math.pow(1/1.1,t),i=this.setZoomLimits(this.state.ratio*n),o=this.state,a=void 0,r=void 0;if(Math.min(o.boxWidth/o.width,o.boxHeight/o.height)>=i-.05)a=(o.boxWidth-o.width*i)/2,r=(o.boxHeight-o.height*i)/2;else{var s=o.boxWidth/2,l=o.boxHeight/2,c=s-o.positionX,u=l-o.positionY,p=c/(o.width*o.ratio),h=u/(o.height*o.ratio);a=s-o.width*i*p,r=l-o.height*i*h}this.setState({ratio:i,positionX:a,positionY:r})}},{key:"setZoomLimits",value:function(e){var t=this.state,n=Math.min(t.boxWidth/t.width,t.boxHeight/t.height);return e/n>v?v*n:e/n<y?y*n:e}},{key:"handleWheel",value:function(e){this.isInsideImage(e)&&this.handleZoom(e.deltaY)}},{key:"handleMove",value:function(e){e=this.getEv(e);var t=this.state;if(t.moving){var n=void 0,i=void 0;switch(t.rotate){case 90:i=this.startPoints[0]-e.pageX,n=e.pageY-this.startPoints[1];break;case 180:n=this.startPoints[0]-e.pageX,i=this.startPoints[1]-e.pageY;break;case 270:i=e.pageX-this.startPoints[0],n=this.startPoints[1]-e.pageY;break;default:n=e.pageX-this.startPoints[0],i=e.pageY-this.startPoints[1]}this.startPoints=[e.pageX,e.pageY],(t.positionX+n>=0||t.positionX+n<=t.boxWidth-t.width*t.ratio)&&(n=0),(t.positionY+i>=0||t.positionY+i<=t.boxHeight-t.height*t.ratio)&&(i=0),this.setState({positionX:t.positionX+n,positionY:t.positionY+i})}}},{key:"handleMoveEnd",value:function(e){this.setState({moving:!1})}},{key:"handleMoveStart",value:function(e){if(e=this.getEv(e),this.isInsideImage(e)&&1===e.which){this.startPoints=[e.pageX,e.pageY],this.setState({moving:!0});var t=this;window.setTimeout((function(){!t.state.moving&&t.startPoints&&t.startPoints[0]===e.pageX&&t.startPoints[1]===e.pageY&&Object(m.c)(e.target,["lightbox-backdrop","lightbox-image"])&&t.props.toggleControls()}),200)}}},{key:"isInsideImage",value:function(e){var t=c.a.findDOMNode(this.refs.container).getBoundingClientRect();return!(e.pageY<t.top||e.pageY>t.bottom||e.pageX<t.left||e.pageX>t.right)}},{key:"getEv",value:function(e){return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type?{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,which:1,target:e.target}:e}},{key:"render",value:function(){var e=[this.props,this.state],t=e[0],n=e[1],i="url("+t.src+")",o=void 0,a=void 0;t.showImageModifiers&&(o=s.a.createElement(h.a,{handleRotate:this.handleRotate,handleZoom:this.handleZoom,currentImage:t.src})),n.loader&&(i="none",a=s.a.createElement("div",{className:"lightbox-loader"},s.a.createElement(d.a,{icon:"spinner",size:58})));var r="rotate("+n.rotate+"deg)",l={height:"100%",backgroundImage:i,backgroundRepeat:"no-repeat",backgroundSize:n.width*n.ratio+"px "+n.height*n.ratio+"px",backgroundPosition:n.positionX+"px "+n.positionY+"px",MsTransform:r,WebkitTransform:r,transform:r};return s.a.createElement("div",{className:"lightbox-content-center"},o,s.a.createElement("div",{className:"lightbox-image-container",ref:"container"},s.a.createElement("div",{className:"lightbox-image"+(n.moving?" moving":""),style:l},a)))}}]),t}(s.a.Component);t.a=E,Image.propTypes={src:p.a.string.isRequired,showImageModifiers:p.a.bool.isRequired}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(1),c=n.n(l),u=n(6),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRotateClockwise=n.handleRotateClockwise.bind(n),n.handleRotateCounterclockwise=n.handleRotateCounterclockwise.bind(n),n.handleZoomIn=n.handleZoomIn.bind(n),n.handleZoomOut=n.handleZoomOut.bind(n),n.handleDownload=n.handleDownload.bind(n),n}return a(t,e),p(t,[{key:"handleRotateClockwise",value:function(){this.props.handleRotate.call(this,90)}},{key:"handleRotateCounterclockwise",value:function(){this.props.handleRotate.call(this,-90)}},{key:"handleZoomIn",value:function(){this.props.handleZoom.call(this,1,10)}},{key:"handleZoomOut",value:function(){this.props.handleZoom.call(this,-1,10)}},{key:"handleDownload",value:function(){console.log(this.props.currentImage),window.open(this.props.currentImage)}},{key:"render",value:function(){return s.a.createElement("div",{className:"lightbox-modifiers-box"},s.a.createElement(u.a,{icon:"zoom-in",onClick:this.handleZoomIn,size:34,hasRipple:!0}),s.a.createElement(u.a,{icon:"zoom-out",onClick:this.handleZoomOut,size:34,hasRipple:!0}),s.a.createElement(u.a,{icon:"rotate-left",onClick:this.handleRotateCounterclockwise,size:34,hasRipple:!0}),s.a.createElement(u.a,{icon:"rotate-right",onClick:this.handleRotateClockwise,size:34,hasRipple:!0}),s.a.createElement(u.a,{icon:"download",onClick:this.handleDownload,size:34,hasRipple:!0}))}}]),t}(s.a.Component);t.a=h,h.propTypes={handleRotate:c.a.func.isRequired,handleZoom:c.a.func.isRequired,currentImage:c.a.string.isRequired}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={"zoom-out":["M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"],"zoom-in":["M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"],download:["M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"],"rotate-left":["M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"],"rotate-right":["M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"],"left-arrow":["M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],"right-arrow":["M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],"back-arrow":["M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],spinner:["M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"]}},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),l=n(2),c=n.n(l),u=n(1),p=n.n(u),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),h(t,[{key:"componentDidMount",value:function(){this._popup=document.createElement("div"),document.body.appendChild(this._popup),this._render()}},{key:"componentDidUpdate",value:function(){this._render()}},{key:"componentWillUnmount",value:function(){c.a.unmountComponentAtNode(this._popup),document.body.removeChild(this._popup)}},{key:"_render",value:function(){c.a.render(this.props.children,this._popup)}},{key:"render",value:function(){return null}}]),t}(s.a.PureComponent);t.a=d,d.propTypes={children:p.a.node}},function(e,t){}]))},593:function(e,t,n){"use strict";var i=n(8),o=n(828),a=n(501),r=n(1138),s=n(1144),l=n(1157),c=n(1142),u=n(1143),p=n(504),h=n(512),d=n(1158),m=n(310),f=n(1149),g=n(15),b=n(502),v=n(176),y=n(732),E=n.n(y),w=n(534),C=n.n(w),x=n(540),T=n.n(x),k=n(734),O=n.n(k),L=n(735),_=n.n(L),P=n(733),I=n.n(P),N=n(535),M=n(43),S=n(528),R=n.n(S);var j=n(578),A=n(32),D=n(75),z=n(574),W=n(124),F=n(122);class U extends F.a{constructor(e,t,n,i,o,a,r,s,l,c,u,p,h,d,m,f,g,b,v,y,E,w,C,x=[],T=D.a.Public,k){super(),this.id=e,this.postTypeId=t,this.creationDate=n,this.deleteDate=i,this.score=o,this.votes=a,this.viewCount=r,this.comments=s,this.body=l,this.ownerUserId=c,this.ownerDisplayName=u,this.ownerAvatar=p,this.lastEditDate=h,this.tags=d,this.commentCounter=m,this.image=f,this.imageFullPath=g,this.video=b,this.thumbnail=v,this.album=y,this.disableComments=E,this.disableSharing=w,this.deleted=C,this.accessUserList=x,this.permission=T,this.version=k}}var q=n(206),H=n(51),Y=n.n(H),X=n(0),Z=n.n(X),V=n(97),K=n(59),G=n(729),B=n.n(G),Q=n(20),J=n(5),$=n(44),ee=n(17),te=n(18),ne=n(519),ie=n(114),oe=n.n(ie),ae=n(138);const re=[{label:""},{label:""}];function se(e){return Z.a.createElement(f.a,Object.assign({direction:"up"},e))}class le extends X.Component{static getDerivedStateFromProps(e,t){if(e.progress){for(let n=0;n<t.selectedPhotos.length;n++){const i=t.selectedPhotos[n];if(100!==e.progress.getIn([i.fileName,"percent"],0))return{nextDisabled:!0}}return{nextDisabled:!1}}return null}constructor(e){super(e),this.handleSetImage=()=>{this.close()},this.getPermissionLabel=()=>{const e=this.props.t,t=this.state.permission;if(!e)return"";let n="";return t===D.a.Public?n=e("permission.public"):t===D.a.Circles?n=e("permission.circles"):t===D.a.OnlyMe&&(n=e("permission.onlyMe")),n},this.handleChange=e=>t=>{const n=this.props.t,i=t.target.value;let o=null;M.a.isEmpty(i)&&(o=n("album.".concat(e,"Error"))),this.setState((()=>({[e]:i,["".concat(e,"Error")]:o,saveDisabled:!M.a.isEmpty(o)})))},this.handleNext=()=>{this.setState((e=>({activeStep:e.activeStep+1})))},this.handleBack=()=>{this.setState((e=>({activeStep:e.activeStep-1})))},this.handleTogglePermission=()=>{this.setState((e=>({permissionOpen:!e.permissionOpen})))},this.handleAccessList=(e,t)=>{this.setState({accessUserList:e,permission:t,permissionOpen:!1})},this.closeDialog=()=>{const e=this.props.onClose;e&&e()},this.saveAlbum=()=>{const e=this.props,t=e.progress,n=e.post,o=e.t,a=e.currentUser,r=e.currentAlbum,s=this.state,l=s.accessUserList,c=s.permission,u=M.a.isEmpty(this.state.description)?"":this.state.description,p=M.a.isEmpty(this.state.albumName)?o("album.defaultAlbumName"):this.state.albumName,h=[...this.state.selectedPhotos],d=[],m=h.map((e=>{const n=t.getIn([e.fileName,"meta"],{url:""}),i=e.fileName.split(".")[0],o=new W.a(i,0,0,n.url||URL.createObjectURL(e.file),n.url||URL.createObjectURL(e.file),e.fileName,"","",e.fileName,a&&a.userId?a.userId:"0",0,"",0,0,"",!1,l,c);return d.push(o),{url:n.url,fileName:e.fileName,fileId:i}}));if(n&&a){const e={photos:m.slice(0,4),cover:m[0].url,coverId:m[0].fileId,count:m.length,title:p},t=e.photos.map((e=>e.url)),n=new z.a(t,e.cover,e.coverId,e.count,e.title);r?this.updateAlbum(Object(i.a)({},r),a,u,m[0].url,n,l,c,d):this.createAlbum(a,u,m[0].url,n,l,c,d)}},this.createAlbum=(e,t,n,i,o,a,r)=>{const s=this.props.post,l=new U("0",q.a.Album,Y()().utc().valueOf(),0,0,{},0,{},t,e.userId,e.fullName,e.avatar,0,[],0,n,"","","",i,!1,!1,!1,o,a,Q.a.dataFormat.postVersion);s&&s(l,r)},this.updateAlbum=(e,t,n,i,o,a,r,s)=>{const l=this.props.post;e.body=n,e.image=i,e.album=o,e.accessUserList=a,e.permission=r,l&&l(e,s)},this.handleStepChange=e=>{this.setState({activeStep:e})},this.onFileChange=e=>{const t=this.props.uploadImage,n=[...this.state.selectedPhotos];if(t){const i=e.currentTarget.files,o=[];for(let e=0;e<i.length;e++){const n=i[e],a=N.a.getExtension(n.name),r="".concat(oe()(),".").concat(a);o.push({file:URL.createObjectURL(n),fileName:r}),t(n,r)}const a=[...n,...o];this.setState({selectedPhotos:a}),e.currentTarget.value=null}},this.deleteSelectedPhoto=e=>{let t=[...this.state.selectedPhotos];t=t.filter((t=>t.fileName!==e)),this.setState({selectedPhotos:t})},this.close=()=>{this.props.onClose&&this.props.onClose()},this.imageList=()=>{const e=this.props,t=e.classes,n=e.progress;return this.state.selectedPhotos.map((e=>{const i=n.getIn([e.fileName,"percent"],0),o=n.getIn([e.fileName,"visible"],!0);return Z.a.createElement(c.a,{key:"album-dialog-tile-".concat(e.fileName)},Z.a.createElement("img",{src:e.file,alt:"something"}),Z.a.createElement(u.a,{title:o?Z.a.createElement(h.a,{variant:"determinate",value:i,color:"secondary"}):"",actionIcon:o?"":Z.a.createElement(p.a,{className:t.icon,onClick:()=>this.deleteSelectedPhoto(e.fileName)},Z.a.createElement(T.a,null))}))}))},this.gridTile=()=>{const e=this.props.classes;return Z.a.createElement("div",{className:e.gridTileRoot},Z.a.createElement(s.a,{cellHeight:180,className:e.gridList},Z.a.createElement(c.a,{key:"Subheader",cols:2,style:{height:"auto"}}),this.imageList()))},this.state={acceptedFiles:[],rejectedFiles:[],activeStep:0,selectedPhotos:[...e.photos],nextDisabled:!0,description:e.currentAlbum&&e.currentAlbum.body?e.currentAlbum.body:"",descriptionError:"",albumName:e.currentAlbum&&e.currentAlbum.album&&e.currentAlbum.album.title?e.currentAlbum.album.title:"",saveDisabled:void 0===e.currentAlbum,albumNameError:"",accessUserList:e.currentAlbum&&e.currentAlbum.accessUserList?e.currentAlbum.accessUserList:[],permission:e.currentAlbum&&e.currentAlbum.permission?e.currentAlbum.permission:D.a.Public,permissionOpen:!1},this.close=this.close.bind(this),this.onFileChange=this.onFileChange.bind(this),this.handleSetImage=this.handleSetImage.bind(this),this.imageList=this.imageList.bind(this),this.deleteSelectedPhoto=this.deleteSelectedPhoto.bind(this),this.handleChange=this.handleChange.bind(this),this.saveAlbum=this.saveAlbum.bind(this),this.handleTogglePermission=this.handleTogglePermission.bind(this),this.getPermissionLabel=this.getPermissionLabel.bind(this),this.handleAccessList=this.handleAccessList.bind(this),this.closeDialog=this.closeDialog.bind(this),this.createAlbum=this.createAlbum.bind(this),this.updateAlbum=this.updateAlbum.bind(this)}onDrop(e,t){this.setState({acceptedFiles:e,rejectedFiles:t})}render(){const e=this.props,t=e.t,n=e.classes,i=e.theme,s=e.open,c=e.onClose,u=e.createAlbumRequestStatus,h=this.state,f=h.activeStep,g=h.nextDisabled,y=h.selectedPhotos,w=h.description,x=h.descriptionError,T=h.albumNameError,k=h.albumName,L=h.permissionOpen,P=h.permission,N=h.saveDisabled,S=re.length,R=u===ee.a.Sent;return Z.a.createElement(r.a,{id:"album-dialog-",open:s,classes:{paper:n.paper},onClose:c,TransitionComponent:se},Z.a.createElement("input",{accept:"image/*",className:n.input,id:"album-dialog-button-file",multiple:!0,onChange:this.onFileChange,type:"file"}),Z.a.createElement("div",{className:n.root},Z.a.createElement(m.a,{square:!0,elevation:0,className:n.header},Z.a.createElement(v.a,null,re[f].label),Z.a.createElement(p.a,{color:"inherit",onClick:c,"aria-label":"Close"},Z.a.createElement(C.a,null)),0===f?Z.a.createElement("label",{htmlFor:"album-dialog-button-file"},Z.a.createElement(o.a,{component:"span",color:"primary"},Z.a.createElement(E.a,null),t("album.addPhotos"))):Z.a.createElement(v.a,{variant:"h6"}," ",t("album.saveAlbum")," ")),Z.a.createElement(B.a,{axis:"rtl"===i.direction?"x-reverse":"x",index:this.state.activeStep,onChangeIndex:this.handleStepChange,enableMouseEvents:!0},this.gridTile(),Z.a.createElement("div",{className:n.information},Z.a.createElement(l.a,{onClick:this.handleTogglePermission,className:n.button},Z.a.createElement(I.a,null),this.getPermissionLabel()),Z.a.createElement("div",{style:{height:40}}),Z.a.createElement(b.a,{autoFocus:1===f,value:k,onChange:this.handleChange("albumName"),placeholder:t("album.albumTitle"),error:!M.a.isEmpty(T),helperText:T}),Z.a.createElement("div",{style:{height:40}}),Z.a.createElement(b.a,{value:w,onChange:this.handleChange("description"),placeholder:t("album.description"),multiline:!0,rows:2,rowsMax:4,style:{fontWeight:400,fontSize:"14px",flexShrink:0,width:"initial",flexGrow:1},error:!M.a.isEmpty(x),helperText:x}))),Z.a.createElement(d.a,{steps:S,position:"bottom",activeStep:f,className:n.mobileStepper,nextButton:f!==S-1?Z.a.createElement(Z.a.Fragment,null,Z.a.createElement(o.a,{size:"small",disabled:g||!(y.length>0),onClick:this.handleNext},t("album.next")," ","rtl"===i.direction?Z.a.createElement(O.a,null):Z.a.createElement(_.a,null))):Z.a.createElement("div",{className:n.wrapper},Z.a.createElement(o.a,{size:"small",variant:"contained",disabled:R||N||!M.a.isEmpty(T)||!M.a.isEmpty(x),color:"secondary",onClick:this.saveAlbum},t("album.save")),R&&Z.a.createElement(a.a,{size:24,className:n.buttonProgress})),backButton:Z.a.createElement(o.a,{size:"small",onClick:this.handleBack,disabled:0===f},"rtl"===i.direction?Z.a.createElement(_.a,null):Z.a.createElement(O.a,null),t("album.back"))})),Z.a.createElement(j.a,{onClose:this.handleTogglePermission,open:L,onAddAccessList:this.handleAccessList,access:P}))}}const ce=Object(V.c)("translations")(le),ue=Object(g.a)((e=>({fullPageXs:{},root:{flexGrow:1,overflow:"hidden"},gridTileRoot:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,maxHeight:380},icon:{color:"rgba(255, 255, 255, 0.54)"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),marginBottom:20,backgroundColor:e.palette.background.default},paper:{minHeight:"500px",[e.breakpoints.down("xs")]:{width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",borderRadius:0,margin:0}},information:{display:"flex",flexDirection:"column",padding:20},buttonProgress:{color:R.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"}})),{withTheme:!0})(ce);t.a=Object(K.connect)((()=>{const e=te.a.selectCurrentUser(),t=ne.a.selectRequest();return n=>{const i=e(n).toJS(),o=M.a.createServerRequestId(A.a.GalleryCreateAlbum,Object(ae.b)(i.userId,"currentUser.userId")),a=t(n,{requestId:o});return{currentUser:i,createAlbumRequestStatus:a?a.status:ee.a.NoAction}}}),(e=>({post:(t,n)=>e($.i(t,n)),uploadImage:(t,n)=>e($.t(t,n)),deleteImage:(t,n)=>e($.j(t,Q.a.data.imageFolderPath,n)),progressChange:(t,n)=>e(J.o(t,n))})))(ue)}}]);