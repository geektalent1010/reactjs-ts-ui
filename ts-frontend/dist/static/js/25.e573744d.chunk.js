(this["webpackJsonptelar-social-engine"]=this["webpackJsonptelar-social-engine"]||[]).push([[25],{1188:function(e,t,s){"use strict";s.r(t),s.d(t,"StreamComponent",(function(){return S}));var o=s(175),r=s(295),n=s.n(r),i=s(0),a=s.n(i),l=s(97),c=s(126),h=s(592),p=s(43),u=s(32),d=s(59),m=s(37),f=s(5),g=s(17),v=s(18),w=s(71),y=s(519),b=s(138);const E=e=>({loadStream:(t,s)=>e(m.j(t,s)),setHomeTitle:t=>e(f.q(t||"")),increasePage:()=>e(m.n()),showTopLoading:()=>e(f.w()),hideTopLoading:()=>e(f.j())}),T=()=>{const e=v.a.selectCurrentUser(),t=w.a.selectHasMorePostStream(),s=w.a.selectStreamPage(),o=y.a.selectRequest(),r=w.a.selectStreamPosts();return n=>{const i=e(n).toJS(),a=Object(b.b)(i.userId,"currentUser.userId"),l=p.a.createServerRequestId(u.a.StreamGetPosts,a),c=o(n,{requestId:l}),h=t(n),d=r(n),m=s(n);return{hasMorePosts:h,currentUser:i,streamRequestStatus:c?c.status:g.a.NoAction,posts:d,requestId:l,page:m}}};class S extends i.Component{constructor(e){super(e),this.styles={postWritePrimaryText:{color:o.a[400],cursor:"text"},postWtireItem:{fontWeight:"200"}},this.state={},this.loadPosts=this.loadPosts.bind(this)}componentDidMount(){const e=this.props,t=e.setHomeTitle,s=e.t;t&&s&&t(s("header.home"))}loadPosts(){const e=this.props,t=e.loadStream,s=e.page,o=e.increasePage;t&&void 0!==s&&o&&(t(s),o())}render(){const e=this.props,t=e.hasMorePosts,s=e.posts,o=e.requestId,r=e.currentUser;return a.a.createElement("div",{className:"stream-root"},a.a.createElement(h.a,{homeTitle:r?r.fullName:"",requestId:o,posts:s,loadStream:this.loadPosts,hasMorePosts:t,displayWriting:!0}))}}const P=Object(l.c)("translations")(S);var x;t.default=Object(c.withRouter)((x=n()((e=>({root:{},gridCell:{[e.breakpoints.down("sm")]:{maxWidth:"100% !important",width:"100%"}}})))(P),Object(d.connect)(T,E)(x)))},531:function(e,t,s){"use strict";var o=s(616),r=s(501),n=s(0),i=s.n(n);class a extends n.Component{render(){const e=this.props.theme;return i.a.createElement("div",{key:"load-more-progress",className:"g-load-more"},i.a.createElement(r.a,{size:30,thickness:5,style:{color:e.palette.primary.light}}))}}t.a=Object(o.a)(a)},536:function(e,t,s){"use strict";var o=s(0),r=s.n(o),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)};var i=function(){return(i=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var a="Pixel",l="Percent",c={unit:l,value:.8};var h=function(e){function t(t){var s=e.call(this,t)||this;return s.lastScrollTop=0,s.actionTriggered=!1,s.startY=0,s.currentY=0,s.dragging=!1,s.maxPullDownDistance=0,s.getScrollableTarget=function(){return s.props.scrollableTarget instanceof HTMLElement?s.props.scrollableTarget:"string"===typeof s.props.scrollableTarget?document.getElementById(s.props.scrollableTarget):(null===s.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},s.onStart=function(e){s.lastScrollTop||(s.dragging=!0,e instanceof MouseEvent?s.startY=e.pageY:e instanceof TouchEvent&&(s.startY=e.touches[0].pageY),s.currentY=s.startY,s._infScroll&&(s._infScroll.style.willChange="transform",s._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},s.onMove=function(e){s.dragging&&(e instanceof MouseEvent?s.currentY=e.pageY:e instanceof TouchEvent&&(s.currentY=e.touches[0].pageY),s.currentY<s.startY||(s.currentY-s.startY>=Number(s.props.pullDownToRefreshThreshold)&&s.setState({pullToRefreshThresholdBreached:!0}),s.currentY-s.startY>1.5*s.maxPullDownDistance||s._infScroll&&(s._infScroll.style.overflow="visible",s._infScroll.style.transform="translate3d(0px, "+(s.currentY-s.startY)+"px, 0px)")))},s.onEnd=function(){s.startY=0,s.currentY=0,s.dragging=!1,s.state.pullToRefreshThresholdBreached&&s.props.refreshFunction&&s.props.refreshFunction(),requestAnimationFrame((function(){s._infScroll&&(s._infScroll.style.overflow="auto",s._infScroll.style.transform="none",s._infScroll.style.willChange="none")}))},s.onScrollListener=function(e){"function"===typeof s.props.onScroll&&setTimeout((function(){return s.props.onScroll&&s.props.onScroll(e)}),0);var t=s.props.height||s._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;s.actionTriggered||(s.isElementAtBottom(t,s.props.scrollThreshold)&&s.props.hasMore&&(s.actionTriggered=!0,s.setState({showLoader:!0}),s.props.next&&s.props.next()),s.lastScrollTop=t.scrollTop)},s.state={showLoader:!1,pullToRefreshThresholdBreached:!1},s.throttledOnScrollListener=function(e,t,s,o){var r,n=!1,i=0;function a(){r&&clearTimeout(r)}function l(){var l=this,c=Date.now()-i,h=arguments;function p(){i=Date.now(),s.apply(l,h)}function u(){r=void 0}n||(o&&!r&&p(),a(),void 0===o&&c>e?p():!0!==t&&(r=setTimeout(o?u:p,void 0===o?e-c:e)))}return"boolean"!==typeof t&&(o=s,s=t,t=void 0),l.cancel=function(){a(),n=!0},l}(150,s.onScrollListener).bind(s),s.onStart=s.onStart.bind(s),s.onMove=s.onMove.bind(s),s.onEnd=s.onEnd.bind(s),s}return function(e,t){function s(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,e),t.prototype.componentDidMount=function(){var e=this;if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",(function(t){return e.throttledOnScrollListener(t)})),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){var e=this;this.el&&(this.el.removeEventListener("scroll",(function(t){return e.throttledOnScrollListener(t)})),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.key===e.key&&this.props.dataLength===e.dataLength||(this.actionTriggered=!1,this.setState({showLoader:!1,pullToRefreshThresholdBreached:!1}))},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var s=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,o=function(e){return"number"===typeof e?{unit:l,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:a,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:l,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),c):(console.warn("scrollThreshold should be string or number"),c)}(t);return o.unit===a?e.scrollTop+s>=e.scrollHeight-o.value:e.scrollTop+s>=o.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=i({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),s=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),o=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return r.a.createElement("div",{style:o,className:"infinite-scroll-component__outerdiv"},r.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&r.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},r.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!s&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(o.Component);t.a=h},592:function(e,t,s){"use strict";var o=s(175),r=s(508),n=s(1137),i=s(510),a=s(310),l=s(295),c=s.n(l),h=s(557),p=s.n(h);const u=e=>e.reduce(((e,t,s,o)=>t<o[e]?s:e),0),d=e=>{const t=[];for(let s=0;s<e;s++)t.push(0);return t};var m=s(43),f=s(150),g=s.n(f),v=s(206),w=s(4),y=s(585),b=s.n(y),E=s(0),T=s.n(E),S=s(587),P=s.n(S),x=s(97),W=s(536),L=s(126),R=s(577),M=s(553),D=s(204),_=s(531),C=s(17),O=s(179),Y=s(59),N=s(5),k=s(18),j=s(121),q=s(519);const B=e=>({openPostWrite:()=>e(N.n(O.a.PostWrite)),closePostWrite:()=>e(N.c(O.a.PostWrite)),showTopLoading:()=>e(N.w()),hideTopLoading:()=>e(N.j())}),I=()=>{const e=k.a.selectCurrentUser(),t=j.a.selectDialogState(),s=j.a.selectProgress(),o=q.a.selectRequest();return(r,n)=>{const i=e(r),a=t(r,{type:O.a.PostWrite}),l=o(r,{requestId:n.requestId}),c=s(r);return{streamRequestStatus:l?l.status:C.a.NoAction,avatar:i.get("avatar",""),fullName:i.get("fullName"),postWriteDilogOpen:a,progress:c}}},A=(e,t)=>e>1400?F(3,t):e<867?F(1,t):e<1400?F(2,t):[],F=(e,t)=>{const s=[];let o=0;const r=d(e);return t.forEach((e=>{s[o]||(s[o]=[]),s[o].push(e),++r[o];e.get("postTypeId")!==v.a.Text&&++r[o];const t=e.get("body");r[o]+=Number(m.a.getNumberOfLines(t)/10),o=u(r)})),s};class H extends E.Component{static getDerivedStateFromProps(e,t){if(e.posts&&e.posts.count()>0&&!e.posts.equals(t.prevPosts)){return{posts:A(window.innerWidth,e.posts),prevPosts:e.posts.count()}}return null}constructor(e){super(e),this.nextPage=0,this.styles={postWritePrimaryText:{color:o.a[400],cursor:"text"},postWtireItem:{fontWeight:"200"}},this.loader=()=>{const e=this.props.streamRequestStatus,t=this.props.loadStream;t&&e&&e!==C.a.Sent&&(t(this.nextPage),this.nextPage++)},this.handleResize=e=>{const t=this.props.posts,s=A(e.target.innerWidth,t);this.setState({posts:s})},this.handleOpenPostWrite=()=>{const e=this.props.openPostWrite;e&&e()},this.handleClosePostWrite=()=>{const e=this.props.closePostWrite;e&&e()},this.writePostElement=()=>{const e=this.props,t=e.tag,s=e.displayWriting,o=e.classes,l=e.t,c=e.postWriteDilogOpen;return T.a.createElement("div",{className:g()("grid-cell animate-top",o.gridCell),style:{maxWidth:"530px",minWidth:"280px"}},c&&T.a.createElement(M.a,{open:c,onRequestClose:this.handleClosePostWrite,edit:!1}),s&&!t?T.a.createElement(T.a.Fragment,null,T.a.createElement(a.a,{elevation:2},T.a.createElement(r.a,{button:!0,style:this.styles.postWtireItem,onClick:this.handleOpenPostWrite},T.a.createElement(D.a,{fullName:this.props.fullName,fileName:this.props.avatar,size:36}),T.a.createElement(i.a,{inset:!0,primary:T.a.createElement("span",{style:this.styles.postWritePrimaryText}," ",l("home.postWriteButtonText"))}),T.a.createElement(n.a,null,T.a.createElement(p.a,null)))),T.a.createElement("div",{style:{height:"16px"}})):"")},this.getpostList=()=>{const e=this.props.classes,t=this.state.posts,s=[];return(t||[]).forEach(((t,o)=>{const r=T.a.createElement("div",{className:e.postBox,key:"post-stream-column-".concat(o)},0===o?this.writePostElement():"",t.map(((t,s)=>T.a.createElement(E.Fragment,{key:"post-container-".concat(t.get("id"))},s>0?T.a.createElement("div",{className:e.spaceBox}," "):"",T.a.createElement(R.a,{key:"".concat(t.get("id"),"-stream-div-post"),post:t})," "))));s.push(r)})),s},this.state={divided:!1,disableComments:this.props.disableComments||!1,disableSharing:this.props.disableSharing||!1,openPostWrite:!1,homeTitle:e.homeTitle||"",hasMorePosts:!0,posts:[],prevPosts:Object(w.Map)({})},this.handleResize=b()(this.handleResize,300),this.handleResize=this.handleResize.bind(this),this.loader=this.loader.bind(this),this.handleOpenPostWrite=this.handleOpenPostWrite.bind(this),this.handleClosePostWrite=this.handleClosePostWrite.bind(this)}componentDidMount(){setTimeout((()=>{this.loader()}),500)}render(){const e=this.props,t=e.hasMorePosts,s=e.classes,o=e.posts;return T.a.createElement(W.a,{dataLength:o?o.size:0,next:this.loader,hasMore:t||!1,endMessage:"",loader:T.a.createElement(_.a,{key:"stream-load-more-progress"})},T.a.createElement(P.a,{target:"window",onResize:this.handleResize}),!o||o.count()>0?"":this.writePostElement(),T.a.createElement("div",{className:s.container},o&&o.count()>0&&this.getpostList()))}}const z=Object(x.c)("translations")(H);var U;t.a=Object(L.withRouter)((U=c()((e=>({root:{position:"relative"},container:{maxWidth:1200,textAlign:"center",whiteSpace:"nowrap",lineHeight:0,position:"relative",boxPack:"center",WebkitJustifyContent:"center",justifyContent:"center",display:"flex",margin:"0 auto",padding:"10px 0",width:"100%","@media (min-width: 440px)":{width:"90%"},"@media only screen and (min-width: 860px)":{width:"90%"},"@media (min-width: 1600px)":{width:"94%"},"@media (max-width: 440px)":{width:"calc(100% - 16px)",margin:"0 8px"}},postBox:{flexGrow:1,WebkitBoxFlex:1,flex:"0 1 auto",maxWidth:530,minWidth:140,width:"100%",display:"inline-block",verticalAlign:"top",textAlign:"left",whiteSpace:"normal",lineHeight:"normal","& + &":{marginLeft:24}},spaceBox:{height:24},gridCell:{[e.breakpoints.down("sm")]:{maxWidth:"100% !important",width:"100%"}}})))(z),Object(Y.connect)(I,B)(U)))},616:function(e,t,s){"use strict";var o=s(160),r=s(123),n=Object(o.b)({defaultTheme:r.a});t.a=n}}]);